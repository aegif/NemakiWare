<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/core/ui/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OIDC Callback - NemakiWare</title>
    <!--
      OIDC Callback Page

      This page handles the OIDC redirect callback from Keycloak (or other OIDC providers).
      It loads the same React SPA assets as index.html, allowing the Login component
      to detect the callback URL and process the authorization code.

      Flow:
      1. User clicks "OIDC認証でログイン" on login page
      2. OIDCService.signinRedirect() redirects to Keycloak
      3. User authenticates at Keycloak
      4. Keycloak redirects to: /core/ui/oidc-callback?code=xxx&state=xxx
      5. This page loads and initializes the React app
      6. Login.tsx detects pathname includes 'oidc-callback'
      7. Login.tsx calls OIDCService.signinRedirectCallback() to exchange code for tokens
      8. OIDCService.convertOIDCToken() converts OIDC token to NemakiWare auth token
      9. User is logged in and can access the application

      Note: The script and style URLs must match those in index.html.
      When rebuilding the UI, these may need to be updated if the hash changes.
    -->
    <script type="module" crossorigin src="/core/ui/assets/index-CggBlo6z.js"></script>
    <link rel="stylesheet" crossorigin href="/core/ui/assets/index-BaB_POPR.css">
    <style>
      /* Loading indicator while React initializes */
      .oidc-loading {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      }
      .oidc-loading h2 {
        color: #333;
        margin-bottom: 16px;
      }
      .oidc-loading p {
        color: #666;
      }
      .oidc-spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #1890ff;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: oidc-spin 1s linear infinite;
        margin: 20px 0;
      }
      @keyframes oidc-spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      /* Hide loading indicator once React mounts */
      #root:not(:empty) + .oidc-loading {
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <!-- Loading indicator shown until React app mounts -->
    <div class="oidc-loading">
      <h2>OIDC認証処理中...</h2>
      <div class="oidc-spinner"></div>
      <p>認証が完了するまでお待ちください。</p>
    </div>
  </body>
</html>
