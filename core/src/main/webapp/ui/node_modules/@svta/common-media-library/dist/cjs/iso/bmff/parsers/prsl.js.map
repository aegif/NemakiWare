{"version":3,"file":"prsl.js","sourceRoot":"","sources":["../../../../../src/iso/bmff/parsers/prsl.ts"],"names":[],"mappings":";;AAgDA,oBAqBC;AAhCD;;;;;;;;;;GAUG;AACH,SAAgB,IAAI,CAAC,IAAa;IACjC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IAC9C,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACjC,MAAM,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC5C,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAS,kBAAkB,EAAE,GAAG,EAAE,CAAC,CAAC;QACpE,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;KAC1B,CAAC,CAAC,CAAC;IACJ,MAAM,eAAe,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IACvE,MAAM,iBAAiB,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IACxE,MAAM,eAAe,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IAEvE,OAAO;QACN,OAAO;QACP,KAAK;QACL,OAAO;QACP,kBAAkB;QAClB,QAAQ;QACR,eAAe;QACf,iBAAiB;QACjB,eAAe;KACf,CAAC;AACH,CAAC","sourcesContent":["import type { FullBox } from '../FullBox.js';\nimport type { IsoView } from '../IsoView.js';\n\n/**\n * Entity\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport type Entity = {\n\t/** Entity ID */\n\tentityId: number;\n};\n\n/**\n * ISO/IEC 14496-12:202x - 8.18.4.1 Preselection group box\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport type PreselectionGroupBox = FullBox & {\n\t/** Group ID */\n\tgroupId: number;\n\n\t/** Number of entities in group */\n\tnumEntitiesInGroup: number;\n\n\t/** Entities */\n\tentities: Entity[];\n\n\tpreselectionTag?: string;\n\tselectionPriority?: number;\n\tinterleavingTag?: string;\n};\n\n/**\n * Parse a PreselectionGroupBox from an IsoView\n *\n * @param view - The IsoView to read data from\n *\n * @returns A parsed PreselectionGroupBox\n *\n * @group ISOBMFF\n *\n * @beta\n */\nexport function prsl(view: IsoView): PreselectionGroupBox {\n\tconst { version, flags } = view.readFullBox();\n\tconst groupId = view.readUint(4);\n\tconst numEntitiesInGroup = view.readUint(4);\n\tconst entities = view.readEntries<Entity>(numEntitiesInGroup, () => ({\n\t\tentityId: view.readUint(4),\n\t}));\n\tconst preselectionTag = flags & 0x1000 ? view.readUtf8(-1) : undefined;\n\tconst selectionPriority = flags & 0x2000 ? view.readUint(1) : undefined;\n\tconst interleavingTag = flags & 0x4000 ? view.readUtf8(-1) : undefined;\n\n\treturn {\n\t\tversion,\n\t\tflags,\n\t\tgroupId,\n\t\tnumEntitiesInGroup,\n\t\tentities,\n\t\tpreselectionTag,\n\t\tselectionPriority,\n\t\tinterleavingTag,\n\t};\n}\n"]}