{"version":3,"file":"decodeCmcd.js","sourceRoot":"","sources":["../../../src/cmcd/decodeCmcd.ts"],"names":[],"mappings":";;AAgBA,gCAeC;AA/BD,gEAA0D;AAE1D,wEAAkE;AAGlE;;;;;;;;;;GAUG;AACH,SAAgB,UAAU,CAAC,IAAY;IACtC,IAAI,CAAC,IAAI,EAAE,CAAC;QACX,OAAO,EAAE,CAAC;IACX,CAAC;IAED,MAAM,MAAM,GAAG,IAAA,8BAAY,EAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;IAE5E,OAAO,MAAM;SACX,OAAO,CAAS,MAAa,CAAC;SAC9B,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE;QAC5B,MAAM,EAAE,KAAK,EAAE,GAAQ,IAAI,CAAC;QAC5B,uCAAuC;QACvC,GAAG,CAAC,GAAU,CAAC,GAAG,CAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAA,4BAAW,EAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAQ,CAAC;QACvF,OAAO,GAAG,CAAC;IACZ,CAAC,EAAE,EAAU,CAAC,CAAC;AACjB,CAAC","sourcesContent":["import { symbolToStr } from '../cta/utils/symbolToStr.js';\nimport type { SfItem } from '../structuredfield/SfItem.js';\nimport { decodeSfDict } from '../structuredfield/decodeSfDict.js';\nimport type { Cmcd } from './Cmcd.js';\n\n/**\n * Decode a CMCD string to an object.\n *\n * @param cmcd - The CMCD string to decode.\n *\n * @returns The decoded CMCD object.\n *\n * @group CMCD\n *\n * @beta\n */\nexport function decodeCmcd(cmcd: string): Cmcd {\n\tif (!cmcd) {\n\t\treturn {};\n\t}\n\n\tconst sfDict = decodeSfDict(decodeURIComponent(cmcd.replace(/^CMCD=/, '')));\n\n\treturn Object\n\t\t.entries<SfItem>(sfDict as any)\n\t\t.reduce((acc, [key, item]) => {\n\t\t\tconst { value }: any = item;\n\t\t\t// TODO: Find a better way to type this\n\t\t\tacc[key as any] = (typeof value === 'symbol' ? symbolToStr(value) : item.value) as any;\n\t\t\treturn acc;\n\t\t}, {} as Cmcd);\n}\n"]}