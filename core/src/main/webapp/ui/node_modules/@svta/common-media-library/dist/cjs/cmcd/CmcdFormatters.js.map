{"version":3,"file":"CmcdFormatters.js","sourceRoot":"","sources":["../../../src/cmcd/CmcdFormatters.ts"],"names":[],"mappings":";;;AAAA,wEAAkE;AAKlE,MAAM,SAAS,GAAG,CAAC,KAAgB,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,KAAe,CAAC,CAAC;AACpE,MAAM,SAAS,GAAG,CAAC,KAAgB,EAAE,OAA2B,EAAE,EAAE;IACnE,IAAI,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,EAAE,CAAC;QACtB,KAAK,GAAG,IAAA,wCAAiB,EAAC,KAAe,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;IAC7D,CAAC;IACD,OAAO,kBAAkB,CAAC,KAAe,CAAC,CAAC;AAC5C,CAAC,CAAC;AACF,MAAM,SAAS,GAAG,CAAC,KAAgB,EAAE,EAAE,CAAC,SAAS,CAAC,KAAe,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;AAE/E;;;;;;GAMG;AACU,QAAA,cAAc,GAAkC;IAC5D;;OAEG;IACH,EAAE,EAAE,SAAS;IAEb;;OAEG;IACH,CAAC,EAAE,SAAS;IAEZ;;OAEG;IACH,EAAE,EAAE,SAAS;IAEb;;OAEG;IACH,EAAE,EAAE,SAAS;IAEb;;OAEG;IACH,GAAG,EAAE,SAAS;IAEd;;OAEG;IACH,GAAG,EAAE,SAAS;IAEd;;OAEG;IACH,GAAG,EAAE,SAAS;IAEd;;OAEG;IACH,EAAE,EAAE,SAAS;CACb,CAAC","sourcesContent":["import { urlToRelativePath } from '../utils/urlToRelativePath.js';\nimport type { CmcdEncodeOptions } from './CmcdEncodeOptions.js';\nimport type { CmcdFormatter } from './CmcdFormatter.js';\nimport type { CmcdValue } from './CmcdValue.js';\n\nconst toRounded = (value: CmcdValue) => Math.round(value as number);\nconst toUrlSafe = (value: CmcdValue, options?: CmcdEncodeOptions) => {\n\tif (options?.baseUrl) {\n\t\tvalue = urlToRelativePath(value as string, options.baseUrl);\n\t}\n\treturn encodeURIComponent(value as string);\n};\nconst toHundred = (value: CmcdValue) => toRounded(value as number / 100) * 100;\n\n/**\n * The default formatters for CMCD values.\n *\n * @group CMCD\n *\n * @beta\n */\nexport const CmcdFormatters: Record<string, CmcdFormatter> = {\n\t/**\n\t * Bitrate (kbps) rounded integer\n\t */\n\tbr: toRounded,\n\n\t/**\n\t * Duration (milliseconds) rounded integer\n\t */\n\td: toRounded,\n\n\t/**\n\t * Buffer Length (milliseconds) rounded nearest 100ms\n\t */\n\tbl: toHundred,\n\n\t/**\n\t * Deadline (milliseconds) rounded nearest 100ms\n\t */\n\tdl: toHundred,\n\n\t/**\n\t * Measured Throughput (kbps) rounded nearest 100kbps\n\t */\n\tmtp: toHundred,\n\n\t/**\n\t * Next Object Request URL encoded\n\t */\n\tnor: toUrlSafe,\n\n\t/**\n\t * Requested maximum throughput (kbps) rounded nearest 100kbps\n\t */\n\trtp: toHundred,\n\n\t/**\n\t * Top Bitrate (kbps) rounded integer\n\t */\n\ttb: toRounded,\n};\n"]}