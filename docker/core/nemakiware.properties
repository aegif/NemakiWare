###Database
db.couchdb.url=http://couchdb:5984
db.couchdb.max.connections=20
db.couchdb.connection.timeout=30000
db.couchdb.socket.timeout=60000
db.couchdb.auth.enabled=true
db.couchdb.auth.username=admin
db.couchdb.auth.password=password

###CMIS server default parameter
cmis.server.default.max.items.types=50
cmis.server.default.depth.types=-1
cmis.server.default.max.items.objects=200
cmis.server.default.depth.objects=10
# Default repository for service document requests (e.g., /atom without repository ID)
# If not specified, uses the first repository defined in repositories.yml
cmis.server.default.repository=bedroom

###Repository
repository.definition.default=repositories-default.yml
repository.definition=repositories.yml

###Search engine
solr.protocol=http
solr.host=solr
solr.port=8983
solr.context=solr
solr.indexing.force=true
solr.indexing.enabled=true
solr.nemaki.userid=solr

###Permission
permission.definition=permission.yml
permission.mapping.definition=permission-mapping.yml

###Spring configuration
context.log=logContext.xml
context.businesslogic=businesslogicContext.xml
context.dao=daoContext.xml
context.dao.implementation=couchContext.xml

###NemakiWare extended capability
capability.extended.orderBy.default=cmis:creationDate DESC
capability.extended.preview=false
capability.extended.include.relationships=true
capability.extended.unique.name.check=true
capability.extended.auth.token=true
capability.extended.permission.toplevel=false
capability.extended.permission.inheritance.toplevel=true
capability.extended.user.item.folder=e02f784f8360a02cc14d1314c10038ff

###Rest API
rest.user.enabled=true
rest.group.enabled=true
rest.type.enabled=true
rest.archive.enabled=true
rest.authtoken.enabled=true

###Archive Configuration
# When enabled, deleted content is archived and can be restored from the archive management UI
# Set to false only if archive is not needed and you want to improve deletion performance
archive.create.enabled=true

###Rendition
jodconverter.officehome=/usr/lib/libreoffice
jodconverter.registry.dataformats=rendition-format.yml

###Logging
log.aspect.class=jp.aegif.nemaki.util.spring.aspect.log.JsonLogger
log.aspect.expression=execution(* jp.aegif.nemaki.cmis.service..*Impl.*(..)) and !execution(* jp.aegif.nemaki.cmis.service.impl.RepositoryServiceImpl.*(..))
log.config.json.file=log-json-config.json

###Cache
cache.config=ehcache.yml
cache.clustering.enabled=false
#cache.clustering.terracotta.url=terracotta://localhost:9410/nemakiware
#cache.clustering.offheap.mb=100

###Auth token
auth.token.expiration=86400000

###Thread
thread.max=200

###CMIS Capabilities
capability.typeManagement=true

###Multipart Upload Configuration  
multipart.maxFileSize=104857600
multipart.maxRequestSize=209715200
multipart.fileSizeThreshold=1048576

###proxyHeadear
external.authenticaion.proxyHeader=X-NemakiWare-Remote-User
external.authenticaion.isAutoCreateUser=false

###CMIS Base Type Configuration Override
# Enable versioning for full CMIS 1.1 compliance
# Documents will support check-in, check-out, and version history
basetype.document.versionable=true

###RAG (Retrieval-Augmented Generation) Configuration
# Enable/disable RAG semantic search feature
rag.enabled=true

# TEI (Text Embeddings Inference) Service Settings
rag.tei.url=http://tei:80
rag.tei.timeout.connect=5000
rag.tei.timeout.read=120000
rag.tei.batch.size=32
rag.tei.retry.max=3
rag.tei.retry.delay=1000

# Chunking Settings (tokens)
rag.chunking.max.tokens=200
rag.chunking.overlap.tokens=50
rag.chunking.min.tokens=50

# Vector Search Settings
rag.search.topK=10
rag.search.similarity.threshold=0.7

# Indexing Settings
rag.indexing.batch.size=100
rag.indexing.async=true

# Supported MIME types for RAG indexing
rag.supported.mimetypes=text/plain,text/html,text/xml,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation

###LDAP Directory Sync Configuration
directory.sync.enabled=true
directory.sync.ldap.url=ldap://openldap:389
directory.sync.ldap.base.dn=dc=nemakiware,dc=example,dc=com
directory.sync.ldap.bind.dn=cn=admin,dc=nemakiware,dc=example,dc=com
directory.sync.ldap.bind.password=adminpassword
directory.sync.ldap.use.tls=false
directory.sync.ldap.use.starttls=false
directory.sync.group.search.base=ou=groups
directory.sync.group.search.filter=(objectClass=groupOfNames)
directory.sync.user.search.base=ou=users
directory.sync.user.search.filter=(objectClass=inetOrgPerson)
directory.sync.group.id.attribute=cn
directory.sync.group.name.attribute=cn
directory.sync.group.member.attribute=member
directory.sync.user.id.attribute=uid
directory.sync.group.prefix=ldap_
directory.sync.user.prefix=
directory.sync.create.missing.users=true
directory.sync.update.existing.users=true
directory.sync.delete.orphan.groups=false
directory.sync.delete.orphan.users=false

###Audit Logging
audit.enabled=true
audit.read.level=METADATA

###SSO (Single Sign-On) Configuration
sso.oidc.enabled=true
sso.saml.enabled=false

###Cloud Directory Sync Configuration
cloud.directory.sync.enabled=false
cloud.directory.sync.providers=
cloud.directory.sync.cron=
cloud.directory.sync.window.size=100
# Google Workspace
cloud.directory.sync.google.serviceAccountKey=
cloud.directory.sync.google.domain=
cloud.directory.sync.google.adminEmail=
# Microsoft Entra ID
cloud.directory.sync.microsoft.tenantId=
cloud.directory.sync.microsoft.clientId=
cloud.directory.sync.microsoft.clientSecret=
