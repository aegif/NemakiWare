const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-BilFBcem.js","assets/custom-media-element-BTc9lN-c.js","assets/hls-sd32p2k_.js","assets/react-BUvOqnEb.js","assets/index-Co1KJQsM.js"])))=>i.map(i=>d[i]);
          `]:{zIndex:10,width:ht,margin:`0 ${unit$1(dt.marginXXS)}`,fontSize:ht,cursor:"pointer",transition:`all ${dt.motionDurationSlow}`,color:mt,"&:hover":{color:mt},svg:{verticalAlign:"baseline"}}},[`${yt}-thumbnail, ${yt}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${yt}-name`]:{display:"none",textAlign:"center"},[`${yt}-file + ${yt}-name`]:{position:"absolute",bottom:dt.margin,display:"block",width:`calc(100% - ${unit$1(gt(dt.paddingXS).mul(2).equal())})`},[`${yt}-uploading`]:{[`&${yt}`]:{backgroundColor:dt.colorFillAlter},[`&::before, ${pt}-eye, ${pt}-download, ${pt}-delete`]:{display:"none"}},[`${yt}-progress`]:{bottom:dt.marginXL,width:`calc(100% - ${unit$1(gt(dt.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${ft}-wrapper${ft}-picture-circle-wrapper`]:{[`${ft}${ft}-select`]:{borderRadius:"50%"}}}},genRtlStyle=dt=>{const{componentCls:ft}=dt;return{[`${ft}-rtl`]:{direction:"rtl"}}},genBaseStyle=dt=>{const{componentCls:ft,colorTextDisabled:pt}=dt;return{[`${ft}-wrapper`]:Object.assign(Object.assign({},resetComponent(dt)),{[ft]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${ft}-select`]:{display:"inline-block"},[`${ft}-hidden`]:{display:"none"},[`${ft}-disabled`]:{color:pt,cursor:"not-allowed"}})}},prepareComponentToken=dt=>({actionsColor:dt.colorIcon}),useStyle=genStyleHooks("Upload",dt=>{const{fontSizeHeading3:ft,fontHeight:pt,lineWidth:ht,controlHeightLG:mt,calc:gt}=dt,vt=merge$1(dt,{uploadThumbnailSize:gt(ft).mul(2).equal(),uploadProgressOffset:gt(gt(pt).div(2)).add(ht).equal(),uploadPicCardSize:gt(mt).mul(2.55).equal()});return[genBaseStyle(vt),genDraggerStyle(vt),genPictureStyle(vt),genPictureCardStyle(vt),genListStyle(vt),genMotionStyle(vt),genRtlStyle(vt),genCollapseMotion(vt)]},prepareComponentToken);function file2Obj(dt){return Object.assign(Object.assign({},dt),{lastModified:dt.lastModified,lastModifiedDate:dt.lastModifiedDate,name:dt.name,size:dt.size,type:dt.type,uid:dt.uid,percent:0,originFileObj:dt})}function updateFileList(dt,ft){const pt=_toConsumableArray(ft),ht=pt.findIndex(({uid:mt})=>mt===dt.uid);return ht===-1?pt.push(dt):pt[ht]=dt,pt}function getFileItem(dt,ft){const pt=dt.uid!==void 0?"uid":"name";return ft.filter(ht=>ht[pt]===dt[pt])[0]}function removeFileItem(dt,ft){const pt=dt.uid!==void 0?"uid":"name",ht=ft.filter(mt=>mt[pt]!==dt[pt]);return ht.length===ft.length?null:ht}const extname=(dt="")=>{const ft=dt.split("/"),ht=ft[ft.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(ht)||[""])[0]},isImageFileType=dt=>dt.indexOf("image/")===0,isImageUrl=dt=>{if(dt.type&&!dt.thumbUrl)return isImageFileType(dt.type);const ft=dt.thumbUrl||dt.url||"",pt=extname(ft);return/^data:image\//.test(ft)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(pt)?!0:!(/^data:/.test(ft)||pt)},MEASURE_SIZE=200;function previewImage(dt){return new Promise(ft=>{if(!dt.type||!isImageFileType(dt.type)){ft("");return}const pt=document.createElement("canvas");pt.width=MEASURE_SIZE,pt.height=MEASURE_SIZE,pt.style.cssText=`position: fixed; left: 0; top: 0; width: ${MEASURE_SIZE}px; height: ${MEASURE_SIZE}px; z-index: 9999; display: none;`,document.body.appendChild(pt);const ht=pt.getContext("2d"),mt=new Image;if(mt.onload=()=>{const{width:gt,height:vt}=mt;let yt=MEASURE_SIZE,bt=MEASURE_SIZE,xt=0,St=0;gt>vt?(bt=vt*(MEASURE_SIZE/gt),St=-(bt-yt)/2):(yt=gt*(MEASURE_SIZE/vt),xt=-(yt-bt)/2),ht.drawImage(mt,xt,St,yt,bt);const Et=pt.toDataURL();document.body.removeChild(pt),window.URL.revokeObjectURL(mt.src),ft(Et)},mt.crossOrigin="anonymous",dt.type.startsWith("image/svg+xml")){const gt=new FileReader;gt.onload=()=>{gt.result&&typeof gt.result=="string"&&(mt.src=gt.result)},gt.readAsDataURL(dt)}else if(dt.type.startsWith("image/gif")){const gt=new FileReader;gt.onload=()=>{gt.result&&ft(gt.result)},gt.readAsDataURL(dt)}else mt.src=window.URL.createObjectURL(dt)})}const ListItem=reactExports.forwardRef(({prefixCls:dt,className:ft,style:pt,locale:ht,listType:mt,file:gt,items:vt,progress:yt,iconRender:bt,actionIconRender:xt,itemRender:St,isImgUrl:Et,showPreviewIcon:Ct,showRemoveIcon:wt,showDownloadIcon:Rt,previewIcon:Tt,removeIcon:Pt,downloadIcon:$t,extra:_t,onPreview:It,onDownload:At,onClose:Ot},kt)=>{var Mt,jt;const{status:Nt}=gt,[Lt,Dt]=reactExports.useState(Nt);reactExports.useEffect(()=>{Nt!=="removed"&&Dt(Nt)},[Nt]);const[Bt,Ht]=reactExports.useState(!1);reactExports.useEffect(()=>{const ir=setTimeout(()=>{Ht(!0)},300);return()=>{clearTimeout(ir)}},[]);const Wt=bt(gt);let zt=reactExports.createElement("div",{className:`${dt}-icon`},Wt);if(mt==="picture"||mt==="picture-card"||mt==="picture-circle")if(Lt==="uploading"||!gt.thumbUrl&&!gt.url){const ir=classNames(`${dt}-list-item-thumbnail`,{[`${dt}-list-item-file`]:Lt!=="uploading"});zt=reactExports.createElement("div",{className:ir},Wt)}else{const ir=Et!=null&&Et(gt)?reactExports.createElement("img",{src:gt.thumbUrl||gt.url,alt:gt.name,className:`${dt}-list-item-image`,crossOrigin:gt.crossOrigin}):Wt,ur=classNames(`${dt}-list-item-thumbnail`,{[`${dt}-list-item-file`]:Et&&!Et(gt)});zt=reactExports.createElement("a",{className:ur,onClick:fr=>It(gt,fr),href:gt.url||gt.thumbUrl,target:"_blank",rel:"noopener noreferrer"},ir)}const Ut=classNames(`${dt}-list-item`,`${dt}-list-item-${Lt}`),qt=typeof gt.linkProps=="string"?JSON.parse(gt.linkProps):gt.linkProps,Gt=(typeof wt=="function"?wt(gt):wt)?xt((typeof Pt=="function"?Pt(gt):Pt)||reactExports.createElement(RefIcon$q,null),()=>Ot(gt),dt,ht.removeFile,!0):null,Kt=(typeof Rt=="function"?Rt(gt):Rt)&&Lt==="done"?xt((typeof $t=="function"?$t(gt):$t)||reactExports.createElement(RefIcon$p,null),()=>At(gt),dt,ht.downloadFile):null,Jt=mt!=="picture-card"&&mt!=="picture-circle"&&reactExports.createElement("span",{key:"download-delete",className:classNames(`${dt}-list-item-actions`,{picture:mt==="picture"})},Kt,Gt),Qt=typeof _t=="function"?_t(gt):_t,Xt=Qt&&reactExports.createElement("span",{className:`${dt}-list-item-extra`},Qt),Ft=classNames(`${dt}-list-item-name`),Vt=gt.url?reactExports.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:Ft,title:gt.name},qt,{href:gt.url,onClick:ir=>It(gt,ir)}),gt.name,Xt):reactExports.createElement("span",{key:"view",className:Ft,onClick:ir=>It(gt,ir),title:gt.name},gt.name,Xt),Yt=(typeof Ct=="function"?Ct(gt):Ct)&&(gt.url||gt.thumbUrl)?reactExports.createElement("a",{href:gt.url||gt.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:ir=>It(gt,ir),title:ht.previewFile},typeof Tt=="function"?Tt(gt):Tt||reactExports.createElement(RefIcon$z,null)):null,er=(mt==="picture-card"||mt==="picture-circle")&&Lt!=="uploading"&&reactExports.createElement("span",{className:`${dt}-list-item-actions`},Yt,Lt==="done"&&Kt,Gt),{getPrefixCls:tr}=reactExports.useContext(ConfigContext),Zt=tr(),ar=reactExports.createElement("div",{className:Ut},zt,Vt,Jt,er,Bt&&reactExports.createElement(CSSMotion,{motionName:`${Zt}-fade`,visible:Lt==="uploading",motionDeadline:2e3},({className:ir})=>{const ur="percent"in gt?reactExports.createElement(Progress,Object.assign({type:"line",percent:gt.percent,"aria-label":gt["aria-label"],"aria-labelledby":gt["aria-labelledby"]},yt)):null;return reactExports.createElement("div",{className:classNames(`${dt}-list-item-progress`,ir)},ur)})),cr=gt.response&&typeof gt.response=="string"?gt.response:((Mt=gt.error)===null||Mt===void 0?void 0:Mt.statusText)||((jt=gt.error)===null||jt===void 0?void 0:jt.message)||ht.uploadError,sr=Lt==="error"?reactExports.createElement(Tooltip,{title:cr,getPopupContainer:ir=>ir.parentNode},ar):ar;return reactExports.createElement("div",{className:classNames(`${dt}-list-item-container`,ft),style:pt,ref:kt},St?St(sr,gt,vt,{download:At.bind(null,gt),preview:It.bind(null,gt),remove:Ot.bind(null,gt)}):sr)}),InternalUploadList=(dt,ft)=>{const{listType:pt="text",previewFile:ht=previewImage,onPreview:mt,onDownload:gt,onRemove:vt,locale:yt,iconRender:bt,isImageUrl:xt=isImageUrl,prefixCls:St,items:Et=[],showPreviewIcon:Ct=!0,showRemoveIcon:wt=!0,showDownloadIcon:Rt=!1,removeIcon:Tt,previewIcon:Pt,downloadIcon:$t,extra:_t,progress:It={size:[-1,2],showInfo:!1},appendAction:At,appendActionVisible:Ot=!0,itemRender:kt,disabled:Mt}=dt,jt=useForceUpdate(),[Nt,Lt]=reactExports.useState(!1),Dt=["picture-card","picture-circle"].includes(pt);reactExports.useEffect(()=>{pt.startsWith("picture")&&(Et||[]).forEach(Ft=>{!(Ft.originFileObj instanceof File||Ft.originFileObj instanceof Blob)||Ft.thumbUrl!==void 0||(Ft.thumbUrl="",ht==null||ht(Ft.originFileObj).then(Vt=>{Ft.thumbUrl=Vt||"",jt()}))})},[pt,Et,ht]),reactExports.useEffect(()=>{Lt(!0)},[]);const Bt=(Ft,Vt)=>{if(mt)return Vt==null||Vt.preventDefault(),mt(Ft)},Ht=Ft=>{typeof gt=="function"?gt(Ft):Ft.url&&window.open(Ft.url)},Wt=Ft=>{vt==null||vt(Ft)},zt=Ft=>{if(bt)return bt(Ft,pt);const Vt=Ft.status==="uploading";if(pt.startsWith("picture")){const Yt=pt==="picture"?reactExports.createElement(RefIcon$O,null):yt.uploading,er=xt!=null&&xt(Ft)?reactExports.createElement(RefIcon$7,null):reactExports.createElement(RefIcon$m,null);return Vt?Yt:er}return Vt?reactExports.createElement(RefIcon$O,null):reactExports.createElement(RefIcon$8,null)},Ut=(Ft,Vt,Yt,er,tr)=>{const Zt={type:"text",size:"small",title:er,onClick:ar=>{var cr,sr;Vt(),reactExports.isValidElement(Ft)&&((sr=(cr=Ft.props).onClick)===null||sr===void 0||sr.call(cr,ar))},className:`${Yt}-list-item-action`,disabled:tr?Mt:!1};return reactExports.isValidElement(Ft)?reactExports.createElement(Button$1,Object.assign({},Zt,{icon:cloneElement(Ft,Object.assign(Object.assign({},Ft.props),{onClick:()=>{}}))})):reactExports.createElement(Button$1,Object.assign({},Zt),reactExports.createElement("span",null,Ft))};reactExports.useImperativeHandle(ft,()=>({handlePreview:Bt,handleDownload:Ht}));const{getPrefixCls:qt}=reactExports.useContext(ConfigContext),Gt=qt("upload",St),Kt=qt(),Jt=classNames(`${Gt}-list`,`${Gt}-list-${pt}`),Qt=reactExports.useMemo(()=>omit(initCollapseMotion(Kt),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[Kt]),Xt=Object.assign(Object.assign({},Dt?{}:Qt),{motionDeadline:2e3,motionName:`${Gt}-${Dt?"animate-inline":"animate"}`,keys:_toConsumableArray(Et.map(Ft=>({key:Ft.uid,file:Ft}))),motionAppear:Nt});return reactExports.createElement("div",{className:Jt},reactExports.createElement(CSSMotionList,Object.assign({},Xt,{component:!1}),({key:Ft,file:Vt,className:Yt,style:er})=>reactExports.createElement(ListItem,{key:Ft,locale:yt,prefixCls:Gt,className:Yt,style:er,file:Vt,items:Et,progress:It,listType:pt,isImgUrl:xt,showPreviewIcon:Ct,showRemoveIcon:wt,showDownloadIcon:Rt,removeIcon:Tt,previewIcon:Pt,downloadIcon:$t,extra:_t,iconRender:zt,actionIconRender:Ut,itemRender:kt,onPreview:Bt,onDownload:Ht,onClose:Wt})),At&&reactExports.createElement(CSSMotion,Object.assign({},Xt,{visible:Ot,forceRender:!0}),({className:Ft,style:Vt})=>cloneElement(At,Yt=>({className:classNames(Yt.className,Ft),style:Object.assign(Object.assign(Object.assign({},Vt),{pointerEvents:Ft?"none":void 0}),Yt.style)}))))},UploadList=reactExports.forwardRef(InternalUploadList);var __awaiter=function(dt,ft,pt,ht){function mt(gt){return gt instanceof pt?gt:new pt(function(vt){vt(gt)})}return new(pt||(pt=Promise))(function(gt,vt){function yt(St){try{xt(ht.next(St))}catch(Et){vt(Et)}}function bt(St){try{xt(ht.throw(St))}catch(Et){vt(Et)}}function xt(St){St.done?gt(St.value):mt(St.value).then(yt,bt)}xt((ht=ht.apply(dt,[])).next())})};const LIST_IGNORE=`__LIST_IGNORE_${Date.now()}__`,InternalUpload=(dt,ft)=>{const{fileList:pt,defaultFileList:ht,onRemove:mt,showUploadList:gt=!0,listType:vt="text",onPreview:yt,onDownload:bt,onChange:xt,onDrop:St,previewFile:Et,disabled:Ct,locale:wt,iconRender:Rt,isImageUrl:Tt,progress:Pt,prefixCls:$t,className:_t,type:It="select",children:At,style:Ot,itemRender:kt,maxCount:Mt,data:jt={},multiple:Nt=!1,hasControlInside:Lt=!0,action:Dt="",accept:Bt="",supportServerRender:Ht=!0,rootClassName:Wt}=dt,zt=reactExports.useContext(DisabledContext),Ut=Ct??zt,[qt,Gt]=useMergedState(ht||[],{value:pt,postState:Ar=>Ar??[]}),[Kt,Jt]=reactExports.useState("drop"),Qt=reactExports.useRef(null),Xt=reactExports.useRef(null);reactExports.useMemo(()=>{const Ar=Date.now();(pt||[]).forEach((Cr,Sr)=>{!Cr.uid&&!Object.isFrozen(Cr)&&(Cr.uid=`__AUTO__${Ar}_${Sr}__`)})},[pt]);const Ft=(Ar,Cr,Sr)=>{let vr=_toConsumableArray(Cr),Br=!1;Mt===1?vr=vr.slice(-1):Mt&&(Br=vr.length>Mt,vr=vr.slice(0,Mt)),reactDomExports.flushSync(()=>{Gt(vr)});const on={file:Ar,fileList:vr};Sr&&(on.event=Sr),(!Br||Ar.status==="removed"||vr.some(pn=>pn.uid===Ar.uid))&&reactDomExports.flushSync(()=>{xt==null||xt(on)})},Vt=(Ar,Cr)=>__awaiter(void 0,void 0,void 0,function*(){const{beforeUpload:Sr,transformFile:vr}=dt;let Br=Ar;if(Sr){const on=yield Sr(Ar,Cr);if(on===!1)return!1;if(delete Ar[LIST_IGNORE],on===LIST_IGNORE)return Object.defineProperty(Ar,LIST_IGNORE,{value:!0,configurable:!0}),!1;typeof on=="object"&&on&&(Br=on)}return vr&&(Br=yield vr(Br)),Br}),Yt=Ar=>{const Cr=Ar.filter(Br=>!Br.file[LIST_IGNORE]);if(!Cr.length)return;const Sr=Cr.map(Br=>file2Obj(Br.file));let vr=_toConsumableArray(qt);Sr.forEach(Br=>{vr=updateFileList(Br,vr)}),Sr.forEach((Br,on)=>{let pn=Br;if(Cr[on].parsedFile)Br.status="uploading";else{const{originFileObj:$r}=Br;let Mr;try{Mr=new File([$r],$r.name,{type:$r.type})}catch{Mr=new Blob([$r],{type:$r.type}),Mr.name=$r.name,Mr.lastModifiedDate=new Date,Mr.lastModified=new Date().getTime()}Mr.uid=Br.uid,pn=Mr}Ft(pn,vr)})},er=(Ar,Cr,Sr)=>{try{typeof Ar=="string"&&(Ar=JSON.parse(Ar))}catch{}if(!getFileItem(Cr,qt))return;const vr=file2Obj(Cr);vr.status="done",vr.percent=100,vr.response=Ar,vr.xhr=Sr;const Br=updateFileList(vr,qt);Ft(vr,Br)},tr=(Ar,Cr)=>{if(!getFileItem(Cr,qt))return;const Sr=file2Obj(Cr);Sr.status="uploading",Sr.percent=Ar.percent;const vr=updateFileList(Sr,qt);Ft(Sr,vr,Ar)},Zt=(Ar,Cr,Sr)=>{if(!getFileItem(Sr,qt))return;const vr=file2Obj(Sr);vr.error=Ar,vr.response=Cr,vr.status="error";const Br=updateFileList(vr,qt);Ft(vr,Br)},ar=Ar=>{let Cr;Promise.resolve(typeof mt=="function"?mt(Ar):mt).then(Sr=>{var vr;if(Sr===!1)return;const Br=removeFileItem(Ar,qt);Br&&(Cr=Object.assign(Object.assign({},Ar),{status:"removed"}),qt==null||qt.forEach(on=>{const pn=Cr.uid!==void 0?"uid":"name";on[pn]===Cr[pn]&&!Object.isFrozen(on)&&(on.status="removed")}),(vr=Qt.current)===null||vr===void 0||vr.abort(Cr),Ft(Cr,Br))})},cr=Ar=>{Jt(Ar.type),Ar.type==="drop"&&(St==null||St(Ar))};reactExports.useImperativeHandle(ft,()=>({onBatchStart:Yt,onSuccess:er,onProgress:tr,onError:Zt,fileList:qt,upload:Qt.current,nativeElement:Xt.current}));const{getPrefixCls:sr,direction:ir,upload:ur}=reactExports.useContext(ConfigContext),fr=sr("upload",$t),yr=Object.assign(Object.assign({onBatchStart:Yt,onError:Zt,onProgress:tr,onSuccess:er},dt),{data:jt,multiple:Nt,action:Dt,accept:Bt,supportServerRender:Ht,prefixCls:fr,disabled:Ut,beforeUpload:Vt,onChange:void 0,hasControlInside:Lt});delete yr.className,delete yr.style,(!At||Ut)&&delete yr.id;const lr=`${fr}-wrapper`,[gr,or,dr]=useStyle(fr,lr),[xr]=useLocale$1("Upload",localeValues.Upload),{showRemoveIcon:pr,showPreviewIcon:wr,showDownloadIcon:Rr,removeIcon:Pr,previewIcon:Er,downloadIcon:Nr,extra:Wr}=typeof gt=="boolean"?{}:gt,an=typeof pr>"u"?!Ut:pr,Kr=(Ar,Cr)=>gt?reactExports.createElement(UploadList,{prefixCls:fr,listType:vt,items:qt,previewFile:Et,onPreview:yt,onDownload:bt,onRemove:ar,showRemoveIcon:an,showPreviewIcon:wr,showDownloadIcon:Rr,removeIcon:Pr,previewIcon:Er,downloadIcon:Nr,iconRender:Rt,extra:Wr,locale:Object.assign(Object.assign({},xr),wt),isImageUrl:Tt,progress:Pt,appendAction:Ar,appendActionVisible:Cr,itemRender:kt,disabled:Ut}):Ar,sn=classNames(lr,_t,Wt,or,dr,ur==null?void 0:ur.className,{[`${fr}-rtl`]:ir==="rtl",[`${fr}-picture-card-wrapper`]:vt==="picture-card",[`${fr}-picture-circle-wrapper`]:vt==="picture-circle"}),Hr=Object.assign(Object.assign({},ur==null?void 0:ur.style),Ot);if(It==="drag"){const Ar=classNames(or,fr,`${fr}-drag`,{[`${fr}-drag-uploading`]:qt.some(Cr=>Cr.status==="uploading"),[`${fr}-drag-hover`]:Kt==="dragover",[`${fr}-disabled`]:Ut,[`${fr}-rtl`]:ir==="rtl"});return gr(reactExports.createElement("span",{className:sn,ref:Xt},reactExports.createElement("div",{className:Ar,style:Hr,onDrop:cr,onDragOver:cr,onDragLeave:cr},reactExports.createElement(Upload$2,Object.assign({},yr,{ref:Qt,className:`${fr}-btn`}),reactExports.createElement("div",{className:`${fr}-drag-container`},At))),Kr()))}const Or=classNames(fr,`${fr}-select`,{[`${fr}-disabled`]:Ut,[`${fr}-hidden`]:!At}),Yr=reactExports.createElement("div",{className:Or,style:Hr},reactExports.createElement(Upload$2,Object.assign({},yr,{ref:Qt})));return gr(vt==="picture-card"||vt==="picture-circle"?reactExports.createElement("span",{className:sn,ref:Xt},Kr(Yr,!!At)):reactExports.createElement("span",{className:sn,ref:Xt},Yr,Kr()))},Upload$1=reactExports.forwardRef(InternalUpload);var __rest=function(dt,ft){var pt={};for(var ht in dt)Object.prototype.hasOwnProperty.call(dt,ht)&&ft.indexOf(ht)<0&&(pt[ht]=dt[ht]);if(dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var mt=0,ht=Object.getOwnPropertySymbols(dt);mt<ht.length;mt++)ft.indexOf(ht[mt])<0&&Object.prototype.propertyIsEnumerable.call(dt,ht[mt])&&(pt[ht[mt]]=dt[ht[mt]]);return pt};const Dragger=reactExports.forwardRef((dt,ft)=>{var{style:pt,height:ht,hasControlInside:mt=!1}=dt,gt=__rest(dt,["style","height","hasControlInside"]);return reactExports.createElement(Upload$1,Object.assign({ref:ft,hasControlInside:mt},gt,{type:"drag",style:Object.assign(Object.assign({},pt),{height:ht})}))}),Upload=Upload$1;Upload.Dragger=Dragger;Upload.LIST_IGNORE=LIST_IGNORE;class AuthService{constructor(){this.currentAuth=null;const ft=localStorage.getItem("nemakiware_auth");if(ft)try{this.currentAuth=JSON.parse(ft),console.log("AuthService constructor loaded auth:",this.currentAuth)}catch(pt){console.error("AuthService constructor failed to parse auth data:",pt),localStorage.removeItem("nemakiware_auth")}else console.log("AuthService constructor: no auth data in localStorage");typeof window<"u"&&(window.authService=this,console.log("AuthService constructor: exposed to window"))}static getInstance(){return AuthService.instance||(AuthService.instance=new AuthService),AuthService.instance}async login(ft,pt,ht){const mt=new URLSearchParams;return mt.append("password",pt),new Promise((gt,vt)=>{const yt=new XMLHttpRequest;yt.open("POST",`/core/rest/repo/${ht}/authtoken/${ft}/login`,!0),yt.setRequestHeader("Accept","application/json"),yt.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const bt=btoa(`${ft}:${pt}`);yt.setRequestHeader("Authorization",`Basic ${bt}`),yt.onreadystatechange=()=>{if(yt.readyState===4)if(console.log("AUTH DEBUG: Status:",yt.status,"Response:",yt.responseText),yt.status===200)try{const xt=JSON.parse(yt.responseText);if(console.log("AUTH DEBUG: Parsed response:",xt),xt.status==="success"){const St=xt.value.token;this.currentAuth={token:St,repositoryId:ht,username:ft},localStorage.setItem("nemakiware_auth",JSON.stringify(this.currentAuth)),window.dispatchEvent(new CustomEvent("authStateChanged")),console.log("AUTH DEBUG: Login successful, token:",St),gt(this.currentAuth)}else console.log("AUTH DEBUG: Login failed - invalid status:",xt.status),vt(new Error("Authentication failed"))}catch(xt){console.log("AUTH DEBUG: JSON parse error:",xt),vt(new Error("Invalid response format"))}else console.log("AUTH DEBUG: HTTP error:",yt.status,yt.statusText),vt(new Error("Authentication failed"))},yt.onerror=()=>vt(new Error("Network error")),yt.send(mt.toString())})}logout(){if(this.currentAuth){const ft=new XMLHttpRequest;ft.open("GET",`/core/rest/repo/${this.currentAuth.repositoryId}/authtoken/${this.currentAuth.username}/unregister`,!0);const pt=this.getAuthHeaders();Object.entries(pt).forEach(([ht,mt])=>{ft.setRequestHeader(ht,mt)}),ft.send()}this.currentAuth=null,localStorage.removeItem("nemakiware_auth")}getAuthToken(){var ft;return((ft=this.currentAuth)==null?void 0:ft.token)||null}getCurrentAuth(){return this.currentAuth}getAuthHeaders(){const ft=this.getAuthToken();return ft?{AUTH_TOKEN:ft}:{}}isAuthenticated(){return!!this.currentAuth}}const AuthContext=reactExports.createContext(void 0);function AuthProvider({children:dt}){const[ft,pt]=reactExports.useState(!1),[ht,mt]=reactExports.useState(null);React.useEffect(()=>{const xt=()=>{const wt=AuthService.getInstance().getCurrentAuth();wt?(console.log("AuthContext: Found auth data:",wt),mt(wt),pt(!0)):(console.log("AuthContext: No auth data found"),mt(null),pt(!1))};xt();const St=Ct=>{Ct.key==="nemakiware_auth"&&(console.log("AuthContext: localStorage changed for nemakiware_auth"),xt())};window.addEventListener("storage",St);const Et=()=>{console.log("AuthContext: Received auth update event"),xt()};return window.addEventListener("authStateChanged",Et),()=>{window.removeEventListener("storage",St),window.removeEventListener("authStateChanged",Et)}},[]);const gt=reactExports.useCallback(async(xt,St,Et)=>{try{const wt=await AuthService.getInstance().login(xt,St,Et);mt(wt),pt(!0)}catch(Ct){throw console.error("Login failed:",Ct),Ct}},[]),vt=reactExports.useCallback(()=>{AuthService.getInstance().logout(),mt(null),pt(!1),window.location.href="/core/ui/dist/"},[]),yt=reactExports.useCallback(xt=>{var St,Et;console.warn("Authentication error detected:",xt),((xt==null?void 0:xt.status)===401||(St=xt==null?void 0:xt.message)!=null&&St.includes("401")||(Et=xt==null?void 0:xt.message)!=null&&Et.includes("Unauthorized"))&&(console.log("401 error detected - redirecting to login"),vt())},[vt]),bt={isAuthenticated:ft,authToken:ht,login:gt,logout:vt,handleAuthError:yt};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:bt,children:dt})}function useAuth(){const dt=reactExports.useContext(AuthContext);if(dt===void 0)throw new Error("useAuth must be used within an AuthProvider");return dt}const{Header,Sider,Content}=Layout$1,Layout=({children:dt,repositoryId:ft})=>{const[pt,ht]=reactExports.useState(!1),mt=useNavigate(),gt=useLocation(),{logout:vt,authToken:yt}=useAuth(),bt=[{key:"/documents",icon:jsxRuntimeExports.jsx(RefIcon$j,{}),label:"ドキュメント"},{key:"/search",icon:jsxRuntimeExports.jsx(RefIcon$K,{}),label:"検索"},{key:"admin",icon:jsxRuntimeExports.jsx(RefIcon$4,{}),label:"管理",children:[{key:"/users",icon:jsxRuntimeExports.jsx(RefIcon,{}),label:"ユーザー管理"},{key:"/groups",icon:jsxRuntimeExports.jsx(RefIcon$3,{}),label:"グループ管理"},{key:"/types",icon:jsxRuntimeExports.jsx(RefIcon$n,{}),label:"タイプ管理"},{key:"/archive",icon:jsxRuntimeExports.jsx(RefIcon$g,{}),label:"アーカイブ"}]}],xt=({key:Ct})=>{Ct!=="admin"&&mt(Ct)},St=()=>{console.log("Layout: handleLogout called - using AuthContext logout"),vt()},Et=[{key:"logout",icon:jsxRuntimeExports.jsx(RefIcon$c,{}),label:"ログアウト",onClick:St}];return jsxRuntimeExports.jsxs(Layout$1,{style:{minHeight:"100vh"},children:[jsxRuntimeExports.jsxs(Sider,{trigger:null,collapsible:!0,collapsed:pt,style:{background:"#fff",borderRight:"1px solid #f0f0f0"},children:[jsxRuntimeExports.jsxs("div",{style:{height:64,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid #f0f0f0",background:"#f0f8ff",padding:"8px"},children:[!pt&&jsxRuntimeExports.jsx("img",{src:"/core/ui/dist/logo2.png?v=20250802",alt:"NemakiWare",style:{height:"45px",width:"auto",objectFit:"contain"}}),pt&&jsxRuntimeExports.jsx("div",{style:{color:"#1890ff",fontSize:"20px",fontWeight:"bold",fontFamily:"serif"},children:"N"})]}),jsxRuntimeExports.jsx(Menu,{mode:"inline",selectedKeys:[gt.pathname],items:bt,onClick:xt,style:{borderRight:0}})]}),jsxRuntimeExports.jsxs(Layout$1,{children:[jsxRuntimeExports.jsxs(Header,{style:{padding:"0 16px",background:"#fff",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[jsxRuntimeExports.jsx(Button$1,{type:"text",icon:pt?jsxRuntimeExports.jsx(RefIcon$a,{}):jsxRuntimeExports.jsx(RefIcon$b,{}),onClick:()=>ht(!pt),style:{fontSize:"16px",width:64,height:64}}),jsxRuntimeExports.jsxs(Space,{children:[jsxRuntimeExports.jsxs("span",{style:{color:"#666"},children:["Repository: ",jsxRuntimeExports.jsx("strong",{children:ft})]}),jsxRuntimeExports.jsx(Dropdown,{menu:{items:Et},placement:"bottomRight",children:jsxRuntimeExports.jsxs(Space,{style:{cursor:"pointer"},children:[jsxRuntimeExports.jsx(Avatar,{icon:jsxRuntimeExports.jsx(RefIcon,{})}),jsxRuntimeExports.jsx("span",{children:yt==null?void 0:yt.username})]})})]})]}),jsxRuntimeExports.jsx(Content,{style:{margin:"16px",padding:"16px",background:"#fff",borderRadius:"6px",minHeight:"calc(100vh - 112px)"},children:dt})]})]})};class CMISService{constructor(ft){this.baseUrl="/core/browser",this.restBaseUrl="/core/rest/repo",this.authService=AuthService.getInstance(),this.onAuthError=ft}setAuthErrorHandler(ft){this.onAuthError=ft}getSafeStringProperty(ft,pt,ht=""){const mt=ft[pt];if(mt&&typeof mt=="object"&&mt.value!==void 0){const gt=mt.value;return typeof gt=="string"?gt:Array.isArray(gt)&&gt.length>0?String(gt[0]):Array.isArray(gt)&&gt.length===0?ht:String(gt)}return typeof mt=="string"?mt:Array.isArray(mt)&&mt.length>0?String(mt[0]):(Array.isArray(mt)&&mt.length===0,ht)}getSafeDateProperty(ft,pt){const ht=ft[pt];if(ht&&typeof ht=="object"&&ht.value!==void 0){const mt=ht.value;if(typeof mt=="number")return new Date(mt).toISOString();if(typeof mt=="string")return mt}return typeof ht=="number"?new Date(ht).toISOString():typeof ht=="string"?ht:""}getSafeIntegerProperty(ft,pt){const ht=ft[pt];if(ht&&typeof ht=="object"&&ht.value!==void 0){const mt=ht.value;if(typeof mt=="number")return mt;if(typeof mt=="string"){const gt=parseInt(mt);return isNaN(gt)?void 0:gt}}if(typeof ht=="number")return ht;if(typeof ht=="string"){const mt=parseInt(ht);return isNaN(mt)?void 0:mt}}getSafeBooleanProperty(ft,pt){const ht=ft[pt];if(ht&&typeof ht=="object"&&ht.value!==void 0){const mt=ht.value;if(typeof mt=="boolean")return mt;if(typeof mt=="string")return mt.toLowerCase()==="true";if(Array.isArray(mt)&&mt.length>0){const gt=mt[0];if(typeof gt=="boolean")return gt;if(typeof gt=="string")return gt.toLowerCase()==="true"}}if(typeof ht=="boolean")return ht;if(typeof ht=="string")return ht.toLowerCase()==="true"}extractAllowableActions(ft){if(!ft)return[];const pt=ft.allowableActions??ft;return Array.isArray(pt)?pt.map(ht=>String(ht)):typeof pt=="object"?Object.entries(pt).filter(([,ht])=>ht===!0||ht==="true").map(([ht])=>ht):[]}encodeObjectIdSegment(ft){return!ft||ft==="root"?"root":encodeURIComponent(ft)}appendPropertiesToFormData(ft,pt,ht={}){const mt={...ht,...pt};let gt=0;Object.entries(mt).forEach(([vt,yt])=>{yt!=null&&(ft.append(`propertyId[${gt}]`,vt),Array.isArray(yt)?yt.length===0?ft.append(`propertyValue[${gt}]`,""):yt.forEach(bt=>{ft.append(`propertyValue[${gt}]`,String(bt))}):ft.append(`propertyValue[${gt}]`,String(yt)),gt++)})}buildCmisObjectFromBrowserData(ft,pt){const ht=(ft==null?void 0:ft.object)??ft??{},mt=ht.succinctProperties||ht.properties||{},gt=this.getSafeStringProperty(mt,"cmis:objectId",pt||""),vt=this.getSafeStringProperty(mt,"cmis:name",""),yt=this.getSafeStringProperty(mt,"cmis:objectTypeId","cmis:document"),bt=this.getSafeStringProperty(mt,"cmis:baseTypeId",yt),xt=this.getSafeStringProperty(mt,"cmis:parentId",""),St=this.getSafeStringProperty(mt,"cmis:path",""),Et=this.getSafeStringProperty(mt,"cmis:contentStreamMimeType",""),Ct=this.getSafeStringProperty(mt,"cmis:versionLabel",""),wt=this.getSafeStringProperty(mt,"cmis:createdBy",""),Rt=this.getSafeStringProperty(mt,"cmis:lastModifiedBy",""),Tt=this.getSafeDateProperty(mt,"cmis:creationDate"),Pt=this.getSafeDateProperty(mt,"cmis:lastModificationDate"),$t=this.getSafeIntegerProperty(mt,"cmis:contentStreamLength"),_t=this.getSafeBooleanProperty(mt,"cmis:isLatestVersion"),It=this.getSafeBooleanProperty(mt,"cmis:isLatestMajorVersion"),At={id:gt||pt||"",name:vt||gt||pt||"Object",objectType:yt,baseType:bt||yt,properties:mt,allowableActions:this.extractAllowableActions(ht.allowableActions)};return xt&&(At.parentId=xt),St&&(At.path=St),$t!==void 0&&(At.contentStreamLength=$t),Et&&(At.contentStreamMimeType=Et),Ct&&(At.versionLabel=Ct),_t!==void 0&&(At.isLatestVersion=_t),It!==void 0&&(At.isLatestMajorVersion=It),wt&&(At.createdBy=wt),Tt&&(At.creationDate=Tt),Rt&&(At.lastModifiedBy=Rt),Pt&&(At.lastModificationDate=Pt),At}getAuthHeaders(){try{const ft=localStorage.getItem("nemakiware_auth");if(ft){const pt=JSON.parse(ft);if(pt.username&&pt.token)return console.log("CMISService getAuthHeaders: Using token-based authentication with Basic auth header and nemaki_auth_token"),{Authorization:`Basic ${btoa(`${pt.username}:dummy`)}`,nemaki_auth_token:pt.token}}}catch(ft){console.error("CMISService: Failed to get auth from localStorage:",ft)}return console.warn("CMISService: No authentication available"),{}}handleHttpError(ft,pt,ht){const mt={status:ft,statusText:pt,url:ht,message:`HTTP ${ft}: ${pt}`};return console.error("CMIS HTTP Error:",mt),ft===401&&(console.warn("Authentication error detected - token may be expired"),this.onAuthError&&this.onAuthError(mt)),mt}async getRepositories(){try{return new Promise(ft=>{const pt=new XMLHttpRequest;pt.open("GET","/core/rest/all/repositories",!0),pt.setRequestHeader("Accept","application/json"),pt.onreadystatechange=()=>{if(pt.readyState===4)if(pt.status===200)try{const ht=JSON.parse(pt.responseText);if(Array.isArray(ht)){const mt=ht.map(gt=>gt.id).filter(gt=>gt);ft(mt)}else ht.repositories?ft(ht.repositories):ft([])}catch(ht){console.error("Failed to parse repositories response:",ht),ft([])}else console.error("Failed to fetch repositories:",pt.status),pt.status===401&&this.handleHttpError(pt.status,pt.statusText,pt.responseURL),ft([])},pt.onerror=()=>{console.error("Network error fetching repositories"),ft([])},pt.send()})}catch(ft){return console.error("Failed to fetch repositories:",ft),[]}}async getRootFolder(ft){return console.log("CMIS DEBUG: getRootFolder called with repositoryId:",ft),new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`${this.baseUrl}/${ft}/root`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{if(mt.readyState===4)if(mt.status===200)try{console.log("CMIS DEBUG: getRootFolder response:",mt.responseText);const vt=JSON.parse(mt.responseText);console.log("CMIS DEBUG: getRootFolder parsed response:",vt);const yt=vt.succinctProperties||vt.properties||{},bt={id:this.getSafeStringProperty(yt,"cmis:objectId","e02f784f8360a02cc14d1314c10038ff"),name:this.getSafeStringProperty(yt,"cmis:name","Root Folder"),objectType:this.getSafeStringProperty(yt,"cmis:objectTypeId","cmis:folder"),baseType:"cmis:folder",properties:yt,allowableActions:["canGetChildren"],path:this.getSafeStringProperty(yt,"cmis:path","/")};console.log("CMIS DEBUG: Parsed root folder:",bt),pt(bt)}catch(vt){console.error("CMIS DEBUG: Error parsing getRootFolder response:",vt),pt({id:"e02f784f8360a02cc14d1314c10038ff",name:"Root Folder",objectType:"cmis:folder",baseType:"cmis:folder",properties:{},allowableActions:["canGetChildren"],path:"/"})}else console.error("CMIS DEBUG: getRootFolder failed with status:",mt.status),this.handleHttpError(mt.status,mt.statusText,mt.responseURL),pt({id:"e02f784f8360a02cc14d1314c10038ff",name:"Root Folder",objectType:"cmis:folder",baseType:"cmis:folder",properties:{},allowableActions:["canGetChildren"],path:"/"})},mt.onerror=()=>{console.error("CMIS DEBUG: Network error in getRootFolder"),pt({id:"e02f784f8360a02cc14d1314c10038ff",name:"Root Folder",objectType:"cmis:folder",baseType:"cmis:folder",properties:{},allowableActions:["canGetChildren"],path:"/"})},mt.send()})}async getChildren(ft,pt){return console.log("CMIS DEBUG: getChildren called with repositoryId:",ft,"folderId:",pt),new Promise((ht,mt)=>{const gt=new XMLHttpRequest,vt=`${this.baseUrl}/${ft}/${pt}?cmisselector=children`;gt.open("GET",vt,!0),gt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{console.log("CMIS DEBUG: getChildren response:",gt.responseText.substring(0,500));const bt=JSON.parse(gt.responseText),St=(Array.isArray(bt==null?void 0:bt.objects)?bt.objects:[]).map(Et=>this.buildCmisObjectFromBrowserData(Et));ht(St)}catch(bt){console.error("CMIS DEBUG: Error parsing Browser Binding response:",bt),mt(new Error("Failed to parse Browser Binding response"))}else{console.error("CMIS DEBUG: getChildren HTTP error:",gt.status,gt.statusText);const bt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(bt)}},gt.onerror=()=>{console.error("CMIS DEBUG: getChildren network error"),mt(new Error("Network error"))},gt.send()})}async getObject(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("GET",`${this.baseUrl}/${ft}/${pt}?cmisselector=object`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{console.log("CMIS DEBUG: getObject Browser Binding response:",gt.responseText.substring(0,1e3));const yt=JSON.parse(gt.responseText),bt=this.buildCmisObjectFromBrowserData(yt,pt);console.log("CMIS DEBUG: getObject parsed object:",bt),ht(bt)}catch(yt){console.error("CMIS DEBUG: getObject parse error:",yt),mt(new Error("Failed to parse Browser Binding response"))}else{console.error("CMIS DEBUG: getObject HTTP error:",gt.status,gt.statusText);const yt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(yt)}},gt.onerror=()=>{console.error("CMIS DEBUG: getObject network error"),mt(new Error("Network error"))},gt.send()})}async createDocument(ft,pt,ht,mt={}){return new Promise((gt,vt)=>{const yt=this.encodeObjectIdSegment(pt),bt=new XMLHttpRequest;bt.open("POST",`${this.baseUrl}/${ft}/${yt}`,!0),bt.setRequestHeader("Accept","application/json");const xt=this.getAuthHeaders();Object.entries(xt).forEach(([Rt,Tt])=>{bt.setRequestHeader(Rt,Tt)}),bt.onreadystatechange=()=>{if(bt.readyState===4)if(bt.status===200||bt.status===201)try{const Rt=JSON.parse(bt.responseText),Tt=this.buildCmisObjectFromBrowserData(Rt);gt(Tt)}catch{vt(new Error("Failed to parse Browser Binding response"))}else{const Rt=this.handleHttpError(bt.status,bt.statusText,bt.responseURL);vt(Rt)}},bt.onerror=()=>vt(new Error("Network error"));const St=ht&&"name"in ht?ht.name:"",Et=(mt==null?void 0:mt["cmis:name"])||(mt==null?void 0:mt.name)||St||"untitled",Ct={"cmis:objectTypeId":(mt==null?void 0:mt["cmis:objectTypeId"])||"cmis:document","cmis:name":Et},wt=new FormData;if(wt.append("cmisaction","createDocument"),wt.append("succinct","true"),wt.append("_charset_","UTF-8"),pt?wt.append("folderId",pt):wt.append("folderId","root"),this.appendPropertiesToFormData(wt,mt||{},Ct),ht){const Rt=Et;wt.append("content",ht,Rt),"type"in ht&&ht.type&&wt.append("contentType",ht.type)}bt.send(wt)})}async createFolder(ft,pt,ht,mt={}){return new Promise((gt,vt)=>{const yt=this.encodeObjectIdSegment(pt),bt=new XMLHttpRequest;bt.open("POST",`${this.baseUrl}/${ft}/${yt}`,!0),bt.setRequestHeader("Accept","application/json");const xt=this.getAuthHeaders();Object.entries(xt).forEach(([Ct,wt])=>{bt.setRequestHeader(Ct,wt)}),bt.onreadystatechange=()=>{if(bt.readyState===4)if(bt.status===200||bt.status===201)try{const Ct=JSON.parse(bt.responseText),wt=this.buildCmisObjectFromBrowserData(Ct);gt(wt)}catch{vt(new Error("Failed to parse Browser Binding response"))}else{const Ct=this.handleHttpError(bt.status,bt.statusText,bt.responseURL);vt(Ct)}},bt.onerror=()=>vt(new Error("Network error"));const St={"cmis:objectTypeId":(mt==null?void 0:mt["cmis:objectTypeId"])||"cmis:folder","cmis:name":(mt==null?void 0:mt["cmis:name"])||ht},Et=new FormData;Et.append("cmisaction","createFolder"),Et.append("succinct","true"),pt?Et.append("folderId",pt):Et.append("folderId","root"),this.appendPropertiesToFormData(Et,mt||{},St),bt.send(Et)})}async updateProperties(ft,pt,ht){return new Promise((mt,gt)=>{const vt=new XMLHttpRequest;vt.open("POST",`${this.baseUrl}/${ft}`,!0),vt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([St,Et])=>{vt.setRequestHeader(St,Et)}),vt.onreadystatechange=()=>{if(vt.readyState===4)if(vt.status===200)try{const St=JSON.parse(vt.responseText),Et=St.succinctProperties||St.properties||{},Ct={id:this.getSafeStringProperty(Et,"cmis:objectId",pt),name:this.getSafeStringProperty(Et,"cmis:name","Unknown"),objectType:this.getSafeStringProperty(Et,"cmis:objectTypeId","cmis:document"),baseType:this.getSafeStringProperty(Et,"cmis:baseTypeId","cmis:document"),properties:Et,allowableActions:St.allowableActions||[]};mt(Ct)}catch{gt(new Error("Invalid response format"))}else{const St=this.handleHttpError(vt.status,vt.statusText,vt.responseURL);gt(St)}};const bt=new FormData;bt.append("cmisaction","updateProperties"),bt.append("objectId",pt);let xt=0;Object.entries(ht).forEach(([St,Et])=>{bt.append(`propertyId[${xt}]`,St),bt.append(`propertyValue[${xt}]`,String(Et)),xt++}),vt.onerror=()=>gt(new Error("Network error")),vt.send(bt)})}async deleteObject(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200||gt.status===204)ht();else{const bt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(bt)}};const yt=new FormData;yt.append("cmisaction","deleteObject"),yt.append("objectId",pt),gt.onerror=()=>mt(new Error("Network error")),gt.send(yt)})}async search(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("GET",`${this.baseUrl}/${ft}/search?query=${encodeURIComponent(pt)}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const yt=JSON.parse(gt.responseText);ht({objects:yt.results||[],hasMoreItems:yt.hasMoreItems||!1,numItems:yt.numItems||0})}catch{mt(new Error("Invalid response format"))}else mt(new Error(`HTTP ${gt.status}`))},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async getVersionHistory(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("GET",`${this.baseUrl}/${ft}/${pt}?cmisselector=versions`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const yt=JSON.parse(gt.responseText),xt=(Array.isArray(yt==null?void 0:yt.objects)?yt.objects:[]).map(Ct=>this.buildCmisObjectFromBrowserData(Ct,pt)),St=xt.find(Ct=>Ct.isLatestVersion)||xt[0];if(!St){mt(new Error("No versions returned for object"));return}ht({versions:xt,latestVersion:St})}catch{mt(new Error("Failed to parse Browser Binding version history"))}else{const yt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(yt)}},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async checkOut(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}/node/${pt}/checkout`,!0),gt.setRequestHeader("Content-Type","application/json"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const yt=JSON.parse(gt.responseText);ht(yt.object)}catch{mt(new Error("Invalid response format"))}else mt(new Error(`HTTP ${gt.status}`))},gt.onerror=()=>mt(new Error("Network error")),gt.send(JSON.stringify({}))})}async checkIn(ft,pt,ht,mt){return new Promise((gt,vt)=>{const yt=new XMLHttpRequest;yt.open("POST",`${this.baseUrl}/${ft}/node/${pt}/checkin`,!0),yt.setRequestHeader("Accept","application/json");const bt=this.getAuthHeaders();Object.entries(bt).forEach(([St,Et])=>{yt.setRequestHeader(St,Et)});const xt=new FormData;ht&&xt.append("file",ht),mt&&Object.entries(mt).forEach(([St,Et])=>{xt.append(St,Et)}),yt.onreadystatechange=()=>{if(yt.readyState===4)if(yt.status===200)try{const St=JSON.parse(yt.responseText);gt(St.object)}catch{vt(new Error("Invalid response format"))}else vt(new Error(`HTTP ${yt.status}`))},yt.onerror=()=>vt(new Error("Network error")),yt.send(xt)})}async cancelCheckOut(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}/node/${pt}/cancelcheckout`,!0),gt.setRequestHeader("Content-Type","application/json"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{gt.readyState===4&&(gt.status===200||gt.status===204?ht():mt(new Error(`HTTP ${gt.status}`)))},gt.onerror=()=>mt(new Error("Network error")),gt.send(JSON.stringify({}))})}async getACL(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("GET",`${this.baseUrl}/${ft}/node/${pt}/acl`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const yt=JSON.parse(gt.responseText);ht(yt.acl)}catch{mt(new Error("Invalid response format"))}else mt(new Error(`HTTP ${gt.status}`))},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async setACL(ft,pt,ht){return new Promise((mt,gt)=>{const vt=new XMLHttpRequest;vt.open("POST",`${this.baseUrl}/${ft}/node/${pt}/acl`,!0),vt.setRequestHeader("Content-Type","application/json"),vt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([bt,xt])=>{vt.setRequestHeader(bt,xt)}),vt.onreadystatechange=()=>{vt.readyState===4&&(vt.status===200||vt.status===204?mt():gt(new Error(`HTTP ${vt.status}`)))},vt.onerror=()=>gt(new Error("Network error")),vt.send(JSON.stringify(ht))})}async getUsers(ft){return new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`/core/rest/repo/${ft}/user/list`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{if(mt.readyState===4)if(mt.status===200)try{const yt=JSON.parse(mt.responseText).users||[],bt=yt.map(xt=>({id:xt.userId||xt.id,name:xt.firstName&&xt.lastName?`${xt.firstName} ${xt.lastName}`:xt.userName||xt.userId||xt.id,email:xt.email,groups:xt.groups||[]}));console.log("CMIS DEBUG: getUsers raw data:",yt),console.log("CMIS DEBUG: getUsers transformed data:",bt),bt.forEach((xt,St)=>{console.log(`User ${St+1}:`,{id:xt.id,name:xt.name,email:xt.email,groups:xt.groups})}),pt(bt)}catch(vt){console.error("CMIS DEBUG: getUsers parse error:",vt),ht(new Error("Invalid response format"))}else if(mt.status===500){let vt="サーバーエラーが発生しました",yt="";try{const xt=JSON.parse(mt.responseText);xt.message&&(vt=xt.message),xt.error&&(yt=xt.error),xt.errorType&&(yt+=` (${xt.errorType})`)}catch{yt=mt.responseText||"Unknown server error"}const bt=new Error(vt);bt.details=yt,bt.status=mt.status,ht(bt)}else{const vt=this.handleHttpError(mt.status,mt.statusText,mt.responseURL);ht(vt)}},mt.onerror=()=>ht(new Error("Network error")),mt.send()})}async createUser(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.restBaseUrl}/${ft}/user/create/${pt.id}`,!0),gt.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const bt=JSON.parse(gt.responseText);ht(bt)}catch{mt(new Error("Invalid response format"))}else mt(new Error(`HTTP ${gt.status}`))},gt.onerror=()=>mt(new Error("Network error"));const yt=new URLSearchParams;yt.append("name",pt.name||""),yt.append("firstName",pt.firstName||""),yt.append("lastName",pt.lastName||""),yt.append("email",pt.email||""),yt.append("password",pt.password||""),gt.send(yt.toString())})}async updateUser(ft,pt,ht){return new Promise((mt,gt)=>{const vt=new XMLHttpRequest;vt.open("PUT",`${this.restBaseUrl}/${ft}/user/update/${pt}`,!0),vt.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),vt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([xt,St])=>{vt.setRequestHeader(xt,St)}),vt.onreadystatechange=()=>{if(vt.readyState===4)if(vt.status===200)try{const xt=JSON.parse(vt.responseText);mt(xt)}catch{gt(new Error("Invalid response format"))}else gt(new Error(`HTTP ${vt.status}`))},vt.onerror=()=>gt(new Error("Network error"));const bt=new URLSearchParams;bt.append("name",ht.name||""),bt.append("firstName",ht.firstName||""),bt.append("lastName",ht.lastName||""),bt.append("email",ht.email||""),vt.send(bt.toString())})}async deleteUser(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("DELETE",`${this.restBaseUrl}/${ft}/user/delete/${pt}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{gt.readyState===4&&(gt.status===200||gt.status===204?ht():mt(new Error(`HTTP ${gt.status}`)))},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async getGroups(ft){return new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`/core/rest/repo/${ft}/group/list`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{if(mt.readyState===4)if(mt.status===200)try{const yt=JSON.parse(mt.responseText).groups||[],bt=yt.map(xt=>({id:xt.groupId||xt.id,name:xt.groupName||xt.name||xt.groupId||"Unknown Group",members:xt.users||[]}));console.log("CMIS DEBUG: getGroups raw data:",yt),console.log("CMIS DEBUG: getGroups transformed data:",bt),pt(bt)}catch{ht(new Error("Invalid response format"))}else if(mt.status===500){let vt="サーバーエラーが発生しました",yt="";try{const xt=JSON.parse(mt.responseText);xt.message&&(vt=xt.message),xt.error&&(yt=xt.error),xt.errorType&&(yt+=` (${xt.errorType})`)}catch{yt=mt.responseText||"Unknown server error"}const bt=new Error(vt);bt.details=yt,bt.status=mt.status,ht(bt)}else{const vt=this.handleHttpError(mt.status,mt.statusText,mt.responseURL);ht(vt)}},mt.onerror=()=>ht(new Error("Network error")),mt.send()})}async createGroup(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.restBaseUrl}/${ft}/group/create/${pt.id}`,!0),gt.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const bt=JSON.parse(gt.responseText);ht(bt)}catch{mt(new Error("Invalid response format"))}else mt(new Error(`HTTP ${gt.status}`))},gt.onerror=()=>mt(new Error("Network error"));const yt=new URLSearchParams;yt.append("name",pt.name||""),yt.append("users",JSON.stringify(pt.users||[])),yt.append("groups",JSON.stringify(pt.groups||[])),gt.send(yt.toString())})}async updateGroup(ft,pt,ht){return new Promise((mt,gt)=>{const vt=new XMLHttpRequest;vt.open("PUT",`${this.restBaseUrl}/${ft}/group/update/${pt}`,!0),vt.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),vt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([xt,St])=>{vt.setRequestHeader(xt,St)}),vt.onreadystatechange=()=>{if(vt.readyState===4)if(vt.status===200)try{const xt=JSON.parse(vt.responseText);mt(xt)}catch{gt(new Error("Invalid response format"))}else gt(new Error(`HTTP ${vt.status}`))},vt.onerror=()=>gt(new Error("Network error"));const bt=new URLSearchParams;bt.append("name",ht.name||""),bt.append("users",JSON.stringify(ht.users||[])),bt.append("groups",JSON.stringify(ht.groups||[])),vt.send(bt.toString())})}async deleteGroup(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("DELETE",`${this.restBaseUrl}/${ft}/group/delete/${pt}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{gt.readyState===4&&(gt.status===200||gt.status===204?ht():mt(new Error(`HTTP ${gt.status}`)))},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async getTypes(ft){return new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`/core/browser/${ft}?cmisselector=typeChildren`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{if(mt.readyState===4)if(mt.status===200)try{console.log("CMIS DEBUG: getTypes response:",mt.responseText.substring(0,500));const vt=JSON.parse(mt.responseText);if(console.log("CMIS DEBUG: getTypes JSON response:",vt),!vt.types||!Array.isArray(vt.types)){console.error("CMIS DEBUG: Invalid response format - no types array"),ht(new Error("Invalid response format"));return}const yt=vt.types.map(bt=>{var Ct;const St=!bt.id.startsWith("cmis:")&&((Ct=bt.typeMutability)==null?void 0:Ct.delete)!==!1,Et={id:bt.id||"unknown",displayName:bt.displayName||bt.id||"Unknown Type",description:bt.description||(bt.displayName||bt.id)+" type definition",baseTypeId:bt.baseId||bt.id,creatable:bt.creatable!==!1,fileable:bt.fileable!==!1,queryable:bt.queryable!==!1,deletable:St,propertyDefinitions:{}};return console.log(`CMIS DEBUG: Added type: ${bt.id} (deletable: ${St})`),Et});console.log("CMIS DEBUG: getTypes parsed types count:",yt.length),console.log("CMIS DEBUG: getTypes parsed types:",yt),pt(yt)}catch(vt){console.error("CMIS DEBUG: getTypes parse error:",vt),ht(new Error("Failed to parse type definitions JSON"))}else{console.error("CMIS DEBUG: getTypes HTTP error:",mt.status,mt.statusText);const vt=this.handleHttpError(mt.status,mt.statusText,mt.responseURL);ht(vt)}},mt.onerror=()=>{console.error("CMIS DEBUG: getTypes network error"),ht(new Error("Network error"))},mt.send()})}parseBrowserTypeDefinition(ft,pt){var vt;const ht={},mt=(ft==null?void 0:ft.propertyDefinitions)||{};Object.entries(mt).forEach(([yt,bt])=>{var $t;const xt=bt,St=(xt==null?void 0:xt.id)||yt,Et=String((xt==null?void 0:xt.propertyType)||"string").toLowerCase(),Ct=String((xt==null?void 0:xt.cardinality)||"single").toLowerCase(),wt=String((xt==null?void 0:xt.updatability)||(xt==null?void 0:xt.updatable)||"readwrite").toLowerCase(),Rt=Array.isArray(xt==null?void 0:xt.defaultValue)?xt.defaultValue:Array.isArray(($t=xt==null?void 0:xt.defaultValue)==null?void 0:$t.values)?xt.defaultValue.values:void 0,Tt=Array.isArray(xt==null?void 0:xt.choices)?xt.choices.map(_t=>({displayName:(_t==null?void 0:_t.displayName)||(_t==null?void 0:_t.displayname)||"",value:Array.isArray(_t==null?void 0:_t.value)?_t.value:[]})):void 0,Pt=["string","integer","decimal","boolean","datetime"].includes(Et)?Et:"string";ht[St]={id:St,displayName:(xt==null?void 0:xt.displayName)||(xt==null?void 0:xt.displayname)||St,description:(xt==null?void 0:xt.description)||"",propertyType:Pt,cardinality:Ct==="multi"?"multi":"single",required:(xt==null?void 0:xt.required)===!0,queryable:(xt==null?void 0:xt.queryable)!==!1,updatable:wt!=="readonly",defaultValue:Rt,choices:Tt,maxLength:(xt==null?void 0:xt.maxLength)??(xt==null?void 0:xt.maxlen)??void 0,minValue:(xt==null?void 0:xt.minValue)??(xt==null?void 0:xt.min)??void 0,maxValue:(xt==null?void 0:xt.maxValue)??(xt==null?void 0:xt.max)??void 0}});const gt=(ft==null?void 0:ft.baseId)||(ft==null?void 0:ft.baseTypeId)||(ft==null?void 0:ft.baseType)||pt;return{id:(ft==null?void 0:ft.id)||pt,displayName:(ft==null?void 0:ft.displayName)||(ft==null?void 0:ft.displayname)||(ft==null?void 0:ft.id)||pt,description:(ft==null?void 0:ft.description)||"",baseTypeId:gt,parentTypeId:(ft==null?void 0:ft.parentId)||(ft==null?void 0:ft.parentTypeId)||void 0,propertyDefinitions:ht,creatable:(ft==null?void 0:ft.creatable)!==!1,fileable:(ft==null?void 0:ft.fileable)!==!1,queryable:(ft==null?void 0:ft.queryable)!==!1,deletable:((vt=ft==null?void 0:ft.typeMutability)==null?void 0:vt.delete)!==!1&&(ft==null?void 0:ft.deletable)!==!1}}async getType(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest,vt=`cmisselector=typeDefinition&typeId=${encodeURIComponent(pt)}&succinct=true`;gt.open("GET",`${this.baseUrl}/${ft}?${vt}`,!0),gt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const bt=JSON.parse(gt.responseText),xt=(bt==null?void 0:bt.type)||bt,St=this.parseBrowserTypeDefinition(xt,pt);ht(St)}catch{mt(new Error("Failed to parse type definition response"))}else{const bt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(bt)}},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async createType(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200||gt.status===201)try{const bt=JSON.parse(gt.responseText),xt=(bt==null?void 0:bt.type)||bt,St=this.parseBrowserTypeDefinition(xt,(pt==null?void 0:pt.id)||"");ht(St)}catch{mt(new Error("Invalid response format"))}else{const bt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(bt)}},gt.onerror=()=>mt(new Error("Network error"));const yt=new FormData;yt.append("cmisaction","createType"),yt.append("succinct","true"),yt.append("type",JSON.stringify(pt)),gt.send(yt)})}async updateType(ft,pt,ht){return new Promise((mt,gt)=>{const vt=new XMLHttpRequest;vt.open("POST",`${this.baseUrl}/${ft}/type/${pt}/update`,!0),vt.setRequestHeader("Content-Type","application/json"),vt.setRequestHeader("Accept","application/json");const yt=this.getAuthHeaders();Object.entries(yt).forEach(([bt,xt])=>{vt.setRequestHeader(bt,xt)}),vt.onreadystatechange=()=>{if(vt.readyState===4)if(vt.status===200)try{const bt=JSON.parse(vt.responseText);mt(bt.type)}catch{gt(new Error("Invalid response format"))}else gt(new Error(`HTTP ${vt.status}`))},vt.onerror=()=>gt(new Error("Network error")),vt.send(JSON.stringify(ht))})}async deleteType(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([bt,xt])=>{gt.setRequestHeader(bt,xt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200||gt.status===204)ht();else{const bt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(bt)}},gt.onerror=()=>mt(new Error("Network error"));const yt=new FormData;yt.append("cmisaction","deleteType"),yt.append("typeId",pt),gt.send(yt)})}async getRelationships(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("GET",`${this.baseUrl}/${ft}/${pt}?cmisselector=relationships`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const yt=JSON.parse(gt.responseText),xt=(Array.isArray(yt==null?void 0:yt.objects)?yt.objects:[]).map(St=>{const Et=this.buildCmisObjectFromBrowserData(St);return{id:Et.id,sourceId:this.getSafeStringProperty(Et.properties,"cmis:sourceId",""),targetId:this.getSafeStringProperty(Et.properties,"cmis:targetId",""),relationshipType:Et.objectType,properties:Et.properties}});ht(xt)}catch{mt(new Error("Failed to parse Browser Binding relationships"))}else{const yt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(yt)}},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async createRelationship(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}/relationship/create`,!0),gt.setRequestHeader("Content-Type","application/json"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)try{const yt=JSON.parse(gt.responseText);ht(yt.relationship)}catch{mt(new Error("Invalid response format"))}else mt(new Error(`HTTP ${gt.status}`))},gt.onerror=()=>mt(new Error("Network error")),gt.send(JSON.stringify(pt))})}async deleteRelationship(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("DELETE",`${this.baseUrl}/${ft}/relationship/${pt}`,!0),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{gt.readyState===4&&(gt.status===200||gt.status===204?ht():mt(new Error(`HTTP ${gt.status}`)))},gt.onerror=()=>mt(new Error("Network error")),gt.send()})}async initSearchEngine(ft){return new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`${this.baseUrl}/${ft}/search-engine/init`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{mt.readyState===4&&(mt.status===200||mt.status===204?pt():ht(new Error(`HTTP ${mt.status}`)))},mt.onerror=()=>ht(new Error("Network error")),mt.send()})}async reindexSearchEngine(ft){return new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`${this.baseUrl}/${ft}/search-engine/reindex`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{mt.readyState===4&&(mt.status===200||mt.status===204?pt():ht(new Error(`HTTP ${mt.status}`)))},mt.onerror=()=>ht(new Error("Network error")),mt.send()})}async getArchives(ft){return new Promise((pt,ht)=>{const mt=new XMLHttpRequest;mt.open("GET",`/core/rest/repo/${ft}/archive/index`,!0),mt.setRequestHeader("Accept","application/json");const gt=this.getAuthHeaders();Object.entries(gt).forEach(([vt,yt])=>{mt.setRequestHeader(vt,yt)}),mt.onreadystatechange=()=>{if(mt.readyState===4)if(mt.status===200)try{const vt=JSON.parse(mt.responseText);pt(vt.archives||[])}catch{ht(new Error("Invalid response format"))}else ht(new Error(`HTTP ${mt.status}`))},mt.onerror=()=>ht(new Error("Network error")),mt.send()})}async archiveObject(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}/archive/${pt}`,!0),gt.setRequestHeader("Content-Type","application/json"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{gt.readyState===4&&(gt.status===200||gt.status===204?ht():mt(new Error(`HTTP ${gt.status}`)))},gt.onerror=()=>mt(new Error("Network error")),gt.send(JSON.stringify({}))})}async restoreObject(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("POST",`${this.baseUrl}/${ft}/archive/${pt}/restore`,!0),gt.setRequestHeader("Content-Type","application/json"),gt.setRequestHeader("Accept","application/json");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{gt.readyState===4&&(gt.status===200||gt.status===204?ht():mt(new Error(`HTTP ${gt.status}`)))},gt.onerror=()=>mt(new Error("Network error")),gt.send(JSON.stringify({}))})}getDownloadUrl(ft,pt){const ht=this.authService.getAuthToken();return`${this.baseUrl}/${ft}/node/${pt}/content?token=${ht}`}async getContentStream(ft,pt){return new Promise((ht,mt)=>{const gt=new XMLHttpRequest;gt.open("GET",`${this.baseUrl}/${ft}/${pt}?cmisselector=content`,!0),gt.responseType="arraybuffer",gt.setRequestHeader("Accept","application/octet-stream");const vt=this.getAuthHeaders();Object.entries(vt).forEach(([yt,bt])=>{gt.setRequestHeader(yt,bt)}),gt.onreadystatechange=()=>{if(gt.readyState===4)if(gt.status===200)ht(gt.response);else{console.error("CMIS DEBUG: getContentStream HTTP error:",gt.status,gt.statusText);const yt=this.handleHttpError(gt.status,gt.statusText,gt.responseURL);mt(yt)}},gt.onerror=()=>{console.error("CMIS DEBUG: getContentStream network error"),mt(new Error("Network error"))},gt.send()})}}const FolderTree=({repositoryId:dt,onSelect:ft,selectedFolderId:pt})=>{const[ht,mt]=reactExports.useState([]),[gt,vt]=reactExports.useState(!0),[yt,bt]=reactExports.useState([]),[xt,St]=reactExports.useState([]),Et=new CMISService;reactExports.useEffect(()=>{Ct()},[dt]),reactExports.useEffect(()=>{pt&&St([pt])},[pt]);const Ct=async()=>{try{vt(!0);const $t=await Et.getRootFolder(dt),_t={key:$t.id,title:$t.name||"Root",icon:jsxRuntimeExports.jsx(RefIcon$j,{}),isLeaf:!1};mt([_t]),bt([$t.id]),St([$t.id]),ft($t.id,$t.path||"/")}catch{staticMethods.error("ルートフォルダの読み込みに失敗しました")}finally{vt(!1)}},wt=async $t=>{try{return(await Et.getChildren(dt,$t)).filter(At=>At.baseType==="cmis:folder").map(At=>({key:At.id,title:At.name,icon:jsxRuntimeExports.jsx(RefIcon$j,{}),isLeaf:!1}))}catch{return staticMethods.error("フォルダの読み込みに失敗しました"),[]}},Rt=async({key:$t})=>{const _t=await wt($t);mt(It=>{const At=Ot=>Ot.map(kt=>kt.key===$t?{...kt,children:_t}:kt.children?{...kt,children:At(kt.children)}:kt);return At(It)})},Tt=async($t,_t)=>{if($t.length>0){const It=$t[0];St([It]);try{const At=await Et.getObject(dt,It);ft(It,At.path||At.name)}catch{staticMethods.error("フォルダ情報の取得に失敗しました")}}},Pt=$t=>{bt($t)};return gt?jsxRuntimeExports.jsx("div",{style:{textAlign:"center",padding:"20px"},children:jsxRuntimeExports.jsx(Spin,{size:"large"})}):jsxRuntimeExports.jsx(Tree,{treeData:ht,loadData:Rt,onSelect:Tt,onExpand:Pt,selectedKeys:xt,expandedKeys:yt,showIcon:!0,style:{background:"#fafafa",padding:"8px",borderRadius:"4px"}})},DocumentList=({repositoryId:dt})=>{const[ft,pt]=reactExports.useState([]),[ht,mt]=reactExports.useState(!1),[gt,vt]=reactExports.useState(""),[yt,bt]=reactExports.useState("/"),[xt,St]=reactExports.useState(!1),[Et,Ct]=reactExports.useState(!1),[wt]=Form.useForm(),Rt=useNavigate(),{handleAuthError:Tt}=useAuth(),Pt=new CMISService(Tt);reactExports.useEffect(()=>{gt||(console.log("DocumentList DEBUG: Initializing with root folder ID"),vt("e02f784f8360a02cc14d1314c10038ff"))},[dt]),reactExports.useEffect(()=>{gt&&(console.log("DocumentList DEBUG: currentFolderId changed, loading objects for:",gt),$t())},[gt]);const $t=async()=>{if(!gt){console.warn("LOAD OBJECTS DEBUG: No currentFolderId, skipping load");return}console.log("LOAD OBJECTS DEBUG: Loading children for repository:",dt,"folder:",gt),mt(!0);try{const Nt=await Pt.getChildren(dt,gt);console.log("LOAD OBJECTS DEBUG: Successfully received",Nt.length,"children:",Nt),pt(Nt),gt==="e02f784f8360a02cc14d1314c10038ff"&&(bt("/"),console.log("LOAD OBJECTS DEBUG: Set root folder path"))}catch(Nt){console.error("LOAD OBJECTS DEBUG: Error loading children:",Nt),console.error("LOAD OBJECTS DEBUG: Error details:",{repositoryId:dt,currentFolderId:gt,errorMessage:Nt instanceof Error?Nt.message:"Unknown error"}),staticMethods.error(`オブジェクトの読み込みに失敗しました: ${Nt instanceof Error?Nt.message:"Unknown error"}`),pt([])}finally{mt(!1)}},_t=(Nt,Lt)=>{vt(Nt),bt(Lt)},It=async Nt=>{var Bt,Ht,Wt;const{file:Lt,name:Dt}=Nt;console.log("UPLOAD DEBUG: handleUpload called with values:",Nt),console.log("UPLOAD DEBUG: currentFolderId:",gt),console.log("UPLOAD DEBUG: file structure:",Lt);try{const zt=((Bt=Lt==null?void 0:Lt[0])==null?void 0:Bt.originFileObj)||(Lt==null?void 0:Lt[0])||((Wt=(Ht=Lt==null?void 0:Lt.fileList)==null?void 0:Ht[0])==null?void 0:Wt.originFileObj);if(console.log("UPLOAD DEBUG: actualFile:",zt),!zt){staticMethods.error("ファイルが選択されていません");return}if(!gt){staticMethods.error("アップロード先フォルダが選択されていません");return}await Pt.createDocument(dt,gt,zt,{name:Dt}),staticMethods.success("ファイルをアップロードしました"),St(!1),wt.resetFields(),$t()}catch(zt){console.error("UPLOAD DEBUG: Upload error:",zt),staticMethods.error("ファイルのアップロードに失敗しました")}},At=async Nt=>{try{await Pt.createFolder(dt,gt,Nt.name),staticMethods.success("フォルダを作成しました"),Ct(!1),wt.resetFields(),$t()}catch{staticMethods.error("フォルダの作成に失敗しました")}},Ot=async Nt=>{try{await Pt.deleteObject(dt,Nt),staticMethods.success("削除しました"),$t()}catch{staticMethods.error("削除に失敗しました")}},kt=Nt=>{const Lt=Pt.getDownloadUrl(dt,Nt);window.open(Lt,"_blank")},Mt=[{title:"タイプ",dataIndex:"baseType",key:"type",width:60,render:Nt=>Nt==="cmis:folder"?jsxRuntimeExports.jsx(RefIcon$j,{style:{color:"#1890ff",fontSize:"16px"}}):jsxRuntimeExports.jsx(RefIcon$n,{style:{color:"#52c41a",fontSize:"16px"}})},{title:"名前",dataIndex:"name",key:"name",render:(Nt,Lt)=>jsxRuntimeExports.jsx(Button$1,{type:"link",onClick:()=>{console.log("FOLDER CLICK DEBUG:",{name:Lt.name,id:Lt.id,baseType:Lt.baseType,objectType:Lt.objectType}),Lt.baseType==="cmis:folder"?(console.log("Setting folder ID to:",Lt.id),vt(Lt.id)):Rt(`/documents/${Lt.id}`)},children:Nt})},{title:"サイズ",dataIndex:"contentStreamLength",key:"size",width:100,render:Nt=>Nt?`${Math.round(Nt/1024)} KB`:"-"},{title:"更新日時",dataIndex:"lastModificationDate",key:"modified",width:180,render:Nt=>Nt?new Date(Nt).toLocaleString("ja-JP"):"-"},{title:"更新者",dataIndex:"lastModifiedBy",key:"modifiedBy",width:120},{title:"アクション",key:"actions",width:200,render:(Nt,Lt)=>jsxRuntimeExports.jsxs(Space,{children:[jsxRuntimeExports.jsx(Tooltip,{title:"詳細表示",children:jsxRuntimeExports.jsx(Button$1,{icon:jsxRuntimeExports.jsx(RefIcon$z,{}),size:"small",onClick:()=>Rt(`/documents/${Lt.id}`)})}),Lt.baseType==="cmis:document"&&jsxRuntimeExports.jsx(Tooltip,{title:"ダウンロード",children:jsxRuntimeExports.jsx(Button$1,{icon:jsxRuntimeExports.jsx(RefIcon$p,{}),size:"small",onClick:()=>kt(Lt.id)})}),jsxRuntimeExports.jsx(Tooltip,{title:"権限管理",children:jsxRuntimeExports.jsx(Button$1,{icon:jsxRuntimeExports.jsx(RefIcon$e,{}),size:"small",onClick:()=>Rt(`/permissions/${Lt.id}`)})}),jsxRuntimeExports.jsx(Popconfirm,{title:"削除しますか？",onConfirm:()=>Ot(Lt.id),okText:"はい",cancelText:"いいえ",children:jsxRuntimeExports.jsx(Tooltip,{title:"削除",children:jsxRuntimeExports.jsx(Button$1,{icon:jsxRuntimeExports.jsx(RefIcon$q,{}),size:"small",danger:!0})})})]})}],jt=yt.split("/").filter(Boolean).map((Nt,Lt)=>({title:Lt===0?jsxRuntimeExports.jsx(RefIcon$h,{}):Nt}));return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Row$1,{gutter:16,children:[jsxRuntimeExports.jsx(Col,{span:6,children:jsxRuntimeExports.jsx(Card,{title:"フォルダツリー",size:"small",children:jsxRuntimeExports.jsx(FolderTree,{repositoryId:dt,onSelect:_t,selectedFolderId:gt})})}),jsxRuntimeExports.jsx(Col,{span:18,children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(Space,{direction:"vertical",style:{width:"100%"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsx(Breadcrumb,{items:jt}),jsxRuntimeExports.jsxs(Space,{children:[jsxRuntimeExports.jsx(Button$1,{type:"primary",icon:jsxRuntimeExports.jsx(RefIcon$1,{}),onClick:()=>St(!0),children:"ファイルアップロード"}),jsxRuntimeExports.jsx(Button$1,{icon:jsxRuntimeExports.jsx(RefIcon$G,{}),onClick:()=>Ct(!0),children:"フォルダ作成"})]})]}),jsxRuntimeExports.jsx(ForwardTable,{columns:Mt,dataSource:ft,rowKey:"id",loading:ht,pagination:{pageSize:20},size:"small"})]})})})]}),jsxRuntimeExports.jsx(Modal,{title:"ファイルアップロード",open:xt,onCancel:()=>St(!1),footer:null,children:jsxRuntimeExports.jsxs(Form,{form:wt,onFinish:It,layout:"vertical",children:[jsxRuntimeExports.jsx(Form.Item,{name:"file",label:"ファイル",rules:[{required:!0,message:"ファイルを選択してください"}],valuePropName:"fileList",getValueFromEvent:Nt=>(console.log("UPLOAD DEBUG: getValueFromEvent called with:",Nt),Array.isArray(Nt)?Nt:Nt==null?void 0:Nt.fileList),children:jsxRuntimeExports.jsxs(Upload.Dragger,{beforeUpload:()=>!1,maxCount:1,onChange:Nt=>{console.log("UPLOAD DEBUG: onChange called with info:",Nt),Nt.fileList.length>0&&Nt.fileList[0].name&&wt.setFieldsValue({name:Nt.fileList[0].name})},children:[jsxRuntimeExports.jsx("p",{className:"ant-upload-drag-icon",children:jsxRuntimeExports.jsx(RefIcon$1,{})}),jsxRuntimeExports.jsx("p",{className:"ant-upload-text",children:"ファイルをドラッグ&ドロップまたはクリックして選択"})]})}),jsxRuntimeExports.jsx(Form.Item,{name:"name",label:"ファイル名",rules:[{required:!0,message:"ファイル名を入力してください"}],children:jsxRuntimeExports.jsx(Input,{placeholder:"ファイル名を入力"})}),jsxRuntimeExports.jsx(Form.Item,{children:jsxRuntimeExports.jsxs(Space,{children:[jsxRuntimeExports.jsx(Button$1,{type:"primary",htmlType:"submit",children:"アップロード"}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>{St(!1),wt.resetFields()},children:"キャンセル"})]})})]})}),jsxRuntimeExports.jsx(Modal,{title:"フォルダ作成",open:Et,onCancel:()=>Ct(!1),footer:null,children:jsxRuntimeExports.jsxs(Form,{form:wt,onFinish:At,layout:"vertical",children:[jsxRuntimeExports.jsx(Form.Item,{name:"name",label:"フォルダ名",rules:[{required:!0,message:"フォルダ名を入力してください"}],children:jsxRuntimeExports.jsx(Input,{placeholder:"フォルダ名を入力"})}),jsxRuntimeExports.jsx(Form.Item,{children:jsxRuntimeExports.jsxs(Space,{children:[jsxRuntimeExports.jsx(Button$1,{type:"primary",htmlType:"submit",children:"作成"}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>Ct(!1),children:"キャンセル"})]})})]})})]})},PropertyEditor=({object:dt,propertyDefinitions:ft,onSave:pt,readOnly:ht=!1})=>{const[mt]=Form.useForm(),[gt,vt]=React.useState(!1),yt=async St=>{vt(!0);try{const Et={};Object.entries(St).forEach(([Ct,wt])=>{const Rt=ft[Ct];Rt&&(Rt.propertyType==="datetime"&&wt?Et[Ct]=dayjs(wt).toISOString():Rt.cardinality==="multi"&&!Array.isArray(wt)?Et[Ct]=wt?[wt]:[]:Et[Ct]=wt)}),await pt(Et)}finally{vt(!1)}},bt=(St,Et)=>{const Ct=dt.properties[St];if(ht){let wt=Ct;return Et.propertyType==="datetime"&&Ct?wt=dayjs(Ct).format("YYYY-MM-DD HH:mm:ss"):Array.isArray(Ct)&&(wt=Ct.join(", ")),jsxRuntimeExports.jsx(Input,{value:wt,disabled:!0})}switch(Et.propertyType){case"string":return Et.choices&&Et.choices.length>0?jsxRuntimeExports.jsx(Select,{mode:Et.cardinality==="multi"?"multiple":void 0,options:Et.choices.map(wt=>({label:wt.displayName,value:wt.value[0]})),placeholder:`${Et.displayName}を選択`}):Et.cardinality==="multi"?jsxRuntimeExports.jsx(Select,{mode:"tags",placeholder:`${Et.displayName}を入力（複数可）`}):jsxRuntimeExports.jsx(Input,{maxLength:Et.maxLength,placeholder:Et.displayName});case"integer":return jsxRuntimeExports.jsx(TypedInputNumber,{min:Et.minValue,max:Et.maxValue,style:{width:"100%"},placeholder:Et.displayName});case"decimal":return jsxRuntimeExports.jsx(TypedInputNumber,{min:Et.minValue,max:Et.maxValue,step:.01,style:{width:"100%"},placeholder:Et.displayName});case"boolean":return jsxRuntimeExports.jsx(Switch,{checkedChildren:"はい",unCheckedChildren:"いいえ"});case"datetime":return jsxRuntimeExports.jsx(DatePicker,{showTime:!0,style:{width:"100%"},placeholder:`${Et.displayName}を選択`});default:return jsxRuntimeExports.jsx(Input,{placeholder:Et.displayName})}},xt=()=>{const St={};return Object.entries(ft).forEach(([Et,Ct])=>{const wt=dt.properties[Et];wt!=null?Ct.propertyType==="datetime"&&wt?St[Et]=dayjs(wt):St[Et]=wt:Ct.defaultValue&&Ct.defaultValue.length>0&&(Ct.cardinality==="multi"?St[Et]=Ct.defaultValue:St[Et]=Ct.defaultValue[0])}),St};return jsxRuntimeExports.jsxs(Form,{form:mt,layout:"vertical",initialValues:xt(),onFinish:yt,children:[Object.entries(ft).filter(([St,Et])=>Et.updatable||ht).map(([St,Et])=>jsxRuntimeExports.jsx(Form.Item,{name:St,label:jsxRuntimeExports.jsxs(Space,{children:[Et.displayName,Et.description&&jsxRuntimeExports.jsx(Tooltip,{title:Et.description,children:jsxRuntimeExports.jsx(RefIcon$f,{style:{color:"#c72439"}})}),Et.required&&jsxRuntimeExports.jsx("span",{style:{color:"red"},children:"*"})]}),rules:[{required:Et.required,message:`${Et.displayName}は必須です`}],children:bt(St,Et)},St)),!ht&&jsxRuntimeExports.jsx(Form.Item,{children:jsxRuntimeExports.jsxs(Space,{children:[jsxRuntimeExports.jsx(Button$1,{type:"primary",htmlType:"submit",loading:gt,children:"保存"}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>mt.resetFields(),children:"リセット"})]})})]})},getFileType=dt=>dt.startsWith("image/")?"image":dt.startsWith("video/")?"video":dt==="application/pdf"?"pdf":dt.startsWith("text/")||dt==="application/json"?"text":dt.includes("officedocument")||dt.includes("opendocument")?"office":"unsupported",canPreview=dt=>{var ft;return dt.baseType==="cmis:document"&&!!dt.contentStreamMimeType&&((ft=dt.allowableActions)==null?void 0:ft.includes("canGetContentStream"))&&getFileType(dt.contentStreamMimeType)!=="unsupported"};var t={694:(dt,ft,pt)=>{var ht=pt(925);function mt(){}function gt(){}gt.resetWarningCache=mt,dt.exports=function(){function vt(xt,St,Et,Ct,wt,Rt){if(Rt!==ht){var Tt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Tt.name="Invariant Violation",Tt}}function yt(){return vt}vt.isRequired=vt;var bt={array:vt,bigint:vt,bool:vt,func:vt,number:vt,object:vt,string:vt,symbol:vt,any:vt,arrayOf:yt,element:vt,elementType:vt,instanceOf:yt,node:vt,objectOf:yt,oneOf:yt,oneOfType:yt,shape:yt,exact:yt,checkPropTypes:gt,resetWarningCache:mt};return bt.PropTypes=bt,bt}},556:(dt,ft,pt)=>{dt.exports=pt(694)()},925:dt=>{dt.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},115:dt=>{var ft=typeof Element<"u",pt=typeof Map=="function",ht=typeof Set=="function",mt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function gt(vt,yt){if(vt===yt)return!0;if(vt&&yt&&typeof vt=="object"&&typeof yt=="object"){if(vt.constructor!==yt.constructor)return!1;var bt,xt,St,Et;if(Array.isArray(vt)){if((bt=vt.length)!=yt.length)return!1;for(xt=bt;xt--!=0;)if(!gt(vt[xt],yt[xt]))return!1;return!0}if(pt&&vt instanceof Map&&yt instanceof Map){if(vt.size!==yt.size)return!1;for(Et=vt.entries();!(xt=Et.next()).done;)if(!yt.has(xt.value[0]))return!1;for(Et=vt.entries();!(xt=Et.next()).done;)if(!gt(xt.value[1],yt.get(xt.value[0])))return!1;return!0}if(ht&&vt instanceof Set&&yt instanceof Set){if(vt.size!==yt.size)return!1;for(Et=vt.entries();!(xt=Et.next()).done;)if(!yt.has(xt.value[0]))return!1;return!0}if(mt&&ArrayBuffer.isView(vt)&&ArrayBuffer.isView(yt)){if((bt=vt.length)!=yt.length)return!1;for(xt=bt;xt--!=0;)if(vt[xt]!==yt[xt])return!1;return!0}if(vt.constructor===RegExp)return vt.source===yt.source&&vt.flags===yt.flags;if(vt.valueOf!==Object.prototype.valueOf&&typeof vt.valueOf=="function"&&typeof yt.valueOf=="function")return vt.valueOf()===yt.valueOf();if(vt.toString!==Object.prototype.toString&&typeof vt.toString=="function"&&typeof yt.toString=="function")return vt.toString()===yt.toString();if((bt=(St=Object.keys(vt)).length)!==Object.keys(yt).length)return!1;for(xt=bt;xt--!=0;)if(!Object.prototype.hasOwnProperty.call(yt,St[xt]))return!1;if(ft&&vt instanceof Element)return!1;for(xt=bt;xt--!=0;)if((St[xt]!=="_owner"&&St[xt]!=="__v"&&St[xt]!=="__o"||!vt.$$typeof)&&!gt(vt[St[xt]],yt[St[xt]]))return!1;return!0}return vt!=vt&&yt!=yt}dt.exports=function(vt,yt){try{return gt(vt,yt)}catch(bt){if((bt.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw bt}}}},n={};function i(dt){var ft=n[dt];if(ft!==void 0)return ft.exports;var pt=n[dt]={exports:{}};return t[dt](pt,pt.exports,i),pt.exports}i.n=dt=>{var ft=dt&&dt.__esModule?()=>dt.default:()=>dt;return i.d(ft,{a:ft}),ft},i.d=(dt,ft)=>{for(var pt in ft)i.o(ft,pt)&&!i.o(dt,pt)&&Object.defineProperty(dt,pt,{enumerable:!0,get:ft[pt]})},i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),i.o=(dt,ft)=>Object.prototype.hasOwnProperty.call(dt,ft);var r={};function a(dt){var ft,pt,ht="";if(typeof dt=="string"||typeof dt=="number")ht+=dt;else if(typeof dt=="object")if(Array.isArray(dt)){var mt=dt.length;for(ft=0;ft<mt;ft++)dt[ft]&&(pt=a(dt[ft]))&&(ht&&(ht+=" "),ht+=pt)}else for(pt in dt)dt[pt]&&(ht&&(ht+=" "),ht+=pt);return ht}i.d(r,{A:()=>ut});const o=function(){for(var dt,ft,pt=0,ht="",mt=arguments.length;pt<mt;pt++)(dt=arguments[pt])&&(ft=a(dt))&&(ht&&(ht+=" "),ht+=ft);return ht},s=(l$1={default:()=>React,useMemo:()=>reactExports.useMemo,useRef:()=>reactExports.useRef},u={},i.d(u,l$1),u);var l$1,u;const c=function(dt){var ft=typeof dt;return dt!=null&&(ft=="object"||ft=="function")},h$1=typeof global=="object"&&global&&global.Object===Object&&global;var d=typeof self=="object"&&self&&self.Object===Object&&self;const f=h$1||d||Function("return this")(),p=function(){return f.Date.now()};var m=/\s/,b=/^\s+/;const g=function(dt){return dt&&dt.slice(0,function(ft){for(var pt=ft.length;pt--&&m.test(ft.charAt(pt)););return pt}(dt)+1).replace(b,"")},v$1=f.Symbol;var y=Object.prototype,w=y.hasOwnProperty,S=y.toString,T=v$1?v$1.toStringTag:void 0,O=Object.prototype.toString,E=v$1?v$1.toStringTag:void 0;const k$1=function(dt){return dt==null?dt===void 0?"[object Undefined]":"[object Null]":E&&E in Object(dt)?function(ft){var pt=w.call(ft,T),ht=ft[T];try{ft[T]=void 0;var mt=!0}catch{}var gt=S.call(ft);return mt&&(pt?ft[T]=ht:delete ft[T]),gt}(dt):function(ft){return O.call(ft)}(dt)};var I=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,P=/^0o[0-7]+$/i,j=parseInt;const _$1=function(dt){if(typeof dt=="number")return dt;if(function(ht){return typeof ht=="symbol"||function(mt){return mt!=null&&typeof mt=="object"}(ht)&&k$1(ht)=="[object Symbol]"}(dt))return NaN;if(c(dt)){var ft=typeof dt.valueOf=="function"?dt.valueOf():dt;dt=c(ft)?ft+"":ft}if(typeof dt!="string")return dt===0?dt:+dt;dt=g(dt);var pt=x.test(dt);return pt||P.test(dt)?j(dt.slice(2),pt?2:8):I.test(dt)?NaN:+dt};var R=Math.max,L=Math.min;const M=function(dt,ft,pt){var ht,mt,gt,vt,yt,bt,xt=0,St=!1,Et=!1,Ct=!0;if(typeof dt!="function")throw new TypeError("Expected a function");function wt(_t){var It=ht,At=mt;return ht=mt=void 0,xt=_t,vt=dt.apply(At,It)}function Rt(_t){var It=_t-bt;return bt===void 0||It>=ft||It<0||Et&&_t-xt>=gt}function Tt(){var _t=p();if(Rt(_t))return Pt(_t);yt=setTimeout(Tt,function(It){var At=ft-(It-bt);return Et?L(At,gt-(It-xt)):At}(_t))}function Pt(_t){return yt=void 0,Ct&&ht?wt(_t):(ht=mt=void 0,vt)}function $t(){var _t=p(),It=Rt(_t);if(ht=arguments,mt=this,bt=_t,It){if(yt===void 0)return function(At){return xt=At,yt=setTimeout(Tt,ft),St?wt(At):vt}(bt);if(Et)return clearTimeout(yt),yt=setTimeout(Tt,ft),wt(bt)}return yt===void 0&&(yt=setTimeout(Tt,ft)),vt}return ft=_$1(ft)||0,c(pt)&&(St=!!pt.leading,gt=(Et="maxWait"in pt)?R(_$1(pt.maxWait)||0,ft):gt,Ct="trailing"in pt?!!pt.trailing:Ct),$t.cancel=function(){yt!==void 0&&clearTimeout(yt),xt=0,ht=bt=mt=yt=void 0},$t.flush=function(){return yt===void 0?vt:Pt(p())},$t},D$1=function(dt,ft,pt){var ht=!0,mt=!0;if(typeof dt!="function")throw new TypeError("Expected a function");return c(pt)&&(ht="leading"in pt?!!pt.leading:ht,mt="trailing"in pt?!!pt.trailing:mt),M(dt,ft,{leading:ht,maxWait:ft,trailing:mt})};var C=i(115),W=i.n(C),N=function(){if(typeof Map<"u")return Map;function dt(ft,pt){var ht=-1;return ft.some(function(mt,gt){return mt[0]===pt&&(ht=gt,!0)}),ht}return function(){function ft(){this.__entries__=[]}return Object.defineProperty(ft.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),ft.prototype.get=function(pt){var ht=dt(this.__entries__,pt),mt=this.__entries__[ht];return mt&&mt[1]},ft.prototype.set=function(pt,ht){var mt=dt(this.__entries__,pt);~mt?this.__entries__[mt][1]=ht:this.__entries__.push([pt,ht])},ft.prototype.delete=function(pt){var ht=this.__entries__,mt=dt(ht,pt);~mt&&ht.splice(mt,1)},ft.prototype.has=function(pt){return!!~dt(this.__entries__,pt)},ft.prototype.clear=function(){this.__entries__.splice(0)},ft.prototype.forEach=function(pt,ht){ht===void 0&&(ht=null);for(var mt=0,gt=this.__entries__;mt<gt.length;mt++){var vt=gt[mt];pt.call(ht,vt[1],vt[0])}},ft}()}(),F=typeof window<"u"&&typeof document<"u"&&window.document===document,z=i.g!==void 0&&i.g.Math===Math?i.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),B=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(z):function(dt){return setTimeout(function(){return dt(Date.now())},1e3/60)},A=["top","right","bottom","left","width","height","size","weight"],U=typeof MutationObserver<"u",q=function(){function dt(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(ft){var pt=!1,ht=!1,mt=0;function gt(){pt&&(pt=!1,ft()),ht&&yt()}function vt(){B(gt)}function yt(){var bt=Date.now();if(pt){if(bt-mt<2)return;ht=!0}else pt=!0,ht=!1,setTimeout(vt,20);mt=bt}return yt}(this.refresh.bind(this))}return dt.prototype.addObserver=function(ft){~this.observers_.indexOf(ft)||this.observers_.push(ft),this.connected_||this.connect_()},dt.prototype.removeObserver=function(ft){var pt=this.observers_,ht=pt.indexOf(ft);~ht&&pt.splice(ht,1),!pt.length&&this.connected_&&this.disconnect_()},dt.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},dt.prototype.updateObservers_=function(){var ft=this.observers_.filter(function(pt){return pt.gatherActive(),pt.hasActive()});return ft.forEach(function(pt){return pt.broadcastActive()}),ft.length>0},dt.prototype.connect_=function(){F&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),U?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},dt.prototype.disconnect_=function(){F&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},dt.prototype.onTransitionEnd_=function(ft){var pt=ft.propertyName,ht=pt===void 0?"":pt;A.some(function(mt){return!!~ht.indexOf(mt)})&&this.refresh()},dt.getInstance=function(){return this.instance_||(this.instance_=new dt),this.instance_},dt.instance_=null,dt}(),G=function(dt,ft){for(var pt=0,ht=Object.keys(ft);pt<ht.length;pt++){var mt=ht[pt];Object.defineProperty(dt,mt,{value:ft[mt],enumerable:!1,writable:!1,configurable:!0})}return dt},H$1=function(dt){return dt&&dt.ownerDocument&&dt.ownerDocument.defaultView||z},V=J(0,0,0,0);function K(dt){return parseFloat(dt)||0}function X(dt){for(var ft=[],pt=1;pt<arguments.length;pt++)ft[pt-1]=arguments[pt];return ft.reduce(function(ht,mt){return ht+K(dt["border-"+mt+"-width"])},0)}var Y$1=typeof SVGGraphicsElement<"u"?function(dt){return dt instanceof H$1(dt).SVGGraphicsElement}:function(dt){return dt instanceof H$1(dt).SVGElement&&typeof dt.getBBox=="function"};function $$1(dt){return F?Y$1(dt)?function(ft){var pt=ft.getBBox();return J(0,0,pt.width,pt.height)}(dt):function(ft){var pt=ft.clientWidth,ht=ft.clientHeight;if(!pt&&!ht)return V;var mt=H$1(ft).getComputedStyle(ft),gt=function(Ct){for(var wt={},Rt=0,Tt=["top","right","bottom","left"];Rt<Tt.length;Rt++){var Pt=Tt[Rt],$t=Ct["padding-"+Pt];wt[Pt]=K($t)}return wt}(mt),vt=gt.left+gt.right,yt=gt.top+gt.bottom,bt=K(mt.width),xt=K(mt.height);if(mt.boxSizing==="border-box"&&(Math.round(bt+vt)!==pt&&(bt-=X(mt,"left","right")+vt),Math.round(xt+yt)!==ht&&(xt-=X(mt,"top","bottom")+yt)),!function(Ct){return Ct===H$1(Ct).document.documentElement}(ft)){var St=Math.round(bt+vt)-pt,Et=Math.round(xt+yt)-ht;Math.abs(St)!==1&&(bt-=St),Math.abs(Et)!==1&&(xt-=Et)}return J(gt.left,gt.top,bt,xt)}(dt):V}function J(dt,ft,pt,ht){return{x:dt,y:ft,width:pt,height:ht}}var Q=function(){function dt(ft){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=J(0,0,0,0),this.target=ft}return dt.prototype.isActive=function(){var ft=$$1(this.target);return this.contentRect_=ft,ft.width!==this.broadcastWidth||ft.height!==this.broadcastHeight},dt.prototype.broadcastRect=function(){var ft=this.contentRect_;return this.broadcastWidth=ft.width,this.broadcastHeight=ft.height,ft},dt}(),Z$1=function(dt,ft){var pt=function(ht){var mt=ht.x,gt=ht.y,vt=ht.width,yt=ht.height,bt=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,xt=Object.create(bt.prototype);return G(xt,{x:mt,y:gt,width:vt,height:yt,top:gt,right:mt+vt,bottom:yt+gt,left:mt}),xt}(ft);G(this,{target:dt,contentRect:pt})},ee$1=function(){function dt(ft,pt,ht){if(this.activeObservations_=[],this.observations_=new N,typeof ft!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=ft,this.controller_=pt,this.callbackCtx_=ht}return dt.prototype.observe=function(ft){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(ft instanceof H$1(ft).Element))throw new TypeError('parameter 1 is not of type "Element".');var pt=this.observations_;pt.has(ft)||(pt.set(ft,new Q(ft)),this.controller_.addObserver(this),this.controller_.refresh())}},dt.prototype.unobserve=function(ft){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(ft instanceof H$1(ft).Element))throw new TypeError('parameter 1 is not of type "Element".');var pt=this.observations_;pt.has(ft)&&(pt.delete(ft),pt.size||this.controller_.removeObserver(this))}},dt.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},dt.prototype.gatherActive=function(){var ft=this;this.clearActive(),this.observations_.forEach(function(pt){pt.isActive()&&ft.activeObservations_.push(pt)})},dt.prototype.broadcastActive=function(){if(this.hasActive()){var ft=this.callbackCtx_,pt=this.activeObservations_.map(function(ht){return new Z$1(ht.target,ht.broadcastRect())});this.callback_.call(ft,pt,ft),this.clearActive()}},dt.prototype.clearActive=function(){this.activeObservations_.splice(0)},dt.prototype.hasActive=function(){return this.activeObservations_.length>0},dt}(),te$1=typeof WeakMap<"u"?new WeakMap:new N,ne=function dt(ft){if(!(this instanceof dt))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var pt=q.getInstance(),ht=new ee$1(ft,pt,this);te$1.set(this,ht)};["observe","unobserve","disconnect"].forEach(function(dt){ne.prototype[dt]=function(){var ft;return(ft=te$1.get(this))[dt].apply(ft,arguments)}});const ie$1=z.ResizeObserver!==void 0?z.ResizeObserver:ne,re="Left",ae$1="Right",oe="Up",se$1="Down",le$1={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},ue={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ce="mousemove",he$1="mouseup";function de$1(dt,ft){if(ft===0)return dt;const pt=Math.PI/180*ft;return[dt[0]*Math.cos(pt)+dt[1]*Math.sin(pt),dt[1]*Math.cos(pt)-dt[0]*Math.sin(pt)]}function fe$1(dt){const{trackMouse:ft}=dt,pt=s.useRef(Object.assign({},ue)),ht=s.useRef(Object.assign({},le$1)),mt=s.useRef(Object.assign({},ht.current));let gt;for(gt in mt.current=Object.assign({},ht.current),ht.current=Object.assign(Object.assign({},le$1),dt),le$1)ht.current[gt]===void 0&&(ht.current[gt]=le$1[gt]);const[vt,yt]=s.useMemo(()=>function(bt,xt){const St=Pt=>{const $t="touches"in Pt;$t&&Pt.touches.length>1||bt((_t,It)=>{It.trackMouse&&!$t&&(document.addEventListener(ce,Et),document.addEventListener(he$1,wt));const{clientX:At,clientY:Ot}=$t?Pt.touches[0]:Pt,kt=de$1([At,Ot],It.rotationAngle);return It.onTouchStartOrOnMouseDown&&It.onTouchStartOrOnMouseDown({event:Pt}),Object.assign(Object.assign(Object.assign({},_t),ue),{initial:kt.slice(),xy:kt,start:Pt.timeStamp||0})})},Et=Pt=>{bt(($t,_t)=>{const It="touches"in Pt;if(It&&Pt.touches.length>1)return $t;if(Pt.timeStamp-$t.start>_t.swipeDuration)return $t.swiping?Object.assign(Object.assign({},$t),{swiping:!1}):$t;const{clientX:At,clientY:Ot}=It?Pt.touches[0]:Pt,[kt,Mt]=de$1([At,Ot],_t.rotationAngle),jt=kt-$t.xy[0],Nt=Mt-$t.xy[1],Lt=Math.abs(jt),Dt=Math.abs(Nt),Bt=(Pt.timeStamp||0)-$t.start,Ht=Math.sqrt(Lt*Lt+Dt*Dt)/(Bt||1),Wt=[jt/(Bt||1),Nt/(Bt||1)],zt=function(Kt,Jt,Qt,Xt){return Kt>Jt?Qt>0?ae$1:re:Xt>0?se$1:oe}(Lt,Dt,jt,Nt),Ut=typeof _t.delta=="number"?_t.delta:_t.delta[zt.toLowerCase()]||le$1.delta;if(Lt<Ut&&Dt<Ut&&!$t.swiping)return $t;const qt={absX:Lt,absY:Dt,deltaX:jt,deltaY:Nt,dir:zt,event:Pt,first:$t.first,initial:$t.initial,velocity:Ht,vxvy:Wt};qt.first&&_t.onSwipeStart&&_t.onSwipeStart(qt),_t.onSwiping&&_t.onSwiping(qt);let Gt=!1;return(_t.onSwiping||_t.onSwiped||_t[`onSwiped${zt}`])&&(Gt=!0),Gt&&_t.preventScrollOnSwipe&&_t.trackTouch&&Pt.cancelable&&Pt.preventDefault(),Object.assign(Object.assign({},$t),{first:!1,eventData:qt,swiping:!0})})},Ct=Pt=>{bt(($t,_t)=>{let It;if($t.swiping&&$t.eventData){if(Pt.timeStamp-$t.start<_t.swipeDuration){It=Object.assign(Object.assign({},$t.eventData),{event:Pt}),_t.onSwiped&&_t.onSwiped(It);const At=_t[`onSwiped${It.dir}`];At&&At(It)}}else _t.onTap&&_t.onTap({event:Pt});return _t.onTouchEndOrOnMouseUp&&_t.onTouchEndOrOnMouseUp({event:Pt}),Object.assign(Object.assign(Object.assign({},$t),ue),{eventData:It})})},wt=Pt=>{document.removeEventListener(ce,Et),document.removeEventListener(he$1,wt),Ct(Pt)},Rt=(Pt,$t)=>{let _t=()=>{};if(Pt&&Pt.addEventListener){const It=Object.assign(Object.assign({},le$1.touchEventOptions),$t.touchEventOptions),At=[["touchstart",St,It],["touchmove",Et,Object.assign(Object.assign({},It),$t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",Ct,It]];At.forEach(([Ot,kt,Mt])=>Pt.addEventListener(Ot,kt,Mt)),_t=()=>At.forEach(([Ot,kt])=>Pt.removeEventListener(Ot,kt))}return _t},Tt={ref:Pt=>{Pt!==null&&bt(($t,_t)=>{if($t.el===Pt)return $t;const It={};return $t.el&&$t.el!==Pt&&$t.cleanUpTouch&&($t.cleanUpTouch(),It.cleanUpTouch=void 0),_t.trackTouch&&Pt&&(It.cleanUpTouch=Rt(Pt,_t)),Object.assign(Object.assign(Object.assign({},$t),{el:Pt}),It)})}};return xt.trackMouse&&(Tt.onMouseDown=St),[Tt,Rt]}(bt=>pt.current=bt(pt.current,ht.current),{trackMouse:ft}),[ft]);return pt.current=function(bt,xt,St,Et){return xt.trackTouch&&bt.el?bt.cleanUpTouch?xt.preventScrollOnSwipe!==St.preventScrollOnSwipe||xt.touchEventOptions.passive!==St.touchEventOptions.passive?(bt.cleanUpTouch(),Object.assign(Object.assign({},bt),{cleanUpTouch:Et(bt.el,xt)})):bt:Object.assign(Object.assign({},bt),{cleanUpTouch:Et(bt.el,xt)}):(bt.cleanUpTouch&&bt.cleanUpTouch(),Object.assign(Object.assign({},bt),{cleanUpTouch:void 0}))}(pt.current,ht.current,mt.current,yt),vt}var pe=i(556);function me(dt){return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},me(dt)}function be$1(dt,ft){var pt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(dt);ft&&(ht=ht.filter(function(mt){return Object.getOwnPropertyDescriptor(dt,mt).enumerable})),pt.push.apply(pt,ht)}return pt}function ge(dt){for(var ft=1;ft<arguments.length;ft++){var pt=arguments[ft]!=null?arguments[ft]:{};ft%2?be$1(Object(pt),!0).forEach(function(ht){ve(dt,ht,pt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(pt)):be$1(Object(pt)).forEach(function(ht){Object.defineProperty(dt,ht,Object.getOwnPropertyDescriptor(pt,ht))})}return dt}function ve(dt,ft,pt){return(ft=function(ht){var mt=function(gt){if(me(gt)!="object"||!gt)return gt;var vt=gt[Symbol.toPrimitive];if(vt!==void 0){var yt=vt.call(gt,"string");if(me(yt)!="object")return yt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(gt)}(ht);return me(mt)=="symbol"?mt:mt+""}(ft))in dt?Object.defineProperty(dt,ft,{value:pt,enumerable:!0,configurable:!0,writable:!0}):dt[ft]=pt,dt}var ye={description:"",fullscreen:"",isFullscreen:!1,originalAlt:"",originalHeight:"",originalWidth:"",originalTitle:"",sizes:"",srcSet:"",loading:"eager"},we=s.default.memo(function(dt){var ft=ge(ge({},ye),dt),pt=ft.description,ht=ft.fullscreen,mt=ft.handleImageLoaded,gt=ft.isFullscreen,vt=ft.onImageError,yt=ft.original,bt=ft.originalAlt,xt=ft.originalHeight,St=ft.originalWidth,Et=ft.originalTitle,Ct=ft.sizes,wt=ft.srcSet,Rt=ft.loading,Tt=gt&&ht||yt;return s.default.createElement(s.default.Fragment,null,s.default.createElement("img",{className:"image-gallery-image",src:Tt,alt:bt,srcSet:wt,height:xt,width:St,sizes:Ct,title:Et,onLoad:function(Pt){return mt(Pt,yt)},onError:vt,loading:Rt}),pt&&s.default.createElement("span",{className:"image-gallery-description"},pt))});we.displayName="Item",we.propTypes={description:pe.string,fullscreen:pe.string,handleImageLoaded:pe.func.isRequired,isFullscreen:pe.bool,onImageError:pe.func.isRequired,original:pe.string.isRequired,originalAlt:pe.string,originalHeight:pe.string,originalWidth:pe.string,originalTitle:pe.string,sizes:pe.string,srcSet:pe.string,loading:pe.string};const Se=we;function Te(dt){return Te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},Te(dt)}function Oe$1(dt,ft){var pt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(dt);ft&&(ht=ht.filter(function(mt){return Object.getOwnPropertyDescriptor(dt,mt).enumerable})),pt.push.apply(pt,ht)}return pt}function Ee$1(dt){for(var ft=1;ft<arguments.length;ft++){var pt=arguments[ft]!=null?arguments[ft]:{};ft%2?Oe$1(Object(pt),!0).forEach(function(ht){ke(dt,ht,pt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(pt)):Oe$1(Object(pt)).forEach(function(ht){Object.defineProperty(dt,ht,Object.getOwnPropertyDescriptor(pt,ht))})}return dt}function ke(dt,ft,pt){return(ft=function(ht){var mt=function(gt){if(Te(gt)!="object"||!gt)return gt;var vt=gt[Symbol.toPrimitive];if(vt!==void 0){var yt=vt.call(gt,"string");if(Te(yt)!="object")return yt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(gt)}(ht);return Te(mt)=="symbol"?mt:mt+""}(ft))in dt?Object.defineProperty(dt,ft,{value:pt,enumerable:!0,configurable:!0,writable:!0}):dt[ft]=pt,dt}var Ie={left:s.default.createElement("polyline",{points:"15 18 9 12 15 6"}),right:s.default.createElement("polyline",{points:"9 18 15 12 9 6"}),top:s.default.createElement("polyline",{points:"6 15 12 9 18 15"}),bottom:s.default.createElement("polyline",{points:"6 9 12 15 18 9"}),maximize:s.default.createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}),minimize:s.default.createElement("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"}),play:s.default.createElement("polygon",{points:"5 3 19 12 5 21 5 3"}),pause:s.default.createElement(s.default.Fragment,null,s.default.createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),s.default.createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))},xe={strokeWidth:1,viewBox:"0 0 24 24"},Pe=function(dt){var ft=Ee$1(Ee$1({},xe),dt),pt=ft.strokeWidth,ht=ft.viewBox,mt=ft.icon;return s.default.createElement("svg",{className:"image-gallery-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:ht,fill:"none",stroke:"currentColor",strokeWidth:pt,strokeLinecap:"round",strokeLinejoin:"round"},Ie[mt])};Pe.propTypes={strokeWidth:pe.number,viewBox:pe.string,icon:(0,pe.oneOf)(["left","right","top","bottom","maximize","minimize","play","pause"]).isRequired};const je=Pe;var _e=s.default.memo(function(dt){var ft=dt.isFullscreen,pt=dt.onClick;return s.default.createElement("button",{type:"button",className:"image-gallery-icon image-gallery-fullscreen-button",onClick:pt,"aria-label":"Open Fullscreen"},s.default.createElement(je,{strokeWidth:2,icon:ft?"minimize":"maximize"}))});_e.displayName="Fullscreen",_e.propTypes={isFullscreen:pe.bool.isRequired,onClick:pe.func.isRequired};const Re=_e;var Le=s.default.memo(function(dt){var ft=dt.disabled,pt=dt.onClick;return s.default.createElement("button",{type:"button",className:"image-gallery-icon image-gallery-left-nav",disabled:ft,onClick:pt,"aria-label":"Previous Slide"},s.default.createElement(je,{icon:"left",viewBox:"6 0 12 24"}))});Le.displayName="LeftNav",Le.propTypes={disabled:pe.bool.isRequired,onClick:pe.func.isRequired};const Me$1=Le;var De$1=s.default.memo(function(dt){var ft=dt.disabled,pt=dt.onClick;return s.default.createElement("button",{type:"button",className:"image-gallery-icon image-gallery-right-nav",disabled:ft,onClick:pt,"aria-label":"Next Slide"},s.default.createElement(je,{icon:"right",viewBox:"6 0 12 24"}))});De$1.displayName="RightNav",De$1.propTypes={disabled:pe.bool.isRequired,onClick:pe.func.isRequired};const Ce$1=De$1;var We=s.default.memo(function(dt){var ft=dt.isPlaying,pt=dt.onClick;return s.default.createElement("button",{type:"button",className:"image-gallery-icon image-gallery-play-button",onClick:pt,"aria-label":"Play or Pause Slideshow"},s.default.createElement(je,{strokeWidth:2,icon:ft?"pause":"play"}))});We.displayName="PlayPause",We.propTypes={isPlaying:pe.bool.isRequired,onClick:pe.func.isRequired};const Ne=We;function Fe(dt){return Fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},Fe(dt)}function ze(){return ze=Object.assign?Object.assign.bind():function(dt){for(var ft=1;ft<arguments.length;ft++){var pt=arguments[ft];for(var ht in pt)({}).hasOwnProperty.call(pt,ht)&&(dt[ht]=pt[ht])}return dt},ze.apply(null,arguments)}function Be(dt,ft){var pt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(dt);ft&&(ht=ht.filter(function(mt){return Object.getOwnPropertyDescriptor(dt,mt).enumerable})),pt.push.apply(pt,ht)}return pt}function Ae(dt){for(var ft=1;ft<arguments.length;ft++){var pt=arguments[ft]!=null?arguments[ft]:{};ft%2?Be(Object(pt),!0).forEach(function(ht){Ue(dt,ht,pt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(pt)):Be(Object(pt)).forEach(function(ht){Object.defineProperty(dt,ht,Object.getOwnPropertyDescriptor(pt,ht))})}return dt}function Ue(dt,ft,pt){return(ft=function(ht){var mt=function(gt){if(Fe(gt)!="object"||!gt)return gt;var vt=gt[Symbol.toPrimitive];if(vt!==void 0){var yt=vt.call(gt,"string");if(Fe(yt)!="object")return yt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(gt)}(ht);return Fe(mt)=="symbol"?mt:mt+""}(ft))in dt?Object.defineProperty(dt,ft,{value:pt,enumerable:!0,configurable:!0,writable:!0}):dt[ft]=pt,dt}var qe={className:"",delta:0,onSwiping:function(){},onSwiped:function(){}},Ge=function(dt){var ft=Ae(Ae({},qe),dt),pt=ft.children,ht=ft.className,mt=fe$1({delta:ft.delta,onSwiping:ft.onSwiping,onSwiped:ft.onSwiped});return s.default.createElement("div",ze({},mt,{className:ht}),pt)};Ge.propTypes={children:pe.node.isRequired,className:pe.string,delta:pe.number,onSwiped:pe.func,onSwiping:pe.func};const He$1=Ge;var Ve$1=s.default.memo(function(dt){var ft=dt.disabled,pt=dt.onClick;return s.default.createElement("button",{type:"button",className:"image-gallery-icon image-gallery-top-nav",disabled:ft,onClick:pt,"aria-label":"Previous Slide"},s.default.createElement(je,{icon:"top",viewBox:"6 0 12 24"}))});Ve$1.displayName="TopNav",Ve$1.propTypes={disabled:pe.bool.isRequired,onClick:pe.func.isRequired};const Ke=Ve$1;var Xe=s.default.memo(function(dt){var ft=dt.disabled,pt=dt.onClick;return s.default.createElement("button",{type:"button",className:"image-gallery-icon image-gallery-bottom-nav",disabled:ft,onClick:pt,"aria-label":"Next Slide"},s.default.createElement(je,{icon:"bottom",viewBox:"6 0 12 24"}))});Xe.displayName="BottomNav",Xe.propTypes={disabled:pe.bool.isRequired,onClick:pe.func.isRequired};const Ye=Xe;function $e(dt){return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},$e(dt)}function Je(dt,ft){var pt=Object.keys(dt);if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(dt);ft&&(ht=ht.filter(function(mt){return Object.getOwnPropertyDescriptor(dt,mt).enumerable})),pt.push.apply(pt,ht)}return pt}function Qe(dt){for(var ft=1;ft<arguments.length;ft++){var pt=arguments[ft]!=null?arguments[ft]:{};ft%2?Je(Object(pt),!0).forEach(function(ht){it(dt,ht,pt[ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(dt,Object.getOwnPropertyDescriptors(pt)):Je(Object(pt)).forEach(function(ht){Object.defineProperty(dt,ht,Object.getOwnPropertyDescriptor(pt,ht))})}return dt}function Ze(dt,ft){for(var pt=0;pt<ft.length;pt++){var ht=ft[pt];ht.enumerable=ht.enumerable||!1,ht.configurable=!0,"value"in ht&&(ht.writable=!0),Object.defineProperty(dt,rt(ht.key),ht)}}function et(){try{var dt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(et=function(){return!!dt})()}function tt(dt){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ft){return ft.__proto__||Object.getPrototypeOf(ft)},tt(dt)}function nt(dt,ft){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pt,ht){return pt.__proto__=ht,pt},nt(dt,ft)}function it(dt,ft,pt){return(ft=rt(ft))in dt?Object.defineProperty(dt,ft,{value:pt,enumerable:!0,configurable:!0,writable:!0}):dt[ft]=pt,dt}function rt(dt){var ft=function(pt){if($e(pt)!="object"||!pt)return pt;var ht=pt[Symbol.toPrimitive];if(ht!==void 0){var mt=ht.call(pt,"string");if($e(mt)!="object")return mt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pt)}(dt);return $e(ft)=="symbol"?ft:ft+""}var at=["fullscreenchange","MSFullscreenChange","mozfullscreenchange","webkitfullscreenchange"],ot=(0,pe.arrayOf)((0,pe.shape)({srcSet:pe.string,media:pe.string}));function st(dt){var ft=parseInt(dt.keyCode||dt.which||0,10);return ft===66||ft===62}var lt=function(){function dt(ft){var pt,ht,mt,gt;return function(vt,yt){if(!(vt instanceof yt))throw new TypeError("Cannot call a class as a function")}(this,dt),it((ht=this,gt=[ft],mt=tt(mt=dt),pt=function(vt,yt){if(yt&&($e(yt)=="object"||typeof yt=="function"))return yt;if(yt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(bt){if(bt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return bt}(vt)}(ht,et()?Reflect.construct(mt,gt||[],tt(ht).constructor):mt.apply(ht,gt))),"onBulletClick",function(vt,yt){var bt=pt.props,xt=bt.onBulletClick,St=bt.items,Et=pt.state.currentIndex;vt.target.blur(),Et!==yt&&(St.length===2?pt.slideToIndexWithStyleReset(yt,vt):pt.slideToIndex(yt,vt)),xt&&xt(vt,yt)}),pt.state={currentIndex:ft.startIndex,thumbsTranslate:0,thumbsSwipedTranslate:0,currentSlideOffset:0,galleryWidth:0,galleryHeight:0,thumbnailsWrapperWidth:0,thumbnailsWrapperHeight:0,thumbsStyle:{transition:"all ".concat(ft.slideDuration,"ms ease-out")},isFullscreen:!1,isSwipingThumbnail:!1,isPlaying:!1},pt.loadedImages={},pt.imageGallery=s.default.createRef(),pt.thumbnailsWrapper=s.default.createRef(),pt.thumbnails=s.default.createRef(),pt.imageGallerySlideWrapper=s.default.createRef(),pt.handleImageLoaded=pt.handleImageLoaded.bind(pt),pt.handleKeyDown=pt.handleKeyDown.bind(pt),pt.handleMouseDown=pt.handleMouseDown.bind(pt),pt.handleResize=pt.handleResize.bind(pt),pt.handleOnSwiped=pt.handleOnSwiped.bind(pt),pt.handleScreenChange=pt.handleScreenChange.bind(pt),pt.handleSwiping=pt.handleSwiping.bind(pt),pt.handleThumbnailSwiping=pt.handleThumbnailSwiping.bind(pt),pt.handleOnThumbnailSwiped=pt.handleOnThumbnailSwiped.bind(pt),pt.onThumbnailMouseLeave=pt.onThumbnailMouseLeave.bind(pt),pt.handleImageError=pt.handleImageError.bind(pt),pt.pauseOrPlay=pt.pauseOrPlay.bind(pt),pt.renderThumbInner=pt.renderThumbInner.bind(pt),pt.renderItem=pt.renderItem.bind(pt),pt.slideLeft=pt.slideLeft.bind(pt),pt.slideRight=pt.slideRight.bind(pt),pt.toggleFullScreen=pt.toggleFullScreen.bind(pt),pt.togglePlay=pt.togglePlay.bind(pt),pt.unthrottledSlideToIndex=pt.slideToIndex,pt.slideToIndex=D$1(pt.unthrottledSlideToIndex,ft.slideDuration,{trailing:!1}),ft.lazyLoad&&(pt.lazyLoaded=[]),pt}return function(ft,pt){if(typeof pt!="function"&&pt!==null)throw new TypeError("Super expression must either be null or a function");ft.prototype=Object.create(pt&&pt.prototype,{constructor:{value:ft,writable:!0,configurable:!0}}),Object.defineProperty(ft,"prototype",{writable:!1}),pt&&nt(ft,pt)}(dt,s.default.Component),function(ft,pt){return pt&&Ze(ft.prototype,pt),Object.defineProperty(ft,"prototype",{writable:!1}),ft}(dt,[{key:"componentDidMount",value:function(){var ft=this.props,pt=ft.autoPlay,ht=ft.useWindowKeyDown;pt&&this.play(),ht?window.addEventListener("keydown",this.handleKeyDown):this.imageGallery.current.addEventListener("keydown",this.handleKeyDown),window.addEventListener("mousedown",this.handleMouseDown),this.initSlideWrapperResizeObserver(this.imageGallerySlideWrapper),this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper),this.addScreenChangeEvent()}},{key:"componentDidUpdate",value:function(ft,pt){var ht=this.props,mt=ht.items,gt=ht.lazyLoad,vt=ht.slideDuration,yt=ht.slideInterval,bt=ht.startIndex,xt=ht.thumbnailPosition,St=ht.showThumbnails,Et=ht.useWindowKeyDown,Ct=this.state,wt=Ct.currentIndex,Rt=Ct.isPlaying,Tt=ft.items.length!==mt.length,Pt=!W()(ft.items,mt),$t=ft.startIndex!==bt,_t=ft.thumbnailPosition!==xt,It=ft.showThumbnails!==St;yt===ft.slideInterval&&vt===ft.slideDuration||Rt&&(this.pause(),this.play()),_t&&(this.removeResizeObserver(),this.initSlideWrapperResizeObserver(this.imageGallerySlideWrapper),this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper)),It&&St&&this.initThumbnailWrapperResizeObserver(this.thumbnailsWrapper),It&&!St&&this.removeThumbnailsResizeObserver(),(Tt||It)&&this.handleResize(),pt.currentIndex!==wt&&this.slideThumbnailBar(),ft.slideDuration!==vt&&(this.slideToIndex=D$1(this.unthrottledSlideToIndex,vt,{trailing:!1})),!gt||ft.lazyLoad&&!Pt||(this.lazyLoaded=[]),Et!==ft.useWindowKeyDown&&(Et?(this.imageGallery.current.removeEventListener("keydown",this.handleKeyDown),window.addEventListener("keydown",this.handleKeyDown)):(window.removeEventListener("keydown",this.handleKeyDown),this.imageGallery.current.addEventListener("keydown",this.handleKeyDown))),($t||Pt)&&this.setState({currentIndex:bt,slideStyle:{transition:"none"}})}},{key:"componentWillUnmount",value:function(){var ft=this.props.useWindowKeyDown;window.removeEventListener("mousedown",this.handleMouseDown),this.removeScreenChangeEvent(),this.removeResizeObserver(),this.playPauseIntervalId&&(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null),this.transitionTimer&&window.clearTimeout(this.transitionTimer),ft?window.removeEventListener("keydown",this.handleKeyDown):this.imageGallery.current.removeEventListener("keydown",this.handleKeyDown)}},{key:"onSliding",value:function(){var ft=this,pt=this.state,ht=pt.currentIndex,mt=pt.isTransitioning,gt=this.props,vt=gt.onSlide,yt=gt.slideDuration;this.transitionTimer=window.setTimeout(function(){mt&&(ft.setState({isTransitioning:!mt,isSwipingThumbnail:!1}),vt&&vt(ht))},yt+50)}},{key:"onThumbnailClick",value:function(ft,pt){var ht=this.props,mt=ht.onThumbnailClick,gt=ht.items,vt=this.state.currentIndex;ft.target.parentNode.parentNode.blur(),vt!==pt&&(gt.length===2?this.slideToIndexWithStyleReset(pt,ft):this.slideToIndex(pt,ft)),mt&&mt(ft,pt)}},{key:"onThumbnailMouseOver",value:function(ft,pt){var ht=this;this.thumbnailMouseOverTimer&&(window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null),this.thumbnailMouseOverTimer=window.setTimeout(function(){ht.slideToIndex(pt),ht.pause()},300)}},{key:"onThumbnailMouseLeave",value:function(){if(this.thumbnailMouseOverTimer){var ft=this.props.autoPlay;window.clearTimeout(this.thumbnailMouseOverTimer),this.thumbnailMouseOverTimer=null,ft&&this.play()}}},{key:"setThumbsTranslate",value:function(ft){this.setState({thumbsTranslate:ft})}},{key:"setModalFullscreen",value:function(ft){var pt=this.props.onScreenChange;this.setState({modalFullscreen:ft}),pt&&pt(ft)}},{key:"getThumbsTranslate",value:function(ft){var pt,ht=this.props,mt=ht.disableThumbnailScroll,gt=ht.items,vt=this.state,yt=vt.thumbnailsWrapperWidth,bt=vt.thumbnailsWrapperHeight,xt=this.thumbnails&&this.thumbnails.current;if(mt)return 0;if(xt){if(this.isThumbnailVertical()){if(xt.scrollHeight<=bt)return 0;pt=xt.scrollHeight-bt}else{if(xt.scrollWidth<=yt||yt<=0)return 0;pt=xt.scrollWidth-yt}return ft*(pt/(gt.length-1))}return 0}},{key:"getThumbnailPositionClassName",value:function(ft){switch(ft){case"left":ft=" ".concat("image-gallery-thumbnails-left");break;case"right":ft=" ".concat("image-gallery-thumbnails-right");break;case"bottom":ft=" ".concat("image-gallery-thumbnails-bottom");break;case"top":ft=" ".concat("image-gallery-thumbnails-top")}return ft}},{key:"getAlignmentClassName",value:function(ft){var pt=this.state.currentIndex,ht=this.props,mt=ht.infinite,gt=ht.items,vt="",yt="image-gallery-left",bt="image-gallery-right";switch(ft){case pt-1:vt=" ".concat(yt);break;case pt:vt=" ".concat("image-gallery-center");break;case pt+1:vt=" ".concat(bt)}return gt.length>=3&&mt&&(ft===0&&pt===gt.length-1?vt=" ".concat(bt):ft===gt.length-1&&pt===0&&(vt=" ".concat(yt))),vt}},{key:"getTranslateXForTwoSlide",value:function(ft){var pt=this.state,ht=pt.currentIndex,mt=pt.currentSlideOffset,gt=pt.previousIndex,vt=ht!==gt,yt=ft===0&&gt===0,bt=ft===1&&gt===1,xt=ft===0&&ht===1,St=ft===1&&ht===0,Et=mt===0,Ct=-100*ht+100*ft+mt;return mt>0?this.direction="left":mt<0&&(this.direction="right"),St&&mt>0&&(Ct=-100+mt),xt&&mt<0&&(Ct=100+mt),vt?yt&&Et&&this.direction==="left"?Ct=100:bt&&Et&&this.direction==="right"&&(Ct=-100):(St&&Et&&this.direction==="left"&&(Ct=-100),xt&&Et&&this.direction==="right"&&(Ct=100)),Ct}},{key:"getThumbnailBarHeight",value:function(){return this.isThumbnailVertical()?{height:this.state.gallerySlideWrapperHeight}:{}}},{key:"getSlideStyle",value:function(ft){var pt=this.state,ht=pt.currentIndex,mt=pt.currentSlideOffset,gt=pt.slideStyle,vt=this.props,yt=vt.infinite,bt=vt.items,xt=vt.useTranslate3D,St=vt.isRTL,Et=vt.slideVertically,Ct=-100*ht,wt=bt.length-1,Rt=(Ct+100*ft)*(St?-1:1)+mt;yt&&bt.length>2&&(ht===0&&ft===wt?Rt=-100*(St?-1:1)+mt:ht===wt&&ft===0&&(Rt=100*(St?-1:1)+mt)),yt&&bt.length===2&&(Rt=this.getTranslateXForTwoSlide(ft));var Tt=Et?"translate(0, ".concat(Rt,"%)"):"translate(".concat(Rt,"%, 0)");return xt&&(Tt=Et?"translate3d(0, ".concat(Rt,"%, 0)"):"translate3d(".concat(Rt,"%, 0, 0)")),Qe({display:this.isSlideVisible(ft)?"inherit":"none",WebkitTransform:Tt,MozTransform:Tt,msTransform:Tt,OTransform:Tt,transform:Tt},gt)}},{key:"getCurrentIndex",value:function(){return this.state.currentIndex}},{key:"getThumbnailStyle",value:function(){var ft,pt=this.props,ht=pt.useTranslate3D,mt=pt.isRTL,gt=this.state,vt=gt.thumbsTranslate,yt=gt.thumbsStyle,bt=mt?-1*vt:vt;return this.isThumbnailVertical()?(ft="translate(0, ".concat(vt,"px)"),ht&&(ft="translate3d(0, ".concat(vt,"px, 0)"))):(ft="translate(".concat(bt,"px, 0)"),ht&&(ft="translate3d(".concat(bt,"px, 0, 0)"))),Qe({WebkitTransform:ft,MozTransform:ft,msTransform:ft,OTransform:ft,transform:ft},yt)}},{key:"getSlideItems",value:function(){var ft=this,pt=this.state.currentIndex,ht=this.props,mt=ht.items,gt=ht.slideOnThumbnailOver,vt=ht.onClick,yt=ht.lazyLoad,bt=ht.onTouchMove,xt=ht.onTouchEnd,St=ht.onTouchStart,Et=ht.onMouseOver,Ct=ht.onMouseLeave,wt=ht.renderItem,Rt=ht.renderThumbInner,Tt=ht.showThumbnails,Pt=ht.showBullets,$t=[],_t=[],It=[];return mt.forEach(function(At,Ot){var kt=ft.getAlignmentClassName(Ot),Mt=At.originalClass?" ".concat(At.originalClass):"",jt=At.thumbnailClass?" ".concat(At.thumbnailClass):"",Nt=At.renderItem||wt||ft.renderItem,Lt=At.renderThumbInner||Rt||ft.renderThumbInner,Dt=!yt||kt||ft.lazyLoaded[Ot];Dt&&yt&&!ft.lazyLoaded[Ot]&&(ft.lazyLoaded[Ot]=!0);var Bt=ft.getSlideStyle(Ot),Ht=s.default.createElement("div",{"aria-label":"Go to Slide ".concat(Ot+1),key:"slide-".concat(Ot),tabIndex:"-1",className:"image-gallery-slide ".concat(kt," ").concat(Mt),style:Bt,onClick:vt,onKeyUp:ft.handleSlideKeyUp,onTouchMove:bt,onTouchEnd:xt,onTouchStart:St,onMouseOver:Et,onFocus:Et,onMouseLeave:Ct,role:"button"},Dt?Nt(At):s.default.createElement("div",{style:{height:"100%"}}));if($t.push(Ht),Tt&&At.thumbnail){var Wt=o("image-gallery-thumbnail",jt,{active:pt===Ot});_t.push(s.default.createElement("button",{key:"thumbnail-".concat(Ot),type:"button",tabIndex:"0","aria-pressed":pt===Ot?"true":"false","aria-label":"Go to Slide ".concat(Ot+1),className:Wt,onMouseLeave:gt?ft.onThumbnailMouseLeave:null,onMouseOver:function(Ut){return ft.handleThumbnailMouseOver(Ut,Ot)},onFocus:function(Ut){return ft.handleThumbnailMouseOver(Ut,Ot)},onKeyUp:function(Ut){return ft.handleThumbnailKeyUp(Ut,Ot)},onClick:function(Ut){return ft.onThumbnailClick(Ut,Ot)}},Lt(At)))}if(Pt){var zt=o("image-gallery-bullet",At.bulletClass,{active:pt===Ot});It.push(s.default.createElement("button",{type:"button",key:"bullet-".concat(Ot),className:zt,onClick:function(Ut){return ft.onBulletClick(Ut,Ot)},"aria-pressed":pt===Ot?"true":"false","aria-label":"Go to Slide ".concat(Ot+1)}))}}),{slides:$t,thumbnails:_t,bullets:It}}},{key:"ignoreIsTransitioning",value:function(){var ft=this.props.items,pt=this.state,ht=pt.previousIndex,mt=pt.currentIndex,gt=ft.length-1;return Math.abs(ht-mt)>1&&!(ht===0&&mt===gt)&&!(ht===gt&&mt===0)}},{key:"isFirstOrLastSlide",value:function(ft){return ft===this.props.items.length-1||ft===0}},{key:"slideIsTransitioning",value:function(ft){var pt=this.state,ht=pt.isTransitioning,mt=pt.previousIndex,gt=pt.currentIndex;return ht&&!(ft===mt||ft===gt)}},{key:"isSlideVisible",value:function(ft){return!this.slideIsTransitioning(ft)||this.ignoreIsTransitioning()&&!this.isFirstOrLastSlide(ft)}},{key:"slideThumbnailBar",value:function(){var ft=this.state,pt=ft.currentIndex,ht=ft.isSwipingThumbnail,mt=-this.getThumbsTranslate(pt);ht||(pt===0?this.setState({thumbsTranslate:0,thumbsSwipedTranslate:0}):this.setState({thumbsTranslate:mt,thumbsSwipedTranslate:mt}))}},{key:"canSlide",value:function(){return this.props.items.length>=2}},{key:"canSlideLeft",value:function(){var ft=this.props,pt=ft.infinite,ht=ft.isRTL;return pt||(ht?this.canSlideNext():this.canSlidePrevious())}},{key:"canSlideRight",value:function(){var ft=this.props,pt=ft.infinite,ht=ft.isRTL;return pt||(ht?this.canSlidePrevious():this.canSlideNext())}},{key:"canSlidePrevious",value:function(){return this.state.currentIndex>0}},{key:"canSlideNext",value:function(){return this.state.currentIndex<this.props.items.length-1}},{key:"handleSwiping",value:function(ft){var pt=ft.event,ht=ft.absX,mt=ft.absY,gt=ft.dir,vt=this.props,yt=vt.disableSwipe,bt=vt.stopPropagation,xt=vt.swipingTransitionDuration,St=this.state,Et=St.galleryWidth,Ct=St.galleryHeight,wt=St.isTransitioning,Rt=St.swipingUpDown,Tt=St.swipingLeftRight,Pt=this.props.slideVertically;if((gt!==oe&&gt!==se$1&&!Rt||Tt||(Rt||this.setState({swipingUpDown:!0}),Pt))&&(gt!==re&&gt!==ae$1||Tt||this.setState({swipingLeftRight:!0}),!yt))if(bt&&pt.preventDefault(),wt)this.setState({currentSlideOffset:0});else{if((gt===re||gt===ae$1)&&Pt||(gt===oe||gt===se$1)&&!Pt)return;var $t=it(it(it(it({},re,-1),ae$1,1),oe,-1),se$1,1)[gt],_t=ht/Et*100;Pt&&(_t=mt/Ct*100),Math.abs(_t)>=100&&(_t=100);var It={transition:"transform ".concat(xt,"ms ease-out")};this.setState({currentSlideOffset:$t*_t,slideStyle:It})}}},{key:"handleThumbnailSwiping",value:function(ft){var pt=ft.event,ht=ft.absX,mt=ft.absY,gt=ft.dir,vt=this.props,yt=vt.stopPropagation,bt=vt.swipingThumbnailTransitionDuration,xt=this.state,St=xt.thumbsSwipedTranslate,Et=xt.thumbnailsWrapperHeight,Ct=xt.thumbnailsWrapperWidth,wt=xt.swipingUpDown,Rt=xt.swipingLeftRight;if(this.isThumbnailVertical()){if((gt===re||gt===ae$1||Rt)&&!wt)return void(Rt||this.setState({swipingLeftRight:!0}));gt!==oe&&gt!==se$1||wt||this.setState({swipingUpDown:!0})}else{if((gt===oe||gt===se$1||wt)&&!Rt)return void(wt||this.setState({swipingUpDown:!0}));gt!==re&&gt!==ae$1||Rt||this.setState({swipingLeftRight:!0})}var Tt,Pt,$t,_t,It,At=this.thumbnails&&this.thumbnails.current;if(this.isThumbnailVertical()?(Tt=St+(gt===se$1?mt:-mt),Pt=At.scrollHeight-Et+20,$t=Math.abs(Tt)>Pt,_t=Tt>20,It=At.scrollHeight<=Et):(Tt=St+(gt===ae$1?ht:-ht),Pt=At.scrollWidth-Ct+20,$t=Math.abs(Tt)>Pt,_t=Tt>20,It=At.scrollWidth<=Ct),!It&&(gt!==re&&gt!==oe||!$t)&&(gt!==ae$1&&gt!==se$1||!_t)){yt&&pt.stopPropagation();var Ot={transition:"transform ".concat(bt,"ms ease-out")};this.setState({thumbsTranslate:Tt,thumbsStyle:Ot})}}},{key:"handleOnThumbnailSwiped",value:function(){var ft=this.state.thumbsTranslate,pt=this.props.slideDuration;this.resetSwipingDirection(),this.setState({isSwipingThumbnail:!0,thumbsSwipedTranslate:ft,thumbsStyle:{transition:"all ".concat(pt,"ms ease-out")}})}},{key:"sufficientSwipe",value:function(){var ft=this.state.currentSlideOffset,pt=this.props.swipeThreshold;return Math.abs(ft)>pt}},{key:"resetSwipingDirection",value:function(){var ft=this.state,pt=ft.swipingUpDown,ht=ft.swipingLeftRight;pt&&this.setState({swipingUpDown:!1}),ht&&this.setState({swipingLeftRight:!1})}},{key:"handleOnSwiped",value:function(ft){var pt=ft.event,ht=ft.dir,mt=ft.velocity,gt=this.props,vt=gt.disableSwipe,yt=gt.stopPropagation,bt=gt.flickThreshold,xt=this.props.slideVertically;if(!vt){var St=this.props.isRTL;yt&&pt.stopPropagation(),this.resetSwipingDirection();var Et=(ht===re?1:-1)*(St?-1:1);xt&&(Et=ht===oe?1:-1);var Ct=xt?mt>bt&&!(ht===re||ht===ae$1):mt>bt&&!(ht===oe||ht===se$1);this.handleOnSwipedTo(Et,Ct)}}},{key:"handleOnSwipedTo",value:function(ft,pt){var ht=this.state,mt=ht.currentIndex,gt=ht.isTransitioning,vt=mt;!this.sufficientSwipe()&&!pt||gt||(vt+=ft),(ft===-1&&!this.canSlideLeft()||ft===1&&!this.canSlideRight())&&(vt=mt),this.unthrottledSlideToIndex(vt)}},{key:"handleMouseDown",value:function(){this.imageGallery.current.classList.add("image-gallery-using-mouse")}},{key:"handleKeyDown",value:function(ft){var pt=this.props,ht=pt.disableKeyDown,mt=pt.useBrowserFullscreen,gt=this.state.isFullscreen;if(this.imageGallery.current.classList.remove("image-gallery-using-mouse"),!ht)switch(parseInt(ft.keyCode||ft.which||0,10)){case 37:this.canSlideLeft()&&!this.playPauseIntervalId&&this.slideLeft(ft);break;case 39:this.canSlideRight()&&!this.playPauseIntervalId&&this.slideRight(ft);break;case 27:gt&&!mt&&this.exitFullScreen()}}},{key:"handleImageError",value:function(ft){var pt=this.props.onErrorImageURL;pt&&ft.target.src.indexOf(pt)===-1&&(ft.target.src=pt)}},{key:"removeThumbnailsResizeObserver",value:function(){this.resizeThumbnailWrapperObserver&&this.thumbnailsWrapper&&this.thumbnailsWrapper.current&&(this.resizeThumbnailWrapperObserver.unobserve(this.thumbnailsWrapper.current),this.resizeThumbnailWrapperObserver=null)}},{key:"removeResizeObserver",value:function(){this.resizeSlideWrapperObserver&&this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current&&(this.resizeSlideWrapperObserver.unobserve(this.imageGallerySlideWrapper.current),this.resizeSlideWrapperObserver=null),this.removeThumbnailsResizeObserver()}},{key:"handleResize",value:function(){var ft=this.state.currentIndex;this.imageGallery&&(this.imageGallery&&this.imageGallery.current&&this.setState({galleryWidth:this.imageGallery.current.offsetWidth,galleryHeight:this.imageGallery.current.offsetHeight}),this.imageGallerySlideWrapper&&this.imageGallerySlideWrapper.current&&this.setState({gallerySlideWrapperHeight:this.imageGallerySlideWrapper.current.offsetHeight}),this.setThumbsTranslate(-this.getThumbsTranslate(ft)))}},{key:"initSlideWrapperResizeObserver",value:function(ft){var pt=this;ft&&!ft.current||(this.resizeSlideWrapperObserver=new ie$1(M(function(ht){ht&&ht.forEach(function(mt){pt.setState({thumbnailsWrapperWidth:mt.contentRect.width},pt.handleResize)})},50)),this.resizeSlideWrapperObserver.observe(ft.current))}},{key:"initThumbnailWrapperResizeObserver",value:function(ft){var pt=this;ft&&!ft.current||(this.resizeThumbnailWrapperObserver=new ie$1(M(function(ht){ht&&ht.forEach(function(mt){pt.setState({thumbnailsWrapperHeight:mt.contentRect.height},pt.handleResize)})},50)),this.resizeThumbnailWrapperObserver.observe(ft.current))}},{key:"toggleFullScreen",value:function(){this.state.isFullscreen?this.exitFullScreen():this.fullScreen()}},{key:"togglePlay",value:function(){this.playPauseIntervalId?this.pause():this.play()}},{key:"handleScreenChange",value:function(){var ft=this.props,pt=ft.onScreenChange,ht=ft.useBrowserFullscreen,mt=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,gt=this.imageGallery.current===mt;pt&&pt(gt),ht&&this.setState({isFullscreen:gt})}},{key:"slideToIndex",value:function(ft,pt){var ht=this.state,mt=ht.currentIndex,gt=ht.isTransitioning,vt=this.props,yt=vt.items,bt=vt.slideDuration,xt=vt.onBeforeSlide;if(!gt){pt&&this.playPauseIntervalId&&(this.pause(!1),this.play(!1));var St=yt.length-1,Et=ft;ft<0?Et=St:ft>St&&(Et=0),xt&&Et!==mt&&xt(Et),this.setState({previousIndex:mt,currentIndex:Et,isTransitioning:Et!==mt,currentSlideOffset:0,slideStyle:{transition:"all ".concat(bt,"ms ease-out")}},this.onSliding)}}},{key:"slideLeft",value:function(ft){var pt=this.props.isRTL;this.slideTo(ft,pt?"right":"left")}},{key:"slideRight",value:function(ft){var pt=this.props.isRTL;this.slideTo(ft,pt?"left":"right")}},{key:"slideTo",value:function(ft,pt){var ht=this.state,mt=ht.currentIndex,gt=ht.isTransitioning,vt=this.props.items,yt=mt+(pt==="left"?-1:1);gt||(vt.length===2?this.slideToIndexWithStyleReset(yt,ft):this.slideToIndex(yt,ft))}},{key:"slideToIndexWithStyleReset",value:function(ft,pt){var ht=this,mt=this.state,gt=mt.currentIndex,vt=mt.currentSlideOffset;this.setState({currentSlideOffset:vt+(gt>ft?.001:-.001),slideStyle:{transition:"none"}},function(){window.setTimeout(function(){return ht.slideToIndex(ft,pt)},25)})}},{key:"handleThumbnailMouseOver",value:function(ft,pt){this.props.slideOnThumbnailOver&&this.onThumbnailMouseOver(ft,pt)}},{key:"handleThumbnailKeyUp",value:function(ft,pt){st(ft)&&this.onThumbnailClick(ft,pt)}},{key:"handleSlideKeyUp",value:function(ft){st(ft)&&(0,this.props.onClick)(ft)}},{key:"isThumbnailVertical",value:function(){var ft=this.props.thumbnailPosition;return ft==="left"||ft==="right"}},{key:"addScreenChangeEvent",value:function(){var ft=this;at.forEach(function(pt){document.addEventListener(pt,ft.handleScreenChange)})}},{key:"removeScreenChangeEvent",value:function(){var ft=this;at.forEach(function(pt){document.removeEventListener(pt,ft.handleScreenChange)})}},{key:"fullScreen",value:function(){var ft=this.props.useBrowserFullscreen,pt=this.imageGallery.current;ft?pt.requestFullscreen?pt.requestFullscreen():pt.msRequestFullscreen?pt.msRequestFullscreen():pt.mozRequestFullScreen?pt.mozRequestFullScreen():pt.webkitRequestFullscreen?pt.webkitRequestFullscreen():this.setModalFullscreen(!0):this.setModalFullscreen(!0),this.setState({isFullscreen:!0})}},{key:"exitFullScreen",value:function(){var ft=this.state.isFullscreen,pt=this.props.useBrowserFullscreen;ft&&(pt?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this.setModalFullscreen(!1):this.setModalFullscreen(!1),this.setState({isFullscreen:!1}))}},{key:"pauseOrPlay",value:function(){var ft=this.props.infinite,pt=this.state.currentIndex;ft||this.canSlideRight()?this.slideToIndex(pt+1):this.pause()}},{key:"play",value:function(){var ft=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],pt=this.props,ht=pt.onPlay,mt=pt.slideInterval,gt=pt.slideDuration,vt=this.state.currentIndex;this.playPauseIntervalId||(this.setState({isPlaying:!0}),this.playPauseIntervalId=window.setInterval(this.pauseOrPlay,Math.max(mt,gt)),ht&&ft&&ht(vt))}},{key:"pause",value:function(){var ft=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],pt=this.props.onPause,ht=this.state.currentIndex;this.playPauseIntervalId&&(window.clearInterval(this.playPauseIntervalId),this.playPauseIntervalId=null,this.setState({isPlaying:!1}),pt&&ft&&pt(ht))}},{key:"isImageLoaded",value:function(ft){return!!this.loadedImages[ft.original]||(this.loadedImages[ft.original]=!0,!1)}},{key:"handleImageLoaded",value:function(ft,pt){var ht=this.props.onImageLoad;!this.loadedImages[pt]&&ht&&(this.loadedImages[pt]=!0,ht(ft))}},{key:"renderItem",value:function(ft){var pt=this.state.isFullscreen,ht=this.props.onImageError||this.handleImageError;return s.default.createElement(Se,{description:ft.description,fullscreen:ft.fullscreen,handleImageLoaded:this.handleImageLoaded,isFullscreen:pt,onImageError:ht,original:ft.original,originalAlt:ft.originalAlt,originalHeight:ft.originalHeight,originalWidth:ft.originalWidth,originalTitle:ft.originalTitle,sizes:ft.sizes,loading:ft.loading,srcSet:ft.srcSet})}},{key:"renderThumbInner",value:function(ft){var pt=this.props.onThumbnailError||this.handleImageError;return s.default.createElement("span",{className:"image-gallery-thumbnail-inner"},s.default.createElement("img",{className:"image-gallery-thumbnail-image",src:ft.thumbnail,height:ft.thumbnailHeight,width:ft.thumbnailWidth,alt:ft.thumbnailAlt,title:ft.thumbnailTitle,loading:ft.thumbnailLoading,onError:pt}),ft.thumbnailLabel&&s.default.createElement("div",{className:"image-gallery-thumbnail-label"},ft.thumbnailLabel))}},{key:"render",value:function(){var ft=this.state,pt=ft.currentIndex,ht=ft.isFullscreen,mt=ft.modalFullscreen,gt=ft.isPlaying,vt=this.props,yt=vt.additionalClass,bt=vt.disableThumbnailSwipe,xt=vt.indexSeparator,St=vt.isRTL,Et=vt.items,Ct=vt.thumbnailPosition,wt=vt.renderFullscreenButton,Rt=vt.renderCustomControls,Tt=vt.renderLeftNav,Pt=vt.renderRightNav,$t=vt.renderTopNav,_t=vt.renderBottomNav,It=vt.showBullets,At=vt.showFullscreenButton,Ot=vt.showIndex,kt=vt.showThumbnails,Mt=vt.showNav,jt=vt.showPlayButton,Nt=vt.slideVertically,Lt=vt.renderPlayPauseButton,Dt=this.getThumbnailStyle(),Bt=this.getSlideItems(),Ht=Bt.slides,Wt=Bt.thumbnails,zt=Bt.bullets,Ut=o("image-gallery-slide-wrapper",this.getThumbnailPositionClassName(Ct),{"image-gallery-rtl":St}),qt=o("image-gallery-bullets",{"image-gallery-bullets-vertical":Nt}),Gt=s.default.createElement("div",{ref:this.imageGallerySlideWrapper,className:Ut},Rt&&Rt(),this.canSlide()?s.default.createElement(s.default.Fragment,null,Mt&&s.default.createElement(s.default.Fragment,null,Nt?$t(this.slideLeft,!this.canSlideLeft()):Tt(this.slideLeft,!this.canSlideLeft()),Nt?_t(this.slideRight,!this.canSlideRight()):Pt(this.slideRight,!this.canSlideRight())),s.default.createElement(He$1,{className:"image-gallery-swipe",delta:0,onSwiping:this.handleSwiping,onSwiped:this.handleOnSwiped},s.default.createElement("div",{className:"image-gallery-slides"},Ht))):s.default.createElement("div",{className:"image-gallery-slides"},Ht),jt&&Lt(this.togglePlay,gt),It&&s.default.createElement("div",{className:qt},s.default.createElement("div",{className:"image-gallery-bullets-container",role:"navigation","aria-label":"Bullet Navigation"},zt)),At&&wt(this.toggleFullScreen,ht),Ot&&s.default.createElement("div",{className:"image-gallery-index"},s.default.createElement("span",{className:"image-gallery-index-current"},pt+1),s.default.createElement("span",{className:"image-gallery-index-separator"},xt),s.default.createElement("span",{className:"image-gallery-index-total"},Et.length))),Kt=o("image-gallery",yt,{"fullscreen-modal":mt}),Jt=o("image-gallery-content",this.getThumbnailPositionClassName(Ct),{fullscreen:ht}),Qt=o("image-gallery-thumbnails-wrapper",this.getThumbnailPositionClassName(Ct),{"thumbnails-wrapper-rtl":!this.isThumbnailVertical()&&St},{"thumbnails-swipe-horizontal":!this.isThumbnailVertical()&&!bt},{"thumbnails-swipe-vertical":this.isThumbnailVertical()&&!bt});return s.default.createElement("div",{ref:this.imageGallery,className:Kt,"aria-live":"polite"},s.default.createElement("div",{className:Jt},(Ct==="bottom"||Ct==="right")&&Gt,kt&&Wt.length>0?s.default.createElement(He$1,{className:Qt,delta:0,onSwiping:!bt&&this.handleThumbnailSwiping,onSwiped:!bt&&this.handleOnThumbnailSwiped},s.default.createElement("div",{className:"image-gallery-thumbnails",ref:this.thumbnailsWrapper,style:this.getThumbnailBarHeight()},s.default.createElement("nav",{ref:this.thumbnails,className:"image-gallery-thumbnails-container",style:Dt,"aria-label":"Thumbnail Navigation"},Wt))):null,(Ct==="top"||Ct==="left")&&Gt))}}])}();lt.propTypes={flickThreshold:pe.number,items:(0,pe.arrayOf)((0,pe.shape)({bulletClass:pe.string,bulletOnClick:pe.func,description:pe.string,original:pe.string,originalHeight:pe.number,originalWidth:pe.number,loading:pe.string,thumbnailHeight:pe.number,thumbnailWidth:pe.number,thumbnailLoading:pe.string,fullscreen:pe.string,originalAlt:pe.string,originalTitle:pe.string,thumbnail:pe.string,thumbnailAlt:pe.string,thumbnailLabel:pe.string,thumbnailTitle:pe.string,originalClass:pe.string,thumbnailClass:pe.string,renderItem:pe.func,renderThumbInner:pe.func,imageSet:ot,srcSet:pe.string,sizes:pe.string})).isRequired,showNav:pe.bool,autoPlay:pe.bool,lazyLoad:pe.bool,infinite:pe.bool,showIndex:pe.bool,showBullets:pe.bool,showThumbnails:pe.bool,showPlayButton:pe.bool,showFullscreenButton:pe.bool,disableThumbnailScroll:pe.bool,disableKeyDown:pe.bool,disableSwipe:pe.bool,disableThumbnailSwipe:pe.bool,useBrowserFullscreen:pe.bool,onErrorImageURL:pe.string,indexSeparator:pe.string,thumbnailPosition:(0,pe.oneOf)(["top","bottom","left","right"]),startIndex:pe.number,slideDuration:pe.number,slideInterval:pe.number,slideOnThumbnailOver:pe.bool,swipeThreshold:pe.number,swipingTransitionDuration:pe.number,swipingThumbnailTransitionDuration:pe.number,onSlide:pe.func,onBeforeSlide:pe.func,onScreenChange:pe.func,onPause:pe.func,onPlay:pe.func,onClick:pe.func,onImageLoad:pe.func,onImageError:pe.func,onTouchMove:pe.func,onTouchEnd:pe.func,onTouchStart:pe.func,onMouseOver:pe.func,onMouseLeave:pe.func,onBulletClick:pe.func,onThumbnailError:pe.func,onThumbnailClick:pe.func,renderCustomControls:pe.func,renderLeftNav:pe.func,renderRightNav:pe.func,renderTopNav:pe.func,renderBottomNav:pe.func,renderPlayPauseButton:pe.func,renderFullscreenButton:pe.func,renderItem:pe.func,renderThumbInner:pe.func,stopPropagation:pe.bool,additionalClass:pe.string,useTranslate3D:pe.bool,isRTL:pe.bool,useWindowKeyDown:pe.bool,slideVertically:pe.bool},lt.defaultProps={onErrorImageURL:"",additionalClass:"",showNav:!0,autoPlay:!1,lazyLoad:!1,infinite:!0,showIndex:!1,showBullets:!1,showThumbnails:!0,showPlayButton:!0,showFullscreenButton:!0,disableThumbnailScroll:!1,disableKeyDown:!1,disableSwipe:!1,disableThumbnailSwipe:!1,useTranslate3D:!0,isRTL:!1,useBrowserFullscreen:!0,flickThreshold:.4,stopPropagation:!1,indexSeparator:" / ",thumbnailPosition:"bottom",startIndex:0,slideDuration:450,swipingTransitionDuration:0,swipingThumbnailTransitionDuration:0,onSlide:null,onBeforeSlide:null,onScreenChange:null,onPause:null,onPlay:null,onClick:null,onImageLoad:null,onImageError:null,onTouchMove:null,onTouchEnd:null,onTouchStart:null,onMouseOver:null,onMouseLeave:null,onBulletClick:null,onThumbnailError:null,onThumbnailClick:null,renderCustomControls:null,renderThumbInner:null,renderItem:null,slideInterval:3e3,slideOnThumbnailOver:!1,swipeThreshold:30,slideVertically:!1,renderLeftNav:function(dt,ft){return s.default.createElement(Me$1,{onClick:dt,disabled:ft})},renderRightNav:function(dt,ft){return s.default.createElement(Ce$1,{onClick:dt,disabled:ft})},renderTopNav:function(dt,ft){return s.default.createElement(Ke,{onClick:dt,disabled:ft})},renderBottomNav:function(dt,ft){return s.default.createElement(Ye,{onClick:dt,disabled:ft})},renderPlayPauseButton:function(dt,ft){return s.default.createElement(Ne,{onClick:dt,isPlaying:ft})},renderFullscreenButton:function(dt,ft){return s.default.createElement(Re,{onClick:dt,isFullscreen:ft})},useWindowKeyDown:!0};const ut=lt;var ct=r.A;const ImagePreview=({url:dt,fileName:ft})=>{const pt=[{original:dt,thumbnail:dt,description:ft}];return jsxRuntimeExports.jsx("div",{style:{maxWidth:"100%",maxHeight:"600px"},children:jsxRuntimeExports.jsx(ct,{items:pt,showThumbnails:!1,showPlayButton:!1,showFullscreenButton:!0,showNav:!1,showBullets:!1})})},scriptRel="modulepreload",assetsURL=function(dt){return"/core/ui/dist/"+dt},seen={},__vitePreload=function(ft,pt,ht){let mt=Promise.resolve();if(pt&&pt.length>0){document.getElementsByTagName("link");const vt=document.querySelector("meta[property=csp-nonce]"),yt=(vt==null?void 0:vt.nonce)||(vt==null?void 0:vt.getAttribute("nonce"));mt=Promise.allSettled(pt.map(bt=>{if(bt=assetsURL(bt),bt in seen)return;seen[bt]=!0;const xt=bt.endsWith(".css"),St=xt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${bt}"]${St}`))return;const Et=document.createElement("link");if(Et.rel=xt?"stylesheet":scriptRel,xt||(Et.as="script"),Et.crossOrigin="",Et.href=bt,yt&&Et.setAttribute("nonce",yt),document.head.appendChild(Et),xt)return new Promise((Ct,wt)=>{Et.addEventListener("load",Ct),Et.addEventListener("error",()=>wt(new Error(`Unable to preload CSS for ${bt}`)))})}))}function gt(vt){const yt=new Event("vite:preloadError",{cancelable:!0});if(yt.payload=vt,window.dispatchEvent(yt),!yt.defaultPrevented)throw vt}return mt.then(vt=>{for(const yt of vt||[])yt.status==="rejected"&&gt(yt.reason);return ft().catch(gt)})},AUDIO_EXTENSIONS=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,VIDEO_EXTENSIONS=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,HLS_EXTENSIONS=/\.(m3u8)($|\?)/i,DASH_EXTENSIONS=/\.(mpd)($|\?)/i,MATCH_URL_MUX=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,MATCH_URL_YOUTUBE=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,MATCH_URL_VIMEO=/vimeo\.com\/(?!progressive_redirect).+/,MATCH_URL_WISTIA=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,MATCH_URL_SPOTIFY=/open\.spotify\.com\/(\w+)\/(\w+)/i,MATCH_URL_TWITCH=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,MATCH_URL_TIKTOK=/tiktok\.com\/(?:@[^/]+\/video\/)?(\d+)(?:\/([\w-]+))?/,canPlayFile=(dt,ft)=>{if(Array.isArray(dt)){for(const pt of dt)if(typeof pt=="string"&&canPlayFile(pt,ft)||canPlayFile(pt.src,ft))return!0;return!1}return ft(dt)},canPlay={html:dt=>canPlayFile(dt,ft=>AUDIO_EXTENSIONS.test(ft)||VIDEO_EXTENSIONS.test(ft)),hls:dt=>canPlayFile(dt,ft=>HLS_EXTENSIONS.test(ft)),dash:dt=>canPlayFile(dt,ft=>DASH_EXTENSIONS.test(ft)),mux:dt=>MATCH_URL_MUX.test(dt),youtube:dt=>MATCH_URL_YOUTUBE.test(dt),vimeo:dt=>MATCH_URL_VIMEO.test(dt)&&!VIDEO_EXTENSIONS.test(dt)&&!HLS_EXTENSIONS.test(dt),wistia:dt=>MATCH_URL_WISTIA.test(dt),spotify:dt=>MATCH_URL_SPOTIFY.test(dt),twitch:dt=>MATCH_URL_TWITCH.test(dt),tiktok:dt=>MATCH_URL_TIKTOK.test(dt)},HtmlPlayer=React.forwardRef((dt,ft)=>{const pt=AUDIO_EXTENSIONS.test(`${dt.src}`)?"audio":"video";return React.createElement(pt,{...dt,ref:ft},dt.children)});var HtmlPlayer_default=HtmlPlayer;const Players=[{key:"hls",name:"hls.js",canPlay:canPlay.hls,canEnablePIP:()=>!0,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-BilFBcem.js"),__vite__mapDeps([0,1,2])))},{key:"dash",name:"dash.js",canPlay:canPlay.dash,canEnablePIP:()=>!0,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-BUvOqnEb.js"),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:canPlay.mux,canEnablePIP:()=>!0,player:reactExports.lazy(()=>__vitePreload(()=>import("./index-Co1KJQsM.js"),__vite__mapDeps([4,2,1])))},{key:"youtube",name:"YouTube",canPlay:canPlay.youtube,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-Ct7Y_7ss.js"),[]))},{key:"vimeo",name:"Vimeo",canPlay:canPlay.vimeo,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-m4uuY2_d.js"),[]))},{key:"wistia",name:"Wistia",canPlay:canPlay.wistia,canEnablePIP:()=>!0,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-CG-WfVLW.js"),[]))},{key:"spotify",name:"Spotify",canPlay:canPlay.spotify,canEnablePIP:()=>!1,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-CZ88g3bj.js"),[]))},{key:"twitch",name:"Twitch",canPlay:canPlay.twitch,canEnablePIP:()=>!1,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-GGOf0GCE.js"),[]))},{key:"tiktok",name:"TikTok",canPlay:canPlay.tiktok,canEnablePIP:()=>!1,player:reactExports.lazy(()=>__vitePreload(()=>import("./react-DjDnBTGj.js"),[]))},{key:"html",name:"html",canPlay:canPlay.html,canEnablePIP:()=>!0,player:HtmlPlayer_default}];var players_default=Players;const defaultProps={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},Player=React.forwardRef((dt,ft)=>{const{playing:pt,pip:ht}=dt,mt=dt.activePlayer,gt=reactExports.useRef(null),vt=reactExports.useRef(!0);reactExports.useEffect(()=>{var St,Et;gt.current&&(gt.current.paused&&pt===!0&&gt.current.play(),!gt.current.paused&&pt===!1&&gt.current.pause(),gt.current.playbackRate=(St=dt.playbackRate)!=null?St:1,gt.current.volume=(Et=dt.volume)!=null?Et:1)}),reactExports.useEffect(()=>{var St,Et,Ct,wt,Rt;if(!(!gt.current||!globalThis.document)){if(ht&&!document.pictureInPictureElement)try{(Et=(St=gt.current).requestPictureInPicture)==null||Et.call(St)}catch{}if(!ht&&document.pictureInPictureElement)try{(wt=(Ct=gt.current).exitPictureInPicture)==null||wt.call(Ct),(Rt=document.exitPictureInPicture)==null||Rt.call(document)}catch{}}},[ht]);const yt=St=>{var Et,Ct;vt.current=!0,(Et=dt.onReady)==null||Et.call(dt),(Ct=dt.onLoadStart)==null||Ct.call(dt,St)},bt=St=>{var Et,Ct;vt.current&&(vt.current=!1,(Et=dt.onStart)==null||Et.call(dt,St)),(Ct=dt.onPlay)==null||Ct.call(dt,St)};if(!mt)return null;const xt={};for(const St in dt)St.startsWith("on")&&(xt[St]=dt[St]);return React.createElement(mt,{...xt,style:dt.style,className:dt.className,slot:dt.slot,ref:reactExports.useCallback(St=>{gt.current=St,typeof ft=="function"?ft(St):ft!==null&&(ft.current=St)},[ft]),src:dt.src,crossOrigin:dt.crossOrigin,preload:dt.preload,controls:dt.controls,muted:dt.muted,autoPlay:dt.autoPlay,loop:dt.loop,playsInline:dt.playsInline,config:dt.config,onLoadStart:yt,onPlay:bt},dt.children)});Player.displayName="Player";var Player_default=Player;const Preview=reactExports.lazy(()=>__vitePreload(()=>import("./Preview-DN9n8Cu_.js"),[])),customPlayers=[],createReactPlayer=(dt,ft)=>{const pt=mt=>{for(const gt of[...customPlayers,...dt])if(mt&&gt.canPlay(mt))return gt;return ft||null},ht=React.forwardRef((mt,gt)=>{const vt={...defaultProps,...mt},{src:yt,slot:bt,className:xt,style:St,width:Et,height:Ct,fallback:wt,wrapper:Rt}=vt,[Tt,Pt]=reactExports.useState(!!vt.light);reactExports.useEffect(()=>{vt.light?Pt(!0):Pt(!1)},[vt.light]);const $t=kt=>{var Mt;Pt(!1),(Mt=vt.onClickPreview)==null||Mt.call(vt,kt)},_t=kt=>{if(!kt)return null;const{light:Mt,playIcon:jt,previewTabIndex:Nt,oEmbedUrl:Lt,previewAriaLabel:Dt}=vt;return React.createElement(Preview,{src:kt,light:Mt,playIcon:jt,previewTabIndex:Nt,previewAriaLabel:Dt,oEmbedUrl:Lt,onClickPreview:$t})},It=kt=>{var Mt,jt;const Nt=pt(kt);if(!Nt)return null;const{style:Lt,width:Dt,height:Bt,wrapper:Ht}=vt,Wt=(Mt=vt.config)==null?void 0:Mt[Nt.key];return React.createElement(Player_default,{...vt,ref:gt,activePlayer:(jt=Nt.player)!=null?jt:Nt,slot:Ht?void 0:bt,className:Ht?void 0:xt,style:Ht?{display:"block",width:"100%",height:"100%"}:{display:"block",width:Dt,height:Bt,...Lt},config:Wt})},At=Rt??ForwardChildren,Ot=wt===!1?ForwardChildren:reactExports.Suspense;return React.createElement(At,{slot:bt,className:xt,style:{width:Et,height:Ct,...St}},React.createElement(Ot,{fallback:wt},Tt?_t(yt):It(yt)))});return ht.displayName="ReactPlayer",ht.addCustomPlayer=mt=>{customPlayers.push(mt)},ht.removeCustomPlayers=()=>{customPlayers.length=0},ht.canPlay=mt=>{if(mt){for(const gt of[...customPlayers,...dt])if(gt.canPlay(mt))return!0}return!1},ht.canEnablePIP=mt=>{var gt;if(mt){for(const vt of[...customPlayers,...dt])if(vt.canPlay(mt)&&((gt=vt.canEnablePIP)!=null&&gt.call(vt)))return!0}return!1},ht},ForwardChildren=({children:dt})=>dt,fallback=players_default[players_default.length-1];var src_default=createReactPlayer(players_default,fallback);const VideoPreview=({url:dt,fileName:ft})=>jsxRuntimeExports.jsxs("div",{style:{maxWidth:"100%",textAlign:"center"},children:[jsxRuntimeExports.jsx("h4",{style:{marginBottom:"16px"},children:ft}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"400px"},children:jsxRuntimeExports.jsx(src_default,{url:dt,controls:!0})})]});var lib={exports:{}},core_min={};function commonjsRequire(dt){throw new Error('Could not dynamically require "'+dt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(ft,pt){module.exports=ft.pdfjsLib=pt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(dt,ft)=>{var Ar;Object.defineProperty(ft,"__esModule",{value:!0}),ft.VerbosityLevel=ft.Util=ft.UnknownErrorException=ft.UnexpectedResponseException=ft.TextRenderingMode=ft.RenderingIntentFlag=ft.PromiseCapability=ft.PermissionFlag=ft.PasswordResponses=ft.PasswordException=ft.PageActionEventType=ft.OPS=ft.MissingPDFException=ft.MAX_IMAGE_SIZE_TO_CACHE=ft.LINE_FACTOR=ft.LINE_DESCENT_FACTOR=ft.InvalidPDFException=ft.ImageKind=ft.IDENTITY_MATRIX=ft.FormatError=ft.FeatureTest=ft.FONT_IDENTITY_MATRIX=ft.DocumentActionEventType=ft.CMapCompressionType=ft.BaseException=ft.BASELINE_FACTOR=ft.AnnotationType=ft.AnnotationReplyType=ft.AnnotationPrefix=ft.AnnotationMode=ft.AnnotationFlag=ft.AnnotationFieldFlag=ft.AnnotationEditorType=ft.AnnotationEditorPrefix=ft.AnnotationEditorParamsType=ft.AnnotationBorderStyleType=ft.AnnotationActionEventType=ft.AbortException=void 0,ft.assert=Kt,ft.bytesToString=sr,ft.createValidAbsoluteUrl=Qt,ft.getModificationDate=Wr,ft.getUuid=Or,ft.getVerbosityLevel=zt,ft.info=Ut,ft.isArrayBuffer=Er,ft.isArrayEqual=Nr,ft.isNodeJS=void 0,ft.normalizeUnicode=Hr,ft.objectFromMap=yr,ft.objectSize=fr,ft.setVerbosityLevel=Wt,ft.shadow=Xt,ft.string32=ur,ft.stringToBytes=ir,ft.stringToPDFString=wr,ft.stringToUTF8String=Rr,ft.unreachable=Gt,ft.utf8StringToString=Pr,ft.warn=qt;const pt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");ft.isNodeJS=pt;const ht=[1,0,0,1,0,0];ft.IDENTITY_MATRIX=ht;const mt=[.001,0,0,.001,0,0];ft.FONT_IDENTITY_MATRIX=mt;const gt=1e7;ft.MAX_IMAGE_SIZE_TO_CACHE=gt;const vt=1.35;ft.LINE_FACTOR=vt;const yt=.35;ft.LINE_DESCENT_FACTOR=yt;const bt=yt/vt;ft.BASELINE_FACTOR=bt;const xt={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};ft.RenderingIntentFlag=xt;const St={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};ft.AnnotationMode=St;const Et="pdfjs_internal_editor_";ft.AnnotationEditorPrefix=Et;const Ct={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};ft.AnnotationEditorType=Ct;const wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};ft.AnnotationEditorParamsType=wt;const Rt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};ft.PermissionFlag=Rt;const Tt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};ft.TextRenderingMode=Tt;const Pt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};ft.ImageKind=Pt;const $t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};ft.AnnotationType=$t;const _t={GROUP:"Group",REPLY:"R"};ft.AnnotationReplyType=_t;const It={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};ft.AnnotationFlag=It;const At={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};ft.AnnotationFieldFlag=At;const Ot={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};ft.AnnotationBorderStyleType=Ot;const kt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};ft.AnnotationActionEventType=kt;const Mt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};ft.DocumentActionEventType=Mt;const jt={O:"PageOpen",C:"PageClose"};ft.PageActionEventType=jt;const Nt={ERRORS:0,WARNINGS:1,INFOS:5};ft.VerbosityLevel=Nt;const Lt={NONE:0,BINARY:1};ft.CMapCompressionType=Lt;const Dt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};ft.OPS=Dt;const Bt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};ft.PasswordResponses=Bt;let Ht=Nt.WARNINGS;function Wt(Cr){Number.isInteger(Cr)&&(Ht=Cr)}function zt(){return Ht}function Ut(Cr){Ht>=Nt.INFOS&&console.log(`Info: ${Cr}`)}function qt(Cr){Ht>=Nt.WARNINGS&&console.log(`Warning: ${Cr}`)}function Gt(Cr){throw new Error(Cr)}function Kt(Cr,Sr){Cr||Gt(Sr)}function Jt(Cr){switch(Cr==null?void 0:Cr.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Qt(Cr,Sr=null,vr=null){if(!Cr)return null;try{if(vr&&typeof Cr=="string"){if(vr.addDefaultProtocol&&Cr.startsWith("www.")){const on=Cr.match(/\./g);(on==null?void 0:on.length)>=2&&(Cr=`http://${Cr}`)}if(vr.tryConvertEncoding)try{Cr=Rr(Cr)}catch{}}const Br=Sr?new URL(Cr,Sr):new URL(Cr);if(Jt(Br))return Br}catch{}return null}function Xt(Cr,Sr,vr,Br=!1){return Object.defineProperty(Cr,Sr,{value:vr,enumerable:!Br,configurable:!0,writable:!1}),vr}const Ft=function(){function Sr(vr,Br){this.constructor===Sr&&Gt("Cannot initialize BaseException."),this.message=vr,this.name=Br}return Sr.prototype=new Error,Sr.constructor=Sr,Sr}();ft.BaseException=Ft;class Vt extends Ft{constructor(Sr,vr){super(Sr,"PasswordException"),this.code=vr}}ft.PasswordException=Vt;class Yt extends Ft{constructor(Sr,vr){super(Sr,"UnknownErrorException"),this.details=vr}}ft.UnknownErrorException=Yt;class er extends Ft{constructor(Sr){super(Sr,"InvalidPDFException")}}ft.InvalidPDFException=er;class tr extends Ft{constructor(Sr){super(Sr,"MissingPDFException")}}ft.MissingPDFException=tr;class Zt extends Ft{constructor(Sr,vr){super(Sr,"UnexpectedResponseException"),this.status=vr}}ft.UnexpectedResponseException=Zt;class ar extends Ft{constructor(Sr){super(Sr,"FormatError")}}ft.FormatError=ar;class cr extends Ft{constructor(Sr){super(Sr,"AbortException")}}ft.AbortException=cr;function sr(Cr){(typeof Cr!="object"||(Cr==null?void 0:Cr.length)===void 0)&&Gt("Invalid argument for bytesToString");const Sr=Cr.length,vr=8192;if(Sr<vr)return String.fromCharCode.apply(null,Cr);const Br=[];for(let on=0;on<Sr;on+=vr){const pn=Math.min(on+vr,Sr),$r=Cr.subarray(on,pn);Br.push(String.fromCharCode.apply(null,$r))}return Br.join("")}function ir(Cr){typeof Cr!="string"&&Gt("Invalid argument for stringToBytes");const Sr=Cr.length,vr=new Uint8Array(Sr);for(let Br=0;Br<Sr;++Br)vr[Br]=Cr.charCodeAt(Br)&255;return vr}function ur(Cr){return String.fromCharCode(Cr>>24&255,Cr>>16&255,Cr>>8&255,Cr&255)}function fr(Cr){return Object.keys(Cr).length}function yr(Cr){const Sr=Object.create(null);for(const[vr,Br]of Cr)Sr[vr]=Br;return Sr}function lr(){const Cr=new Uint8Array(4);return Cr[0]=1,new Uint32Array(Cr.buffer,0,1)[0]===1}function gr(){try{return new Function(""),!0}catch{return!1}}class or{static get isLittleEndian(){return Xt(this,"isLittleEndian",lr())}static get isEvalSupported(){return Xt(this,"isEvalSupported",gr())}static get isOffscreenCanvasSupported(){return Xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Xt(this,"platform",{isWin:!1,isMac:!1}):Xt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Sr,vr;return Xt(this,"isCSSRoundSupported",(vr=(Sr=globalThis.CSS)==null?void 0:Sr.supports)==null?void 0:vr.call(Sr,"width: round(1.5px, 1px)"))}}ft.FeatureTest=or;const dr=[...Array(256).keys()].map(Cr=>Cr.toString(16).padStart(2,"0"));class xr{static makeHexColor(Sr,vr,Br){return`#${dr[Sr]}${dr[vr]}${dr[Br]}`}static scaleMinMax(Sr,vr){let Br;Sr[0]?(Sr[0]<0&&(Br=vr[0],vr[0]=vr[1],vr[1]=Br),vr[0]*=Sr[0],vr[1]*=Sr[0],Sr[3]<0&&(Br=vr[2],vr[2]=vr[3],vr[3]=Br),vr[2]*=Sr[3],vr[3]*=Sr[3]):(Br=vr[0],vr[0]=vr[2],vr[2]=Br,Br=vr[1],vr[1]=vr[3],vr[3]=Br,Sr[1]<0&&(Br=vr[2],vr[2]=vr[3],vr[3]=Br),vr[2]*=Sr[1],vr[3]*=Sr[1],Sr[2]<0&&(Br=vr[0],vr[0]=vr[1],vr[1]=Br),vr[0]*=Sr[2],vr[1]*=Sr[2]),vr[0]+=Sr[4],vr[1]+=Sr[4],vr[2]+=Sr[5],vr[3]+=Sr[5]}static transform(Sr,vr){return[Sr[0]*vr[0]+Sr[2]*vr[1],Sr[1]*vr[0]+Sr[3]*vr[1],Sr[0]*vr[2]+Sr[2]*vr[3],Sr[1]*vr[2]+Sr[3]*vr[3],Sr[0]*vr[4]+Sr[2]*vr[5]+Sr[4],Sr[1]*vr[4]+Sr[3]*vr[5]+Sr[5]]}static applyTransform(Sr,vr){const Br=Sr[0]*vr[0]+Sr[1]*vr[2]+vr[4],on=Sr[0]*vr[1]+Sr[1]*vr[3]+vr[5];return[Br,on]}static applyInverseTransform(Sr,vr){const Br=vr[0]*vr[3]-vr[1]*vr[2],on=(Sr[0]*vr[3]-Sr[1]*vr[2]+vr[2]*vr[5]-vr[4]*vr[3])/Br,pn=(-Sr[0]*vr[1]+Sr[1]*vr[0]+vr[4]*vr[1]-vr[5]*vr[0])/Br;return[on,pn]}static getAxialAlignedBoundingBox(Sr,vr){const Br=this.applyTransform(Sr,vr),on=this.applyTransform(Sr.slice(2,4),vr),pn=this.applyTransform([Sr[0],Sr[3]],vr),$r=this.applyTransform([Sr[2],Sr[1]],vr);return[Math.min(Br[0],on[0],pn[0],$r[0]),Math.min(Br[1],on[1],pn[1],$r[1]),Math.max(Br[0],on[0],pn[0],$r[0]),Math.max(Br[1],on[1],pn[1],$r[1])]}static inverseTransform(Sr){const vr=Sr[0]*Sr[3]-Sr[1]*Sr[2];return[Sr[3]/vr,-Sr[1]/vr,-Sr[2]/vr,Sr[0]/vr,(Sr[2]*Sr[5]-Sr[4]*Sr[3])/vr,(Sr[4]*Sr[1]-Sr[5]*Sr[0])/vr]}static singularValueDecompose2dScale(Sr){const vr=[Sr[0],Sr[2],Sr[1],Sr[3]],Br=Sr[0]*vr[0]+Sr[1]*vr[2],on=Sr[0]*vr[1]+Sr[1]*vr[3],pn=Sr[2]*vr[0]+Sr[3]*vr[2],$r=Sr[2]*vr[1]+Sr[3]*vr[3],Mr=(Br+$r)/2,Gr=Math.sqrt((Br+$r)**2-4*(Br*$r-pn*on))/2,un=Mr+Gr||1,Qr=Mr-Gr||1;return[Math.sqrt(un),Math.sqrt(Qr)]}static normalizeRect(Sr){const vr=Sr.slice(0);return Sr[0]>Sr[2]&&(vr[0]=Sr[2],vr[2]=Sr[0]),Sr[1]>Sr[3]&&(vr[1]=Sr[3],vr[3]=Sr[1]),vr}static intersect(Sr,vr){const Br=Math.max(Math.min(Sr[0],Sr[2]),Math.min(vr[0],vr[2])),on=Math.min(Math.max(Sr[0],Sr[2]),Math.max(vr[0],vr[2]));if(Br>on)return null;const pn=Math.max(Math.min(Sr[1],Sr[3]),Math.min(vr[1],vr[3])),$r=Math.min(Math.max(Sr[1],Sr[3]),Math.max(vr[1],vr[3]));return pn>$r?null:[Br,pn,on,$r]}static bezierBoundingBox(Sr,vr,Br,on,pn,$r,Mr,Gr){const un=[],Qr=[[],[]];let tn,br,hr,_r,kr,Lr,jr,zr;for(let mn=0;mn<2;++mn){if(mn===0?(br=6*Sr-12*Br+6*pn,tn=-3*Sr+9*Br-9*pn+3*Mr,hr=3*Br-3*Sr):(br=6*vr-12*on+6*$r,tn=-3*vr+9*on-9*$r+3*Gr,hr=3*on-3*vr),Math.abs(tn)<1e-12){if(Math.abs(br)<1e-12)continue;_r=-hr/br,0<_r&&_r<1&&un.push(_r);continue}jr=br*br-4*hr*tn,zr=Math.sqrt(jr),!(jr<0)&&(kr=(-br+zr)/(2*tn),0<kr&&kr<1&&un.push(kr),Lr=(-br-zr)/(2*tn),0<Lr&&Lr<1&&un.push(Lr))}let fn=un.length,ln;const rn=fn;for(;fn--;)_r=un[fn],ln=1-_r,Qr[0][fn]=ln*ln*ln*Sr+3*ln*ln*_r*Br+3*ln*_r*_r*pn+_r*_r*_r*Mr,Qr[1][fn]=ln*ln*ln*vr+3*ln*ln*_r*on+3*ln*_r*_r*$r+_r*_r*_r*Gr;return Qr[0][rn]=Sr,Qr[1][rn]=vr,Qr[0][rn+1]=Mr,Qr[1][rn+1]=Gr,Qr[0].length=Qr[1].length=rn+2,[Math.min(...Qr[0]),Math.min(...Qr[1]),Math.max(...Qr[0]),Math.max(...Qr[1])]}}ft.Util=xr;const pr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function wr(Cr){if(Cr[0]>="ï"){let vr;if(Cr[0]==="þ"&&Cr[1]==="ÿ"?vr="utf-16be":Cr[0]==="ÿ"&&Cr[1]==="þ"?vr="utf-16le":Cr[0]==="ï"&&Cr[1]==="»"&&Cr[2]==="¿"&&(vr="utf-8"),vr)try{const Br=new TextDecoder(vr,{fatal:!0}),on=ir(Cr);return Br.decode(on)}catch(Br){qt(`stringToPDFString: "${Br}".`)}}const Sr=[];for(let vr=0,Br=Cr.length;vr<Br;vr++){const on=pr[Cr.charCodeAt(vr)];Sr.push(on?String.fromCharCode(on):Cr.charAt(vr))}return Sr.join("")}function Rr(Cr){return decodeURIComponent(escape(Cr))}function Pr(Cr){return unescape(encodeURIComponent(Cr))}function Er(Cr){return typeof Cr=="object"&&(Cr==null?void 0:Cr.byteLength)!==void 0}function Nr(Cr,Sr){if(Cr.length!==Sr.length)return!1;for(let vr=0,Br=Cr.length;vr<Br;vr++)if(Cr[vr]!==Sr[vr])return!1;return!0}function Wr(Cr=new Date){return[Cr.getUTCFullYear().toString(),(Cr.getUTCMonth()+1).toString().padStart(2,"0"),Cr.getUTCDate().toString().padStart(2,"0"),Cr.getUTCHours().toString().padStart(2,"0"),Cr.getUTCMinutes().toString().padStart(2,"0"),Cr.getUTCSeconds().toString().padStart(2,"0")].join("")}class an{constructor(){en(this,Ar,!1);this.promise=new Promise((Sr,vr)=>{this.resolve=Br=>{nn(this,Ar,!0),Sr(Br)},this.reject=Br=>{nn(this,Ar,!0),vr(Br)}})}get settled(){return rr(this,Ar)}}Ar=new WeakMap,ft.PromiseCapability=an;let Kr=null,sn=null;function Hr(Cr){return Kr||(Kr=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,sn=new Map([["ﬅ","ſt"]])),Cr.replaceAll(Kr,(Sr,vr,Br)=>vr?vr.normalize("NFKC"):sn.get(Br))}function Or(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Cr=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Cr);else for(let Sr=0;Sr<32;Sr++)Cr[Sr]=Math.floor(Math.random()*255);return sr(Cr)}const Yr="pdfjs_internal_id_";ft.AnnotationPrefix=Yr},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var dt,pt,ht,mt,Is,Ys,yt,bt,xt,St,Et,Ct,wt,Rt,Tt,Js,$t,_t,Bl,At,Ot;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Mt){if(typeof Mt=="string"||Mt instanceof URL?Mt={url:Mt}:(0,_util.isArrayBuffer)(Mt)&&(Mt={data:Mt}),typeof Mt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Mt.url&&!Mt.data&&!Mt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const jt=new PDFDocumentLoadingTask,{docId:Nt}=jt,Lt=Mt.url?getUrlProp(Mt.url):null,Dt=Mt.data?getDataProp(Mt.data):null,Bt=Mt.httpHeaders||null,Ht=Mt.withCredentials===!0,Wt=Mt.password??null,zt=Mt.range instanceof PDFDataRangeTransport?Mt.range:null,Ut=Number.isInteger(Mt.rangeChunkSize)&&Mt.rangeChunkSize>0?Mt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let qt=Mt.worker instanceof PDFWorker?Mt.worker:null;const Gt=Mt.verbosity,Kt=typeof Mt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Mt.docBaseUrl)?Mt.docBaseUrl:null,Jt=typeof Mt.cMapUrl=="string"?Mt.cMapUrl:null,Qt=Mt.cMapPacked!==!1,Xt=Mt.CMapReaderFactory||DefaultCMapReaderFactory,Ft=typeof Mt.standardFontDataUrl=="string"?Mt.standardFontDataUrl:null,Vt=Mt.StandardFontDataFactory||DefaultStandardFontDataFactory,Yt=Mt.stopAtErrors!==!0,er=Number.isInteger(Mt.maxImageSize)&&Mt.maxImageSize>-1?Mt.maxImageSize:-1,tr=Mt.isEvalSupported!==!1,Zt=typeof Mt.isOffscreenCanvasSupported=="boolean"?Mt.isOffscreenCanvasSupported:!_util.isNodeJS,ar=Number.isInteger(Mt.canvasMaxAreaInBytes)?Mt.canvasMaxAreaInBytes:-1,cr=typeof Mt.disableFontFace=="boolean"?Mt.disableFontFace:_util.isNodeJS,sr=Mt.fontExtraProperties===!0,ir=Mt.enableXfa===!0,ur=Mt.ownerDocument||globalThis.document,fr=Mt.disableRange===!0,yr=Mt.disableStream===!0,lr=Mt.disableAutoFetch===!0,gr=Mt.pdfBug===!0,or=zt?zt.length:Mt.length??NaN,dr=typeof Mt.useSystemFonts=="boolean"?Mt.useSystemFonts:!_util.isNodeJS&&!cr,xr=typeof Mt.useWorkerFetch=="boolean"?Mt.useWorkerFetch:Xt===_display_utils.DOMCMapReaderFactory&&Vt===_display_utils.DOMStandardFontDataFactory&&Jt&&Ft&&(0,_display_utils.isValidFetchUrl)(Jt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Ft,document.baseURI),pr=Mt.canvasFactory||new DefaultCanvasFactory({ownerDocument:ur}),wr=Mt.filterFactory||new DefaultFilterFactory({docId:Nt,ownerDocument:ur}),Rr=null;(0,_util.setVerbosityLevel)(Gt);const Pr={canvasFactory:pr,filterFactory:wr};if(xr||(Pr.cMapReaderFactory=new Xt({baseUrl:Jt,isCompressed:Qt}),Pr.standardFontDataFactory=new Vt({baseUrl:Ft})),!qt){const Wr={verbosity:Gt,port:_worker_options.GlobalWorkerOptions.workerPort};qt=Wr.port?PDFWorker.fromPort(Wr):new PDFWorker(Wr),jt._worker=qt}const Er={docId:Nt,apiVersion:"3.11.174",data:Dt,password:Wt,disableAutoFetch:lr,rangeChunkSize:Ut,length:or,docBaseUrl:Kt,enableXfa:ir,evaluatorOptions:{maxImageSize:er,disableFontFace:cr,ignoreErrors:Yt,isEvalSupported:tr,isOffscreenCanvasSupported:Zt,canvasMaxAreaInBytes:ar,fontExtraProperties:sr,useSystemFonts:dr,cMapUrl:xr?Jt:null,standardFontDataUrl:xr?Ft:null}},Nr={ignoreErrors:Yt,isEvalSupported:tr,disableFontFace:cr,fontExtraProperties:sr,enableXfa:ir,ownerDocument:ur,disableAutoFetch:lr,pdfBug:gr,styleElement:Rr};return qt.promise.then(function(){if(jt.destroyed)throw new Error("Loading aborted");const Wr=_fetchDocument(qt,Er),an=new Promise(function(Kr){let sn;zt?sn=new _transport_stream.PDFDataTransportStream({length:or,initialData:zt.initialData,progressiveDone:zt.progressiveDone,contentDispositionFilename:zt.contentDispositionFilename,disableRange:fr,disableStream:yr},zt):Dt||(sn=(Or=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Or):(0,_display_utils.isValidFetchUrl)(Or.url)?new _displayFetch_stream.PDFFetchStream(Or):new _displayNetwork.PDFNetworkStream(Or))({url:Lt,length:or,httpHeaders:Bt,withCredentials:Ht,rangeChunkSize:Ut,disableRange:fr,disableStream:yr})),Kr(sn)});return Promise.all([Wr,an]).then(function([Kr,sn]){if(jt.destroyed)throw new Error("Loading aborted");const Hr=new _message_handler.MessageHandler(Nt,Kr,qt.port),Or=new WorkerTransport(Hr,jt,sn,Nr,Pr);jt._transport=Or,Hr.send("Ready",null)})}).catch(jt._capability.reject),jt}async function _fetchDocument(Mt,jt){if(Mt.destroyed)throw new Error("Worker was destroyed");const Nt=await Mt.messageHandler.sendWithPromise("GetDocRequest",jt,jt.data?[jt.data.buffer]:null);if(Mt.destroyed)throw new Error("Worker was destroyed");return Nt}function getUrlProp(Mt){if(Mt instanceof URL)return Mt.href;try{return new URL(Mt,window.location).href}catch{if(_util.isNodeJS&&typeof Mt=="string")return Mt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Mt){if(_util.isNodeJS&&typeof Buffer<"u"&&Mt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Mt instanceof Uint8Array&&Mt.byteLength===Mt.buffer.byteLength)return Mt;if(typeof Mt=="string")return(0,_util.stringToBytes)(Mt);if(typeof Mt=="object"&&!isNaN(Mt==null?void 0:Mt.length)||(0,_util.isArrayBuffer)(Mt))return new Uint8Array(Mt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const ft=class ft{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Ls(ft,dt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var jt,Nt,Lt;this.destroyed=!0;try{(jt=this._worker)!=null&&jt.port&&(this._worker._pendingDestroy=!0),await((Nt=this._transport)==null?void 0:Nt.destroy())}catch(Dt){throw(Lt=this._worker)!=null&&Lt.port&&delete this._worker._pendingDestroy,Dt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};dt=new WeakMap,en(ft,dt,0);let PDFDocumentLoadingTask=ft;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(jt,Nt,Lt=!1,Dt=null){this.length=jt,this.initialData=Nt,this.progressiveDone=Lt,this.contentDispositionFilename=Dt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(jt){this._rangeListeners.push(jt)}addProgressListener(jt){this._progressListeners.push(jt)}addProgressiveReadListener(jt){this._progressiveReadListeners.push(jt)}addProgressiveDoneListener(jt){this._progressiveDoneListeners.push(jt)}onDataRange(jt,Nt){for(const Lt of this._rangeListeners)Lt(jt,Nt)}onDataProgress(jt,Nt){this._readyCapability.promise.then(()=>{for(const Lt of this._progressListeners)Lt(jt,Nt)})}onDataProgressiveRead(jt){this._readyCapability.promise.then(()=>{for(const Nt of this._progressiveReadListeners)Nt(jt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const jt of this._progressiveDoneListeners)jt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(jt,Nt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(jt,Nt){this._pdfInfo=jt,this._transport=Nt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Lt=>{if(!Lt)return Lt;const Dt=[];for(const Bt in Lt)Dt.push(...Lt[Bt]);return Dt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(jt){return this._transport.getPage(jt)}getPageIndex(jt){return this._transport.getPageIndex(jt)}getDestinations(){return this._transport.getDestinations()}getDestination(jt){return this._transport.getDestination(jt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(jt=!1){return this._transport.startCleanup(jt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(jt,Nt,Lt,Dt=!1){en(this,mt);en(this,pt,null);en(this,ht,!1);this._pageIndex=jt,this._pageInfo=Nt,this._transport=Lt,this._stats=Dt?new _display_utils.StatTimer:null,this._pdfBug=Dt,this.commonObjs=Lt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:jt,rotation:Nt=this.rotate,offsetX:Lt=0,offsetY:Dt=0,dontFlip:Bt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:jt,rotation:Nt,offsetX:Lt,offsetY:Dt,dontFlip:Bt})}getAnnotations({intent:jt="display"}={}){const Nt=this._transport.getRenderingIntent(jt);return this._transport.getAnnotations(this._pageIndex,Nt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var jt;return((jt=this._transport._htmlForXfa)==null?void 0:jt.children[this._pageIndex])||null}render({canvasContext:jt,viewport:Nt,intent:Lt="display",annotationMode:Dt=_util.AnnotationMode.ENABLE,transform:Bt=null,background:Ht=null,optionalContentConfigPromise:Wt=null,annotationCanvasMap:zt=null,pageColors:Ut=null,printAnnotationStorage:qt=null}){var Vt,Yt;(Vt=this._stats)==null||Vt.time("Overall");const Gt=this._transport.getRenderingIntent(Lt,Dt,qt);nn(this,ht,!1),Ur(this,mt,Ys).call(this),Wt||(Wt=this._transport.getOptionalContentConfig());let Kt=this._intentStates.get(Gt.cacheKey);Kt||(Kt=Object.create(null),this._intentStates.set(Gt.cacheKey,Kt)),Kt.streamReaderCancelTimeout&&(clearTimeout(Kt.streamReaderCancelTimeout),Kt.streamReaderCancelTimeout=null);const Jt=!!(Gt.renderingIntent&_util.RenderingIntentFlag.PRINT);Kt.displayReadyCapability||(Kt.displayReadyCapability=new _util.PromiseCapability,Kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Yt=this._stats)==null||Yt.time("Page Request"),this._pumpOperatorList(Gt));const Qt=er=>{var tr,Zt;Kt.renderTasks.delete(Xt),(this._maybeCleanupAfterRender||Jt)&&nn(this,ht,!0),Ur(this,mt,Is).call(this,!Jt),er?(Xt.capability.reject(er),this._abortOperatorList({intentState:Kt,reason:er instanceof Error?er:new Error(er)})):Xt.capability.resolve(),(tr=this._stats)==null||tr.timeEnd("Rendering"),(Zt=this._stats)==null||Zt.timeEnd("Overall")},Xt=new InternalRenderTask({callback:Qt,params:{canvasContext:jt,viewport:Nt,transform:Bt,background:Ht},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:zt,operatorList:Kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Jt,pdfBug:this._pdfBug,pageColors:Ut});(Kt.renderTasks||(Kt.renderTasks=new Set)).add(Xt);const Ft=Xt.task;return Promise.all([Kt.displayReadyCapability.promise,Wt]).then(([er,tr])=>{var Zt;if(this.destroyed){Qt();return}(Zt=this._stats)==null||Zt.time("Rendering"),Xt.initializeGraphics({transparency:er,optionalContentConfig:tr}),Xt.operatorListChanged()}).catch(Qt),Ft}getOperatorList({intent:jt="display",annotationMode:Nt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Lt=null}={}){var zt;function Dt(){Ht.operatorList.lastChunk&&(Ht.opListReadCapability.resolve(Ht.operatorList),Ht.renderTasks.delete(Wt))}const Bt=this._transport.getRenderingIntent(jt,Nt,Lt,!0);let Ht=this._intentStates.get(Bt.cacheKey);Ht||(Ht=Object.create(null),this._intentStates.set(Bt.cacheKey,Ht));let Wt;return Ht.opListReadCapability||(Wt=Object.create(null),Wt.operatorListChanged=Dt,Ht.opListReadCapability=new _util.PromiseCapability,(Ht.renderTasks||(Ht.renderTasks=new Set)).add(Wt),Ht.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(zt=this._stats)==null||zt.time("Page Request"),this._pumpOperatorList(Bt)),Ht.opListReadCapability.promise}streamTextContent({includeMarkedContent:jt=!1,disableNormalization:Nt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:jt===!0,disableNormalization:Nt===!0},{highWaterMark:100,size(Dt){return Dt.items.length}})}getTextContent(jt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Lt=>_xfa_text.XfaText.textContent(Lt));const Nt=this.streamTextContent(jt);return new Promise(function(Lt,Dt){function Bt(){Ht.read().then(function({value:zt,done:Ut}){if(Ut){Lt(Wt);return}Object.assign(Wt.styles,zt.styles),Wt.items.push(...zt.items),Bt()},Dt)}const Ht=Nt.getReader(),Wt={items:[],styles:Object.create(null)};Bt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const jt=[];for(const Nt of this._intentStates.values())if(this._abortOperatorList({intentState:Nt,reason:new Error("Page was destroyed."),force:!0}),!Nt.opListReadCapability)for(const Lt of Nt.renderTasks)jt.push(Lt.completed),Lt.cancel();return this.objs.clear(),nn(this,ht,!1),Ur(this,mt,Ys).call(this),Promise.all(jt)}cleanup(jt=!1){nn(this,ht,!0);const Nt=Ur(this,mt,Is).call(this,!1);return jt&&Nt&&this._stats&&(this._stats=new _display_utils.StatTimer),Nt}_startRenderPage(jt,Nt){var Dt,Bt;const Lt=this._intentStates.get(Nt);Lt&&((Dt=this._stats)==null||Dt.timeEnd("Page Request"),(Bt=Lt.displayReadyCapability)==null||Bt.resolve(jt))}_renderPageChunk(jt,Nt){for(let Lt=0,Dt=jt.length;Lt<Dt;Lt++)Nt.operatorList.fnArray.push(jt.fnArray[Lt]),Nt.operatorList.argsArray.push(jt.argsArray[Lt]);Nt.operatorList.lastChunk=jt.lastChunk,Nt.operatorList.separateAnnots=jt.separateAnnots;for(const Lt of Nt.renderTasks)Lt.operatorListChanged();jt.lastChunk&&Ur(this,mt,Is).call(this,!0)}_pumpOperatorList({renderingIntent:jt,cacheKey:Nt,annotationStorageSerializable:Lt}){const{map:Dt,transfers:Bt}=Lt,Wt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:jt,cacheKey:Nt,annotationStorage:Dt},Bt).getReader(),zt=this._intentStates.get(Nt);zt.streamReader=Wt;const Ut=()=>{Wt.read().then(({value:qt,done:Gt})=>{if(Gt){zt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(qt,zt),Ut())},qt=>{if(zt.streamReader=null,!this._transport.destroyed){if(zt.operatorList){zt.operatorList.lastChunk=!0;for(const Gt of zt.renderTasks)Gt.operatorListChanged();Ur(this,mt,Is).call(this,!0)}if(zt.displayReadyCapability)zt.displayReadyCapability.reject(qt);else if(zt.opListReadCapability)zt.opListReadCapability.reject(qt);else throw qt}})};Ut()}_abortOperatorList({intentState:jt,reason:Nt,force:Lt=!1}){if(jt.streamReader){if(jt.streamReaderCancelTimeout&&(clearTimeout(jt.streamReaderCancelTimeout),jt.streamReaderCancelTimeout=null),!Lt){if(jt.renderTasks.size>0)return;if(Nt instanceof _display_utils.RenderingCancelledException){let Dt=RENDERING_CANCELLED_TIMEOUT;Nt.extraDelay>0&&Nt.extraDelay<1e3&&(Dt+=Nt.extraDelay),jt.streamReaderCancelTimeout=setTimeout(()=>{jt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:jt,reason:Nt,force:!0})},Dt);return}}if(jt.streamReader.cancel(new _util.AbortException(Nt.message)).catch(()=>{}),jt.streamReader=null,!this._transport.destroyed){for(const[Dt,Bt]of this._intentStates)if(Bt===jt){this._intentStates.delete(Dt);break}this.cleanup()}}}get stats(){return this._stats}}pt=new WeakMap,ht=new WeakMap,mt=new WeakSet,Is=function(jt=!1){if(Ur(this,mt,Ys).call(this),!rr(this,ht)||this.destroyed)return!1;if(jt)return nn(this,pt,setTimeout(()=>{nn(this,pt,null),Ur(this,mt,Is).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Nt,operatorList:Lt}of this._intentStates.values())if(Nt.size>0||!Lt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),nn(this,ht,!1),!0},Ys=function(){rr(this,pt)&&(clearTimeout(rr(this,pt)),nn(this,pt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){en(this,yt,new Set);en(this,bt,Promise.resolve())}postMessage(jt,Nt){const Lt={data:structuredClone(jt,Nt?{transfer:Nt}:null)};rr(this,bt).then(()=>{for(const Dt of rr(this,yt))Dt.call(this,Lt)})}addEventListener(jt,Nt){rr(this,yt).add(Nt)}removeEventListener(jt,Nt){rr(this,yt).delete(Nt)}terminate(){rr(this,yt).clear()}}yt=new WeakMap,bt=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Mt=(xt=document==null?void 0:document.currentScript)==null?void 0:xt.src;Mt&&(PDFWorkerUtil.fallbackWorkerSrc=Mt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Mt,jt){let Nt;try{if(Nt=new URL(Mt),!Nt.origin||Nt.origin==="null")return!1}catch{return!1}const Lt=new URL(jt,Nt);return Nt.origin===Lt.origin},PDFWorkerUtil.createCDNWrapper=function(Mt){const jt=`importScripts("${Mt}");`;return URL.createObjectURL(new Blob([jt]))}}const _PDFWorker=class _PDFWorker{constructor({name:Mt=null,port:jt=null,verbosity:Nt=(0,_util.getVerbosityLevel)()}={}){var Lt;if(this.name=Mt,this.destroyed=!1,this.verbosity=Nt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,jt){if((Lt=rr(_PDFWorker,St))!=null&&Lt.has(jt))throw new Error("Cannot use more than one PDFWorker per port.");(rr(_PDFWorker,St)||nn(_PDFWorker,St,new WeakMap)).set(jt,this),this._initializeFromPort(jt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Mt){this._port=Mt,this._messageHandler=new _message_handler.MessageHandler("main","worker",Mt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Mt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Mt)||(Mt=PDFWorkerUtil.createCDNWrapper(new URL(Mt,window.location).href));const jt=new Worker(Mt),Nt=new _message_handler.MessageHandler("main","worker",jt),Lt=()=>{jt.removeEventListener("error",Dt),Nt.destroy(),jt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Dt=()=>{this._webWorker||Lt()};jt.addEventListener("error",Dt),Nt.on("test",Ht=>{if(jt.removeEventListener("error",Dt),this.destroyed){Lt();return}Ht?(this._messageHandler=Nt,this._port=jt,this._webWorker=jt,this._readyCapability.resolve(),Nt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Nt.destroy(),jt.terminate())}),Nt.on("ready",Ht=>{if(jt.removeEventListener("error",Dt),this.destroyed){Lt();return}try{Bt()}catch{this._setupFakeWorker()}});const Bt=()=>{const Ht=new Uint8Array;Nt.send("test",Ht,[Ht.buffer])};Bt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Mt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const jt=new LoopbackPort;this._port=jt;const Nt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Lt=new _message_handler.MessageHandler(Nt+"_worker",Nt,jt);Mt.setup(Lt,jt);const Dt=new _message_handler.MessageHandler(Nt,Nt+"_worker",jt);this._messageHandler=Dt,this._readyCapability.resolve(),Dt.send("configure",{verbosity:this.verbosity})}).catch(Mt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Mt.message}".`))})}destroy(){var Mt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Mt=rr(_PDFWorker,St))==null||Mt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Mt){var Nt;if(!(Mt!=null&&Mt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const jt=(Nt=rr(this,St))==null?void 0:Nt.get(Mt.port);if(jt){if(jt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return jt}return new _PDFWorker(Mt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Mt;try{return((Mt=globalThis.pdfjsWorker)==null?void 0:Mt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};St=new WeakMap,en(_PDFWorker,St);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(jt,Nt,Lt,Dt,Bt){en(this,Tt);en(this,Et,new Map);en(this,Ct,new Map);en(this,wt,new Map);en(this,Rt,null);this.messageHandler=jt,this.loadingTask=Nt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Dt.ownerDocument,styleElement:Dt.styleElement}),this._params=Dt,this.canvasFactory=Bt.canvasFactory,this.filterFactory=Bt.filterFactory,this.cMapReaderFactory=Bt.cMapReaderFactory,this.standardFontDataFactory=Bt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Lt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(jt,Nt=_util.AnnotationMode.ENABLE,Lt=null,Dt=!1){let Bt=_util.RenderingIntentFlag.DISPLAY,Ht=_annotation_storage.SerializableEmpty;switch(jt){case"any":Bt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Bt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${jt}`)}switch(Nt){case _util.AnnotationMode.DISABLE:Bt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Bt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Bt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Ht=(Bt&_util.RenderingIntentFlag.PRINT&&Lt instanceof _annotation_storage.PrintAnnotationStorage?Lt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Nt}`)}return Dt&&(Bt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Bt,cacheKey:`${Bt}_${Ht.hash}`,annotationStorageSerializable:Ht}}destroy(){var Lt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Lt=rr(this,Rt))==null||Lt.reject(new Error("Worker was destroyed during onPassword callback"));const jt=[];for(const Dt of rr(this,Ct).values())jt.push(Dt._destroy());rr(this,Ct).clear(),rr(this,wt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Nt=this.messageHandler.sendWithPromise("Terminate",null);return jt.push(Nt),Promise.all(jt).then(()=>{var Dt;this.commonObjs.clear(),this.fontLoader.clear(),rr(this,Et).clear(),this.filterFactory.destroy(),(Dt=this._networkStream)==null||Dt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:jt,loadingTask:Nt}=this;jt.on("GetReader",(Lt,Dt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Bt=>{this._lastProgress={loaded:Bt.loaded,total:Bt.total}},Dt.onPull=()=>{this._fullReader.read().then(function({value:Bt,done:Ht}){if(Ht){Dt.close();return}(0,_util.assert)(Bt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Dt.enqueue(new Uint8Array(Bt),1,[Bt])}).catch(Bt=>{Dt.error(Bt)})},Dt.onCancel=Bt=>{this._fullReader.cancel(Bt),Dt.ready.catch(Ht=>{if(!this.destroyed)throw Ht})}}),jt.on("ReaderHeadersReady",Lt=>{const Dt=new _util.PromiseCapability,Bt=this._fullReader;return Bt.headersReady.then(()=>{var Ht;(!Bt.isStreamingSupported||!Bt.isRangeSupported)&&(this._lastProgress&&((Ht=Nt.onProgress)==null||Ht.call(Nt,this._lastProgress)),Bt.onProgress=Wt=>{var zt;(zt=Nt.onProgress)==null||zt.call(Nt,{loaded:Wt.loaded,total:Wt.total})}),Dt.resolve({isStreamingSupported:Bt.isStreamingSupported,isRangeSupported:Bt.isRangeSupported,contentLength:Bt.contentLength})},Dt.reject),Dt.promise}),jt.on("GetRangeReader",(Lt,Dt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Bt=this._networkStream.getRangeReader(Lt.begin,Lt.end);if(!Bt){Dt.close();return}Dt.onPull=()=>{Bt.read().then(function({value:Ht,done:Wt}){if(Wt){Dt.close();return}(0,_util.assert)(Ht instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Dt.enqueue(new Uint8Array(Ht),1,[Ht])}).catch(Ht=>{Dt.error(Ht)})},Dt.onCancel=Ht=>{Bt.cancel(Ht),Dt.ready.catch(Wt=>{if(!this.destroyed)throw Wt})}}),jt.on("GetDoc",({pdfInfo:Lt})=>{this._numPages=Lt.numPages,this._htmlForXfa=Lt.htmlForXfa,delete Lt.htmlForXfa,Nt._capability.resolve(new PDFDocumentProxy(Lt,this))}),jt.on("DocException",function(Lt){let Dt;switch(Lt.name){case"PasswordException":Dt=new _util.PasswordException(Lt.message,Lt.code);break;case"InvalidPDFException":Dt=new _util.InvalidPDFException(Lt.message);break;case"MissingPDFException":Dt=new _util.MissingPDFException(Lt.message);break;case"UnexpectedResponseException":Dt=new _util.UnexpectedResponseException(Lt.message,Lt.status);break;case"UnknownErrorException":Dt=new _util.UnknownErrorException(Lt.message,Lt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Nt._capability.reject(Dt)}),jt.on("PasswordRequest",Lt=>{if(nn(this,Rt,new _util.PromiseCapability),Nt.onPassword){const Dt=Bt=>{Bt instanceof Error?rr(this,Rt).reject(Bt):rr(this,Rt).resolve({password:Bt})};try{Nt.onPassword(Dt,Lt.code)}catch(Bt){rr(this,Rt).reject(Bt)}}else rr(this,Rt).reject(new _util.PasswordException(Lt.message,Lt.code));return rr(this,Rt).promise}),jt.on("DataLoaded",Lt=>{var Dt;(Dt=Nt.onProgress)==null||Dt.call(Nt,{loaded:Lt.length,total:Lt.length}),this.downloadInfoCapability.resolve(Lt)}),jt.on("StartRenderPage",Lt=>{if(this.destroyed)return;rr(this,Ct).get(Lt.pageIndex)._startRenderPage(Lt.transparency,Lt.cacheKey)}),jt.on("commonobj",([Lt,Dt,Bt])=>{var Ht;if(!this.destroyed&&!this.commonObjs.has(Lt))switch(Dt){case"Font":const Wt=this._params;if("error"in Bt){const qt=Bt.error;(0,_util.warn)(`Error during font loading: ${qt}`),this.commonObjs.resolve(Lt,qt);break}const zt=Wt.pdfBug&&((Ht=globalThis.FontInspector)!=null&&Ht.enabled)?(qt,Gt)=>globalThis.FontInspector.fontAdded(qt,Gt):null,Ut=new _font_loader.FontFaceObject(Bt,{isEvalSupported:Wt.isEvalSupported,disableFontFace:Wt.disableFontFace,ignoreErrors:Wt.ignoreErrors,inspectFont:zt});this.fontLoader.bind(Ut).catch(qt=>jt.sendWithPromise("FontFallback",{id:Lt})).finally(()=>{!Wt.fontExtraProperties&&Ut.data&&(Ut.data=null),this.commonObjs.resolve(Lt,Ut)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Lt,Bt);break;default:throw new Error(`Got unknown common object type ${Dt}`)}}),jt.on("obj",([Lt,Dt,Bt,Ht])=>{var zt;if(this.destroyed)return;const Wt=rr(this,Ct).get(Dt);if(!Wt.objs.has(Lt))switch(Bt){case"Image":if(Wt.objs.resolve(Lt,Ht),Ht){let Ut;if(Ht.bitmap){const{width:qt,height:Gt}=Ht;Ut=qt*Gt*4}else Ut=((zt=Ht.data)==null?void 0:zt.length)||0;Ut>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Wt._maybeCleanupAfterRender=!0)}break;case"Pattern":Wt.objs.resolve(Lt,Ht);break;default:throw new Error(`Got unknown object type ${Bt}`)}}),jt.on("DocProgress",Lt=>{var Dt;this.destroyed||(Dt=Nt.onProgress)==null||Dt.call(Nt,{loaded:Lt.loaded,total:Lt.total})}),jt.on("FetchBuiltInCMap",Lt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Lt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),jt.on("FetchStandardFontData",Lt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Lt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Lt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:jt,transfers:Nt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:jt,filename:((Lt=this._fullReader)==null?void 0:Lt.filename)??null},Nt).finally(()=>{this.annotationStorage.resetModified()})}getPage(jt){if(!Number.isInteger(jt)||jt<=0||jt>this._numPages)return Promise.reject(new Error("Invalid page request."));const Nt=jt-1,Lt=rr(this,wt).get(Nt);if(Lt)return Lt;const Dt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Nt}).then(Bt=>{if(this.destroyed)throw new Error("Transport destroyed");const Ht=new PDFPageProxy(Nt,Bt,this,this._params.pdfBug);return rr(this,Ct).set(Nt,Ht),Ht});return rr(this,wt).set(Nt,Dt),Dt}getPageIndex(jt){return typeof jt!="object"||jt===null||!Number.isInteger(jt.num)||jt.num<0||!Number.isInteger(jt.gen)||jt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:jt.num,gen:jt.gen})}getAnnotations(jt,Nt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:jt,intent:Nt})}getFieldObjects(){return Ur(this,Tt,Js).call(this,"GetFieldObjects")}hasJSActions(){return Ur(this,Tt,Js).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(jt){return typeof jt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:jt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Ur(this,Tt,Js).call(this,"GetDocJSActions")}getPageJSActions(jt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:jt})}getStructTree(jt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:jt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(jt=>new _optional_content_config.OptionalContentConfig(jt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const jt="GetMetadata",Nt=rr(this,Et).get(jt);if(Nt)return Nt;const Lt=this.messageHandler.sendWithPromise(jt,null).then(Dt=>{var Bt,Ht;return{info:Dt[0],metadata:Dt[1]?new _metadata.Metadata(Dt[1]):null,contentDispositionFilename:((Bt=this._fullReader)==null?void 0:Bt.filename)??null,contentLength:((Ht=this._fullReader)==null?void 0:Ht.contentLength)??null}});return rr(this,Et).set(jt,Lt),Lt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(jt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Nt of rr(this,Ct).values())if(!Nt.cleanup())throw new Error(`startCleanup: Page ${Nt.pageNumber} is currently rendering.`);this.commonObjs.clear(),jt||this.fontLoader.clear(),rr(this,Et).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:jt,enableXfa:Nt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:jt,enableXfa:Nt})}}Et=new WeakMap,Ct=new WeakMap,wt=new WeakMap,Rt=new WeakMap,Tt=new WeakSet,Js=function(jt,Nt=null){const Lt=rr(this,Et).get(jt);if(Lt)return Lt;const Dt=this.messageHandler.sendWithPromise(jt,Nt);return rr(this,Et).set(jt,Dt),Dt};class PDFObjects{constructor(){en(this,_t);en(this,$t,Object.create(null))}get(jt,Nt=null){if(Nt){const Dt=Ur(this,_t,Bl).call(this,jt);return Dt.capability.promise.then(()=>Nt(Dt.data)),null}const Lt=rr(this,$t)[jt];if(!(Lt!=null&&Lt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${jt}.`);return Lt.data}has(jt){const Nt=rr(this,$t)[jt];return(Nt==null?void 0:Nt.capability.settled)||!1}resolve(jt,Nt=null){const Lt=Ur(this,_t,Bl).call(this,jt);Lt.data=Nt,Lt.capability.resolve()}clear(){var jt;for(const Nt in rr(this,$t)){const{data:Lt}=rr(this,$t)[Nt];(jt=Lt==null?void 0:Lt.bitmap)==null||jt.close()}nn(this,$t,Object.create(null))}}$t=new WeakMap,_t=new WeakSet,Bl=function(jt){var Nt;return(Nt=rr(this,$t))[jt]||(Nt[jt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(jt){en(this,At,null);nn(this,At,jt),this.onContinue=null}get promise(){return rr(this,At).capability.promise}cancel(jt=0){rr(this,At).cancel(null,jt)}get separateAnnots(){const{separateAnnots:jt}=rr(this,At).operatorList;if(!jt)return!1;const{annotationCanvasMap:Nt}=rr(this,At);return jt.form||jt.canvas&&(Nt==null?void 0:Nt.size)>0}}At=new WeakMap,exports.RenderTask=RenderTask;const kt=class kt{constructor({callback:jt,params:Nt,objs:Lt,commonObjs:Dt,annotationCanvasMap:Bt,operatorList:Ht,pageIndex:Wt,canvasFactory:zt,filterFactory:Ut,useRequestAnimationFrame:qt=!1,pdfBug:Gt=!1,pageColors:Kt=null}){this.callback=jt,this.params=Nt,this.objs=Lt,this.commonObjs=Dt,this.annotationCanvasMap=Bt,this.operatorListIdx=null,this.operatorList=Ht,this._pageIndex=Wt,this.canvasFactory=zt,this.filterFactory=Ut,this._pdfBug=Gt,this.pageColors=Kt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=qt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Nt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:jt=!1,optionalContentConfig:Nt}){var Wt,zt;if(this.cancelled)return;if(this._canvas){if(rr(kt,Ot).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");rr(kt,Ot).add(this._canvas)}this._pdfBug&&((Wt=globalThis.StepperManager)!=null&&Wt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Lt,viewport:Dt,transform:Bt,background:Ht}=this.params;this.gfx=new _canvas.CanvasGraphics(Lt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Nt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Bt,viewport:Dt,transparency:jt,background:Ht}),this.operatorListIdx=0,this.graphicsReady=!0,(zt=this.graphicsReadyCallback)==null||zt.call(this)}cancel(jt=null,Nt=0){var Lt;this.running=!1,this.cancelled=!0,(Lt=this.gfx)==null||Lt.endDrawing(),rr(kt,Ot).delete(this._canvas),this.callback(jt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Nt))}operatorListChanged(){var jt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(jt=this.stepper)==null||jt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),rr(kt,Ot).delete(this._canvas),this.callback())))}};Ot=new WeakMap,en(kt,Ot,new WeakSet);let InternalRenderTask=kt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(dt,ft,pt)=>{var xt,St,Et,Au,wt;Object.defineProperty(ft,"__esModule",{value:!0}),ft.SerializableEmpty=ft.PrintAnnotationStorage=ft.AnnotationStorage=void 0;var ht=pt(1),mt=pt(4),gt=pt(8);const vt=Object.freeze({map:null,hash:"",transfers:void 0});ft.SerializableEmpty=vt;class yt{constructor(){en(this,Et);en(this,xt,!1);en(this,St,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(Tt,Pt){const $t=rr(this,St).get(Tt);return $t===void 0?Pt:Object.assign(Pt,$t)}getRawValue(Tt){return rr(this,St).get(Tt)}remove(Tt){if(rr(this,St).delete(Tt),rr(this,St).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Pt of rr(this,St).values())if(Pt instanceof mt.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(Tt,Pt){const $t=rr(this,St).get(Tt);let _t=!1;if($t!==void 0)for(const[It,At]of Object.entries(Pt))$t[It]!==At&&(_t=!0,$t[It]=At);else _t=!0,rr(this,St).set(Tt,Pt);_t&&Ur(this,Et,Au).call(this),Pt instanceof mt.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Pt.constructor._type)}has(Tt){return rr(this,St).has(Tt)}getAll(){return rr(this,St).size>0?(0,ht.objectFromMap)(rr(this,St)):null}setAll(Tt){for(const[Pt,$t]of Object.entries(Tt))this.setValue(Pt,$t)}get size(){return rr(this,St).size}resetModified(){rr(this,xt)&&(nn(this,xt,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new bt(this)}get serializable(){if(rr(this,St).size===0)return vt;const Tt=new Map,Pt=new gt.MurmurHash3_64,$t=[],_t=Object.create(null);let It=!1;for(const[At,Ot]of rr(this,St)){const kt=Ot instanceof mt.AnnotationEditor?Ot.serialize(!1,_t):Ot;kt&&(Tt.set(At,kt),Pt.update(`${At}:${JSON.stringify(kt)}`),It||(It=!!kt.bitmap))}if(It)for(const At of Tt.values())At.bitmap&&$t.push(At.bitmap);return Tt.size>0?{map:Tt,hash:Pt.hexdigest(),transfers:$t}:vt}}xt=new WeakMap,St=new WeakMap,Et=new WeakSet,Au=function(){rr(this,xt)||(nn(this,xt,!0),typeof this.onSetModified=="function"&&this.onSetModified())},ft.AnnotationStorage=yt;class bt extends yt{constructor(Pt){super();en(this,wt);const{map:$t,hash:_t,transfers:It}=Pt.serializable,At=structuredClone($t,It?{transfer:It}:null);nn(this,wt,{map:At,hash:_t,transfers:It})}get print(){(0,ht.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return rr(this,wt)}}wt=new WeakMap,ft.PrintAnnotationStorage=bt},(dt,ft,pt)=>{var bt,xt,St,Et,Ct,wt,Rt,Tt,Pt,$t,_t,It,At,Ot,kt,zl,Hl,Nt,Vl,Wl,Mu,ku,Nu,Ul,ju;Object.defineProperty(ft,"__esModule",{value:!0}),ft.AnnotationEditor=void 0;var ht=pt(5),mt=pt(1),gt=pt(6);const qt=class qt{constructor(Kt){en(this,kt);en(this,bt,"");en(this,xt,!1);en(this,St,null);en(this,Et,null);en(this,Ct,null);en(this,wt,!1);en(this,Rt,null);en(this,Tt,this.focusin.bind(this));en(this,Pt,this.focusout.bind(this));en(this,$t,!1);en(this,_t,!1);en(this,It,!1);Do(this,"_initialOptions",Object.create(null));Do(this,"_uiManager",null);Do(this,"_focusEventsAllowed",!0);Do(this,"_l10nPromise",null);en(this,At,!1);en(this,Ot,qt._zIndex++);this.constructor===qt&&(0,mt.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Kt.parent,this.id=Kt.id,this.width=this.height=null,this.pageIndex=Kt.parent.pageIndex,this.name=Kt.name,this.div=null,this._uiManager=Kt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Kt.isCentered,this._structTreeParentId=null;const{rotation:Jt,rawDims:{pageWidth:Qt,pageHeight:Xt,pageX:Ft,pageY:Vt}}=this.parent.viewport;this.rotation=Jt,this.pageRotation=(360+Jt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Qt,Xt],this.pageTranslation=[Ft,Vt];const[Yt,er]=this.parentDimensions;this.x=Kt.x/Yt,this.y=Kt.y/er,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,mt.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Kt){const Jt=new yt({id:Kt.parent.getNextId(),parent:Kt.parent,uiManager:Kt._uiManager});Jt.annotationElementId=Kt.annotationElementId,Jt.deleted=!0,Jt._uiManager.addToAnnotationStorage(Jt)}static initialize(Kt,Jt=null){if(qt._l10nPromise||(qt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Xt=>[Xt,Kt.get(Xt)]))),Jt!=null&&Jt.strings)for(const Xt of Jt.strings)qt._l10nPromise.set(Xt,Kt.get(Xt));if(qt._borderLineWidth!==-1)return;const Qt=getComputedStyle(document.documentElement);qt._borderLineWidth=parseFloat(Qt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Kt,Jt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Kt){return!1}static paste(Kt,Jt){(0,mt.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return rr(this,At)}set _isDraggable(Kt){var Jt;nn(this,At,Kt),(Jt=this.div)==null||Jt.classList.toggle("draggable",Kt)}center(){const[Kt,Jt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Jt/(Kt*2),this.y+=this.width*Kt/(Jt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Jt/(Kt*2),this.y-=this.width*Kt/(Jt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Kt){this._uiManager.addCommands(Kt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=rr(this,Ot)}setParent(Kt){Kt!==null&&(this.pageIndex=Kt.pageIndex,this.pageDimensions=Kt.pageDimensions),this.parent=Kt}focusin(Kt){this._focusEventsAllowed&&(rr(this,$t)?nn(this,$t,!1):this.parent.setSelected(this))}focusout(Kt){var Qt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Jt=Kt.relatedTarget;Jt!=null&&Jt.closest(`#${this.id}`)||(Kt.preventDefault(),(Qt=this.parent)!=null&&Qt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Kt,Jt,Qt,Xt){const[Ft,Vt]=this.parentDimensions;[Qt,Xt]=this.screenToPageTranslation(Qt,Xt),this.x=(Kt+Qt)/Ft,this.y=(Jt+Xt)/Vt,this.fixAndSetPosition()}translate(Kt,Jt){Ur(this,kt,zl).call(this,this.parentDimensions,Kt,Jt)}translateInPage(Kt,Jt){Ur(this,kt,zl).call(this,this.pageDimensions,Kt,Jt),this.div.scrollIntoView({block:"nearest"})}drag(Kt,Jt){const[Qt,Xt]=this.parentDimensions;if(this.x+=Kt/Qt,this.y+=Jt/Xt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:tr,y:Zt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,tr,Zt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ft,y:Vt}=this;const[Yt,er]=Ur(this,kt,Hl).call(this);Ft+=Yt,Vt+=er,this.div.style.left=`${(100*Ft).toFixed(2)}%`,this.div.style.top=`${(100*Vt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Kt,Jt]=this.pageDimensions;let{x:Qt,y:Xt,width:Ft,height:Vt}=this;switch(Ft*=Kt,Vt*=Jt,Qt*=Kt,Xt*=Jt,this.rotation){case 0:Qt=Math.max(0,Math.min(Kt-Ft,Qt)),Xt=Math.max(0,Math.min(Jt-Vt,Xt));break;case 90:Qt=Math.max(0,Math.min(Kt-Vt,Qt)),Xt=Math.min(Jt,Math.max(Ft,Xt));break;case 180:Qt=Math.min(Kt,Math.max(Ft,Qt)),Xt=Math.min(Jt,Math.max(Vt,Xt));break;case 270:Qt=Math.min(Kt,Math.max(Vt,Qt)),Xt=Math.max(0,Math.min(Jt-Ft,Xt));break}this.x=Qt/=Kt,this.y=Xt/=Jt;const[Yt,er]=Ur(this,kt,Hl).call(this);Qt+=Yt,Xt+=er;const{style:tr}=this.div;tr.left=`${(100*Qt).toFixed(2)}%`,tr.top=`${(100*Xt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Kt,Jt){var Qt;return Ur(Qt=qt,Nt,Vl).call(Qt,Kt,Jt,this.parentRotation)}pageTranslationToScreen(Kt,Jt){var Qt;return Ur(Qt=qt,Nt,Vl).call(Qt,Kt,Jt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Kt,pageDimensions:[Jt,Qt]}=this,Xt=Jt*Kt,Ft=Qt*Kt;return mt.FeatureTest.isCSSRoundSupported?[Math.round(Xt),Math.round(Ft)]:[Xt,Ft]}setDims(Kt,Jt){var Ft;const[Qt,Xt]=this.parentDimensions;this.div.style.width=`${(100*Kt/Qt).toFixed(2)}%`,rr(this,wt)||(this.div.style.height=`${(100*Jt/Xt).toFixed(2)}%`),(Ft=rr(this,St))==null||Ft.classList.toggle("small",Kt<qt.SMALL_EDITOR_SIZE||Jt<qt.SMALL_EDITOR_SIZE)}fixDims(){const{style:Kt}=this.div,{height:Jt,width:Qt}=Kt,Xt=Qt.endsWith("%"),Ft=!rr(this,wt)&&Jt.endsWith("%");if(Xt&&Ft)return;const[Vt,Yt]=this.parentDimensions;Xt||(Kt.width=`${(100*parseFloat(Qt)/Vt).toFixed(2)}%`),!rr(this,wt)&&!Ft&&(Kt.height=`${(100*parseFloat(Jt)/Yt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(rr(this,St))return;const Kt=nn(this,St,document.createElement("button"));Kt.className="altText";const Jt=await qt._l10nPromise.get("editor_alt_text_button_label");Kt.textContent=Jt,Kt.setAttribute("aria-label",Jt),Kt.tabIndex="0",Kt.addEventListener("contextmenu",gt.noContextMenu),Kt.addEventListener("pointerdown",Qt=>Qt.stopPropagation()),Kt.addEventListener("click",Qt=>{Qt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Kt.addEventListener("keydown",Qt=>{Qt.target===Kt&&Qt.key==="Enter"&&(Qt.preventDefault(),this._uiManager.editAltText(this))}),Ur(this,kt,Ul).call(this),this.div.append(Kt),qt.SMALL_EDITOR_SIZE||(qt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Kt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:rr(this,bt),decorative:rr(this,xt)}}set altTextData({altText:Kt,decorative:Jt}){rr(this,bt)===Kt&&rr(this,xt)===Jt||(nn(this,bt,Kt),nn(this,xt,Jt),Ur(this,kt,Ul).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",rr(this,Tt)),this.div.addEventListener("focusout",rr(this,Pt));const[Kt,Jt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Jt/Kt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Kt/Jt).toFixed(2)}%`);const[Qt,Xt]=this.getInitialTranslation();return this.translate(Qt,Xt),(0,ht.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Kt){const{isMac:Jt}=mt.FeatureTest.platform;if(Kt.button!==0||Kt.ctrlKey&&Jt){Kt.preventDefault();return}nn(this,$t,!0),Ur(this,kt,ju).call(this,Kt)}moveInDOM(){var Kt;(Kt=this.parent)==null||Kt.moveEditorInDOM(this)}_setParentAndPosition(Kt,Jt,Qt){Kt.changeParent(this),this.x=Jt,this.y=Qt,this.fixAndSetPosition()}getRect(Kt,Jt){const Qt=this.parentScale,[Xt,Ft]=this.pageDimensions,[Vt,Yt]=this.pageTranslation,er=Kt/Qt,tr=Jt/Qt,Zt=this.x*Xt,ar=this.y*Ft,cr=this.width*Xt,sr=this.height*Ft;switch(this.rotation){case 0:return[Zt+er+Vt,Ft-ar-tr-sr+Yt,Zt+er+cr+Vt,Ft-ar-tr+Yt];case 90:return[Zt+tr+Vt,Ft-ar+er+Yt,Zt+tr+sr+Vt,Ft-ar+er+cr+Yt];case 180:return[Zt-er-cr+Vt,Ft-ar+tr+Yt,Zt-er+Vt,Ft-ar+tr+sr+Yt];case 270:return[Zt-tr-sr+Vt,Ft-ar-er-cr+Yt,Zt-tr+Vt,Ft-ar-er+Yt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Kt,Jt){const[Qt,Xt,Ft,Vt]=Kt,Yt=Ft-Qt,er=Vt-Xt;switch(this.rotation){case 0:return[Qt,Jt-Vt,Yt,er];case 90:return[Qt,Jt-Xt,er,Yt];case 180:return[Ft,Jt-Xt,Yt,er];case 270:return[Ft,Jt-Vt,er,Yt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){nn(this,It,!0)}disableEditMode(){nn(this,It,!1)}isInEditMode(){return rr(this,It)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Kt,Jt;(Kt=this.div)==null||Kt.addEventListener("focusin",rr(this,Tt)),(Jt=this.div)==null||Jt.addEventListener("focusout",rr(this,Pt))}serialize(Kt=!1,Jt=null){(0,mt.unreachable)("An editor must be serializable")}static deserialize(Kt,Jt,Qt){const Xt=new this.prototype.constructor({parent:Jt,id:Jt.getNextId(),uiManager:Qt});Xt.rotation=Kt.rotation;const[Ft,Vt]=Xt.pageDimensions,[Yt,er,tr,Zt]=Xt.getRectInCurrentCoords(Kt.rect,Vt);return Xt.x=Yt/Ft,Xt.y=er/Vt,Xt.width=tr/Ft,Xt.height=Zt/Vt,Xt}remove(){var Kt;this.div.removeEventListener("focusin",rr(this,Tt)),this.div.removeEventListener("focusout",rr(this,Pt)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Kt=rr(this,St))==null||Kt.remove(),nn(this,St,null),nn(this,Et,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ur(this,kt,Mu).call(this),rr(this,Rt).classList.remove("hidden"))}select(){var Kt;this.makeResizable(),(Kt=this.div)==null||Kt.classList.add("selectedEditor")}unselect(){var Kt,Jt,Qt;(Kt=rr(this,Rt))==null||Kt.classList.add("hidden"),(Jt=this.div)==null||Jt.classList.remove("selectedEditor"),(Qt=this.div)!=null&&Qt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Kt,Jt){}disableEditing(){rr(this,St)&&(rr(this,St).hidden=!0)}enableEditing(){rr(this,St)&&(rr(this,St).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return rr(this,_t)}set isEditing(Kt){nn(this,_t,Kt),this.parent&&(Kt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Kt,Jt){nn(this,wt,!0);const Qt=Kt/Jt,{style:Xt}=this.div;Xt.aspectRatio=Qt,Xt.height="auto"}static get MIN_SIZE(){return 16}};bt=new WeakMap,xt=new WeakMap,St=new WeakMap,Et=new WeakMap,Ct=new WeakMap,wt=new WeakMap,Rt=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,$t=new WeakMap,_t=new WeakMap,It=new WeakMap,At=new WeakMap,Ot=new WeakMap,kt=new WeakSet,zl=function([Kt,Jt],Qt,Xt){[Qt,Xt]=this.screenToPageTranslation(Qt,Xt),this.x+=Qt/Kt,this.y+=Xt/Jt,this.fixAndSetPosition()},Hl=function(){const[Kt,Jt]=this.parentDimensions,{_borderLineWidth:Qt}=qt,Xt=Qt/Kt,Ft=Qt/Jt;switch(this.rotation){case 90:return[-Xt,Ft];case 180:return[Xt,Ft];case 270:return[Xt,-Ft];default:return[-Xt,-Ft]}},Nt=new WeakSet,Vl=function(Kt,Jt,Qt){switch(Qt){case 90:return[Jt,-Kt];case 180:return[-Kt,-Jt];case 270:return[-Jt,Kt];default:return[Kt,Jt]}},Wl=function(Kt){switch(Kt){case 90:{const[Jt,Qt]=this.pageDimensions;return[0,-Jt/Qt,Qt/Jt,0]}case 180:return[-1,0,0,-1];case 270:{const[Jt,Qt]=this.pageDimensions;return[0,Jt/Qt,-Qt/Jt,0]}default:return[1,0,0,1]}},Mu=function(){if(rr(this,Rt))return;nn(this,Rt,document.createElement("div")),rr(this,Rt).classList.add("resizers");const Kt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Kt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Jt of Kt){const Qt=document.createElement("div");rr(this,Rt).append(Qt),Qt.classList.add("resizer",Jt),Qt.addEventListener("pointerdown",Ur(this,kt,ku).bind(this,Jt)),Qt.addEventListener("contextmenu",gt.noContextMenu)}this.div.prepend(rr(this,Rt))},ku=function(Kt,Jt){Jt.preventDefault();const{isMac:Qt}=mt.FeatureTest.platform;if(Jt.button!==0||Jt.ctrlKey&&Qt)return;const Xt=Ur(this,kt,Nu).bind(this,Kt),Ft=this._isDraggable;this._isDraggable=!1;const Vt={passive:!0,capture:!0};window.addEventListener("pointermove",Xt,Vt);const Yt=this.x,er=this.y,tr=this.width,Zt=this.height,ar=this.parent.div.style.cursor,cr=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Jt.target).cursor;const sr=()=>{this._isDraggable=Ft,window.removeEventListener("pointerup",sr),window.removeEventListener("blur",sr),window.removeEventListener("pointermove",Xt,Vt),this.parent.div.style.cursor=ar,this.div.style.cursor=cr;const ir=this.x,ur=this.y,fr=this.width,yr=this.height;ir===Yt&&ur===er&&fr===tr&&yr===Zt||this.addCommands({cmd:()=>{this.width=fr,this.height=yr,this.x=ir,this.y=ur;const[lr,gr]=this.parentDimensions;this.setDims(lr*fr,gr*yr),this.fixAndSetPosition()},undo:()=>{this.width=tr,this.height=Zt,this.x=Yt,this.y=er;const[lr,gr]=this.parentDimensions;this.setDims(lr*tr,gr*Zt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",sr),window.addEventListener("blur",sr)},Nu=function(Kt,Jt){const[Qt,Xt]=this.parentDimensions,Ft=this.x,Vt=this.y,Yt=this.width,er=this.height,tr=qt.MIN_SIZE/Qt,Zt=qt.MIN_SIZE/Xt,ar=Hr=>Math.round(Hr*1e4)/1e4,cr=Ur(this,kt,Wl).call(this,this.rotation),sr=(Hr,Or)=>[cr[0]*Hr+cr[2]*Or,cr[1]*Hr+cr[3]*Or],ir=Ur(this,kt,Wl).call(this,360-this.rotation),ur=(Hr,Or)=>[ir[0]*Hr+ir[2]*Or,ir[1]*Hr+ir[3]*Or];let fr,yr,lr=!1,gr=!1;switch(Kt){case"topLeft":lr=!0,fr=(Hr,Or)=>[0,0],yr=(Hr,Or)=>[Hr,Or];break;case"topMiddle":fr=(Hr,Or)=>[Hr/2,0],yr=(Hr,Or)=>[Hr/2,Or];break;case"topRight":lr=!0,fr=(Hr,Or)=>[Hr,0],yr=(Hr,Or)=>[0,Or];break;case"middleRight":gr=!0,fr=(Hr,Or)=>[Hr,Or/2],yr=(Hr,Or)=>[0,Or/2];break;case"bottomRight":lr=!0,fr=(Hr,Or)=>[Hr,Or],yr=(Hr,Or)=>[0,0];break;case"bottomMiddle":fr=(Hr,Or)=>[Hr/2,Or],yr=(Hr,Or)=>[Hr/2,0];break;case"bottomLeft":lr=!0,fr=(Hr,Or)=>[0,Or],yr=(Hr,Or)=>[Hr,0];break;case"middleLeft":gr=!0,fr=(Hr,Or)=>[0,Or/2],yr=(Hr,Or)=>[Hr,Or/2];break}const or=fr(Yt,er),dr=yr(Yt,er);let xr=sr(...dr);const pr=ar(Ft+xr[0]),wr=ar(Vt+xr[1]);let Rr=1,Pr=1,[Er,Nr]=this.screenToPageTranslation(Jt.movementX,Jt.movementY);if([Er,Nr]=ur(Er/Qt,Nr/Xt),lr){const Hr=Math.hypot(Yt,er);Rr=Pr=Math.max(Math.min(Math.hypot(dr[0]-or[0]-Er,dr[1]-or[1]-Nr)/Hr,1/Yt,1/er),tr/Yt,Zt/er)}else gr?Rr=Math.max(tr,Math.min(1,Math.abs(dr[0]-or[0]-Er)))/Yt:Pr=Math.max(Zt,Math.min(1,Math.abs(dr[1]-or[1]-Nr)))/er;const Wr=ar(Yt*Rr),an=ar(er*Pr);xr=sr(...yr(Wr,an));const Kr=pr-xr[0],sn=wr-xr[1];this.width=Wr,this.height=an,this.x=Kr,this.y=sn,this.setDims(Qt*Wr,Xt*an),this.fixAndSetPosition()},Ul=async function(){var Qt;const Kt=rr(this,St);if(!Kt)return;if(!rr(this,bt)&&!rr(this,xt)){Kt.classList.remove("done"),(Qt=rr(this,Et))==null||Qt.remove();return}qt._l10nPromise.get("editor_alt_text_edit_button_label").then(Xt=>{Kt.setAttribute("aria-label",Xt)});let Jt=rr(this,Et);if(!Jt){nn(this,Et,Jt=document.createElement("span")),Jt.className="tooltip",Jt.setAttribute("role","tooltip");const Xt=Jt.id=`alt-text-tooltip-${this.id}`;Kt.setAttribute("aria-describedby",Xt);const Ft=100;Kt.addEventListener("mouseenter",()=>{nn(this,Ct,setTimeout(()=>{nn(this,Ct,null),rr(this,Et).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Ft))}),Kt.addEventListener("mouseleave",()=>{var Vt;clearTimeout(rr(this,Ct)),nn(this,Ct,null),(Vt=rr(this,Et))==null||Vt.classList.remove("show")})}Kt.classList.add("done"),Jt.innerText=rr(this,xt)?await qt._l10nPromise.get("editor_alt_text_decorative_tooltip"):rr(this,bt),Jt.parentNode||Kt.append(Jt)},ju=function(Kt){if(!this._isDraggable)return;const Jt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Qt,Xt;Jt&&(Qt={passive:!0,capture:!0},Xt=Vt=>{const[Yt,er]=this.screenToPageTranslation(Vt.movementX,Vt.movementY);this._uiManager.dragSelectedEditors(Yt,er)},window.addEventListener("pointermove",Xt,Qt));const Ft=()=>{if(window.removeEventListener("pointerup",Ft),window.removeEventListener("blur",Ft),Jt&&window.removeEventListener("pointermove",Xt,Qt),nn(this,$t,!1),!this._uiManager.endDragSession()){const{isMac:Vt}=mt.FeatureTest.platform;Kt.ctrlKey&&!Vt||Kt.shiftKey||Kt.metaKey&&Vt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Ft),window.addEventListener("blur",Ft)},en(qt,Nt),Do(qt,"_borderLineWidth",-1),Do(qt,"_colorManager",new ht.ColorManager),Do(qt,"_zIndex",1),Do(qt,"SMALL_EDITOR_SIZE",0);let vt=qt;ft.AnnotationEditor=vt;class yt extends vt{constructor(Kt){super(Kt),this.annotationElementId=Kt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(dt,ft,pt)=>{var wt,Rt,Tt,Pt,$t,Kl,At,Ot,kt,Mt,jt,Du,Dt,Bt,Ht,Wt,zt,Ut,qt,Gt,Kt,Jt,Qt,Xt,Ft,Vt,Yt,er,tr,Zt,ar,cr,sr,ir,ur,fr,yr,lr,gr,or,dr,xr,pr,wr,Rr,Pr,Er,Lu,Gl,Xl,Qs,Yl,Jl,ds,Fs,Fu,Bu,Ql,Bs,Zl;Object.defineProperty(ft,"__esModule",{value:!0}),ft.KeyboardManager=ft.CommandManager=ft.ColorManager=ft.AnnotationEditorUIManager=void 0,ft.bindEvents=gt,ft.opacityToHex=vt;var ht=pt(1),mt=pt(6);function gt(pn,$r,Mr){for(const Gr of Mr)$r.addEventListener(Gr,pn[Gr].bind(pn))}function vt(pn){return Math.round(Math.min(255,Math.max(1,255*pn))).toString(16).padStart(2,"0")}class yt{constructor(){en(this,wt,0)}getId(){return`${ht.AnnotationEditorPrefix}${Ls(this,wt)._++}`}}wt=new WeakMap;const It=class It{constructor(){en(this,$t);en(this,Rt,(0,ht.getUuid)());en(this,Tt,0);en(this,Pt,null)}static get _isSVGFittingCanvas(){const $r='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Gr=new OffscreenCanvas(1,3).getContext("2d"),un=new Image;un.src=$r;const Qr=un.decode().then(()=>(Gr.drawImage(un,0,0,1,1,0,0,1,3),new Uint32Array(Gr.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,ht.shadow)(this,"_isSVGFittingCanvas",Qr)}async getFromFile($r){const{lastModified:Mr,name:Gr,size:un,type:Qr}=$r;return Ur(this,$t,Kl).call(this,`${Mr}_${Gr}_${un}_${Qr}`,$r)}async getFromUrl($r){return Ur(this,$t,Kl).call(this,$r,$r)}async getFromId($r){rr(this,Pt)||nn(this,Pt,new Map);const Mr=rr(this,Pt).get($r);return Mr?Mr.bitmap?(Mr.refCounter+=1,Mr):Mr.file?this.getFromFile(Mr.file):this.getFromUrl(Mr.url):null}getSvgUrl($r){const Mr=rr(this,Pt).get($r);return Mr!=null&&Mr.isSvg?Mr.svgUrl:null}deleteId($r){rr(this,Pt)||nn(this,Pt,new Map);const Mr=rr(this,Pt).get($r);Mr&&(Mr.refCounter-=1,Mr.refCounter===0&&(Mr.bitmap=null))}isValidId($r){return $r.startsWith(`image_${rr(this,Rt)}_`)}};Rt=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,$t=new WeakSet,Kl=async function($r,Mr){rr(this,Pt)||nn(this,Pt,new Map);let Gr=rr(this,Pt).get($r);if(Gr===null)return null;if(Gr!=null&&Gr.bitmap)return Gr.refCounter+=1,Gr;try{Gr||(Gr={bitmap:null,id:`image_${rr(this,Rt)}_${Ls(this,Tt)._++}`,refCounter:0,isSvg:!1});let un;if(typeof Mr=="string"){Gr.url=Mr;const Qr=await fetch(Mr);if(!Qr.ok)throw new Error(Qr.statusText);un=await Qr.blob()}else un=Gr.file=Mr;if(un.type==="image/svg+xml"){const Qr=It._isSVGFittingCanvas,tn=new FileReader,br=new Image,hr=new Promise((_r,kr)=>{br.onload=()=>{Gr.bitmap=br,Gr.isSvg=!0,_r()},tn.onload=async()=>{const Lr=Gr.svgUrl=tn.result;br.src=await Qr?`${Lr}#svgView(preserveAspectRatio(none))`:Lr},br.onerror=tn.onerror=kr});tn.readAsDataURL(un),await hr}else Gr.bitmap=await createImageBitmap(un);Gr.refCounter=1}catch(un){console.error(un),Gr=null}return rr(this,Pt).set($r,Gr),Gr&&rr(this,Pt).set(Gr.id,Gr),Gr};let bt=It;class xt{constructor($r=128){en(this,At,[]);en(this,Ot,!1);en(this,kt);en(this,Mt,-1);nn(this,kt,$r)}add({cmd:$r,undo:Mr,mustExec:Gr,type:un=NaN,overwriteIfSameType:Qr=!1,keepUndo:tn=!1}){if(Gr&&$r(),rr(this,Ot))return;const br={cmd:$r,undo:Mr,type:un};if(rr(this,Mt)===-1){rr(this,At).length>0&&(rr(this,At).length=0),nn(this,Mt,0),rr(this,At).push(br);return}if(Qr&&rr(this,At)[rr(this,Mt)].type===un){tn&&(br.undo=rr(this,At)[rr(this,Mt)].undo),rr(this,At)[rr(this,Mt)]=br;return}const hr=rr(this,Mt)+1;hr===rr(this,kt)?rr(this,At).splice(0,1):(nn(this,Mt,hr),hr<rr(this,At).length&&rr(this,At).splice(hr)),rr(this,At).push(br)}undo(){rr(this,Mt)!==-1&&(nn(this,Ot,!0),rr(this,At)[rr(this,Mt)].undo(),nn(this,Ot,!1),nn(this,Mt,rr(this,Mt)-1))}redo(){rr(this,Mt)<rr(this,At).length-1&&(nn(this,Mt,rr(this,Mt)+1),nn(this,Ot,!0),rr(this,At)[rr(this,Mt)].cmd(),nn(this,Ot,!1))}hasSomethingToUndo(){return rr(this,Mt)!==-1}hasSomethingToRedo(){return rr(this,Mt)<rr(this,At).length-1}destroy(){nn(this,At,null)}}At=new WeakMap,Ot=new WeakMap,kt=new WeakMap,Mt=new WeakMap,ft.CommandManager=xt;class St{constructor($r){en(this,jt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Mr}=ht.FeatureTest.platform;for(const[Gr,un,Qr={}]of $r)for(const tn of Gr){const br=tn.startsWith("mac+");Mr&&br?(this.callbacks.set(tn.slice(4),{callback:un,options:Qr}),this.allKeys.add(tn.split("+").at(-1))):!Mr&&!br&&(this.callbacks.set(tn,{callback:un,options:Qr}),this.allKeys.add(tn.split("+").at(-1)))}}exec($r,Mr){if(!this.allKeys.has(Mr.key))return;const Gr=this.callbacks.get(Ur(this,jt,Du).call(this,Mr));if(!Gr)return;const{callback:un,options:{bubbles:Qr=!1,args:tn=[],checker:br=null}}=Gr;br&&!br($r,Mr)||(un.bind($r,...tn)(),Qr||(Mr.stopPropagation(),Mr.preventDefault()))}}jt=new WeakSet,Du=function($r){$r.altKey&&this.buffer.push("alt"),$r.ctrlKey&&this.buffer.push("ctrl"),$r.metaKey&&this.buffer.push("meta"),$r.shiftKey&&this.buffer.push("shift"),this.buffer.push($r.key);const Mr=this.buffer.join("+");return this.buffer.length=0,Mr},ft.KeyboardManager=St;const Lt=class Lt{get _colors(){const $r=new Map([["CanvasText",null],["Canvas",null]]);return(0,mt.getColorValues)($r),(0,ht.shadow)(this,"_colors",$r)}convert($r){const Mr=(0,mt.getRGB)($r);if(!window.matchMedia("(forced-colors: active)").matches)return Mr;for(const[Gr,un]of this._colors)if(un.every((Qr,tn)=>Qr===Mr[tn]))return Lt._colorsMapping.get(Gr);return Mr}getHexCode($r){const Mr=this._colors.get($r);return Mr?ht.Util.makeHexColor(...Mr):$r}};Do(Lt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Et=Lt;ft.ColorManager=Et;const on=class on{constructor($r,Mr,Gr,un,Qr,tn){en(this,Er);en(this,Dt,null);en(this,Bt,new Map);en(this,Ht,new Map);en(this,Wt,null);en(this,zt,null);en(this,Ut,new xt);en(this,qt,0);en(this,Gt,new Set);en(this,Kt,null);en(this,Jt,null);en(this,Qt,new Set);en(this,Xt,null);en(this,Ft,new yt);en(this,Vt,!1);en(this,Yt,!1);en(this,er,null);en(this,tr,ht.AnnotationEditorType.NONE);en(this,Zt,new Set);en(this,ar,null);en(this,cr,this.blur.bind(this));en(this,sr,this.focus.bind(this));en(this,ir,this.copy.bind(this));en(this,ur,this.cut.bind(this));en(this,fr,this.paste.bind(this));en(this,yr,this.keydown.bind(this));en(this,lr,this.onEditingAction.bind(this));en(this,gr,this.onPageChanging.bind(this));en(this,or,this.onScaleChanging.bind(this));en(this,dr,this.onRotationChanging.bind(this));en(this,xr,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});en(this,pr,[0,0]);en(this,wr,null);en(this,Rr,null);en(this,Pr,null);nn(this,Rr,$r),nn(this,Pr,Mr),nn(this,Wt,Gr),this._eventBus=un,this._eventBus._on("editingaction",rr(this,lr)),this._eventBus._on("pagechanging",rr(this,gr)),this._eventBus._on("scalechanging",rr(this,or)),this._eventBus._on("rotationchanging",rr(this,dr)),nn(this,zt,Qr.annotationStorage),nn(this,Xt,Qr.filterFactory),nn(this,ar,tn),this.viewParameters={realScale:mt.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const $r=on.prototype,Mr=Qr=>{const{activeElement:tn}=document;return tn&&rr(Qr,Rr).contains(tn)&&Qr.hasSomethingToControl()},Gr=this.TRANSLATE_SMALL,un=this.TRANSLATE_BIG;return(0,ht.shadow)(this,"_keyboardManager",new St([[["ctrl+a","mac+meta+a"],$r.selectAll],[["ctrl+z","mac+meta+z"],$r.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],$r.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],$r.delete],[["Escape","mac+Escape"],$r.unselectAll],[["ArrowLeft","mac+ArrowLeft"],$r.translateSelectedEditors,{args:[-Gr,0],checker:Mr}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$r.translateSelectedEditors,{args:[-un,0],checker:Mr}],[["ArrowRight","mac+ArrowRight"],$r.translateSelectedEditors,{args:[Gr,0],checker:Mr}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$r.translateSelectedEditors,{args:[un,0],checker:Mr}],[["ArrowUp","mac+ArrowUp"],$r.translateSelectedEditors,{args:[0,-Gr],checker:Mr}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$r.translateSelectedEditors,{args:[0,-un],checker:Mr}],[["ArrowDown","mac+ArrowDown"],$r.translateSelectedEditors,{args:[0,Gr],checker:Mr}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$r.translateSelectedEditors,{args:[0,un],checker:Mr}]]))}destroy(){Ur(this,Er,Qs).call(this),Ur(this,Er,Gl).call(this),this._eventBus._off("editingaction",rr(this,lr)),this._eventBus._off("pagechanging",rr(this,gr)),this._eventBus._off("scalechanging",rr(this,or)),this._eventBus._off("rotationchanging",rr(this,dr));for(const $r of rr(this,Ht).values())$r.destroy();rr(this,Ht).clear(),rr(this,Bt).clear(),rr(this,Qt).clear(),nn(this,Dt,null),rr(this,Zt).clear(),rr(this,Ut).destroy(),rr(this,Wt).destroy()}get hcmFilter(){return(0,ht.shadow)(this,"hcmFilter",rr(this,ar)?rr(this,Xt).addHCMFilter(rr(this,ar).foreground,rr(this,ar).background):"none")}get direction(){return(0,ht.shadow)(this,"direction",getComputedStyle(rr(this,Rr)).direction)}editAltText($r){var Mr;(Mr=rr(this,Wt))==null||Mr.editAltText(this,$r)}onPageChanging({pageNumber:$r}){nn(this,qt,$r-1)}focusMainContainer(){rr(this,Rr).focus()}findParent($r,Mr){for(const Gr of rr(this,Ht).values()){const{x:un,y:Qr,width:tn,height:br}=Gr.div.getBoundingClientRect();if($r>=un&&$r<=un+tn&&Mr>=Qr&&Mr<=Qr+br)return Gr}return null}disableUserSelect($r=!1){rr(this,Pr).classList.toggle("noUserSelect",$r)}addShouldRescale($r){rr(this,Qt).add($r)}removeShouldRescale($r){rr(this,Qt).delete($r)}onScaleChanging({scale:$r}){this.commitOrRemove(),this.viewParameters.realScale=$r*mt.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Mr of rr(this,Qt))Mr.onScaleChanging()}onRotationChanging({pagesRotation:$r}){this.commitOrRemove(),this.viewParameters.rotation=$r}addToAnnotationStorage($r){!$r.isEmpty()&&rr(this,zt)&&!rr(this,zt).has($r.id)&&rr(this,zt).setValue($r.id,$r)}blur(){if(!this.hasSelection)return;const{activeElement:$r}=document;for(const Mr of rr(this,Zt))if(Mr.div.contains($r)){nn(this,er,[Mr,$r]),Mr._focusEventsAllowed=!1;break}}focus(){if(!rr(this,er))return;const[$r,Mr]=rr(this,er);nn(this,er,null),Mr.addEventListener("focusin",()=>{$r._focusEventsAllowed=!0},{once:!0}),Mr.focus()}addEditListeners(){Ur(this,Er,Xl).call(this),Ur(this,Er,Yl).call(this)}removeEditListeners(){Ur(this,Er,Qs).call(this),Ur(this,Er,Jl).call(this)}copy($r){var Gr;if($r.preventDefault(),(Gr=rr(this,Dt))==null||Gr.commitOrRemove(),!this.hasSelection)return;const Mr=[];for(const un of rr(this,Zt)){const Qr=un.serialize(!0);Qr&&Mr.push(Qr)}Mr.length!==0&&$r.clipboardData.setData("application/pdfjs",JSON.stringify(Mr))}cut($r){this.copy($r),this.delete()}paste($r){$r.preventDefault();const{clipboardData:Mr}=$r;for(const Qr of Mr.items)for(const tn of rr(this,Jt))if(tn.isHandlingMimeForPasting(Qr.type)){tn.paste(Qr,this.currentLayer);return}let Gr=Mr.getData("application/pdfjs");if(!Gr)return;try{Gr=JSON.parse(Gr)}catch(Qr){(0,ht.warn)(`paste: "${Qr.message}".`);return}if(!Array.isArray(Gr))return;this.unselectAll();const un=this.currentLayer;try{const Qr=[];for(const hr of Gr){const _r=un.deserialize(hr);if(!_r)return;Qr.push(_r)}const tn=()=>{for(const hr of Qr)Ur(this,Er,Ql).call(this,hr);Ur(this,Er,Zl).call(this,Qr)},br=()=>{for(const hr of Qr)hr.remove()};this.addCommands({cmd:tn,undo:br,mustExec:!0})}catch(Qr){(0,ht.warn)(`paste: "${Qr.message}".`)}}keydown($r){var Mr;(Mr=this.getActive())!=null&&Mr.shouldGetKeyboardEvents()||on._keyboardManager.exec(this,$r)}onEditingAction($r){["undo","redo","delete","selectAll"].includes($r.name)&&this[$r.name]()}setEditingState($r){$r?(Ur(this,Er,Lu).call(this),Ur(this,Er,Xl).call(this),Ur(this,Er,Yl).call(this),Ur(this,Er,ds).call(this,{isEditing:rr(this,tr)!==ht.AnnotationEditorType.NONE,isEmpty:Ur(this,Er,Bs).call(this),hasSomethingToUndo:rr(this,Ut).hasSomethingToUndo(),hasSomethingToRedo:rr(this,Ut).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ur(this,Er,Gl).call(this),Ur(this,Er,Qs).call(this),Ur(this,Er,Jl).call(this),Ur(this,Er,ds).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes($r){if(!rr(this,Jt)){nn(this,Jt,$r);for(const Mr of rr(this,Jt))Ur(this,Er,Fs).call(this,Mr.defaultPropertiesToUpdate)}}getId(){return rr(this,Ft).getId()}get currentLayer(){return rr(this,Ht).get(rr(this,qt))}getLayer($r){return rr(this,Ht).get($r)}get currentPageIndex(){return rr(this,qt)}addLayer($r){rr(this,Ht).set($r.pageIndex,$r),rr(this,Vt)?$r.enable():$r.disable()}removeLayer($r){rr(this,Ht).delete($r.pageIndex)}updateMode($r,Mr=null){if(rr(this,tr)!==$r){if(nn(this,tr,$r),$r===ht.AnnotationEditorType.NONE){this.setEditingState(!1),Ur(this,Er,Bu).call(this);return}this.setEditingState(!0),Ur(this,Er,Fu).call(this),this.unselectAll();for(const Gr of rr(this,Ht).values())Gr.updateMode($r);if(Mr){for(const Gr of rr(this,Bt).values())if(Gr.annotationElementId===Mr){this.setSelected(Gr),Gr.enterInEditMode();break}}}}updateToolbar($r){$r!==rr(this,tr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:$r})}updateParams($r,Mr){if(rr(this,Jt)){if($r===ht.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor($r);return}for(const Gr of rr(this,Zt))Gr.updateParams($r,Mr);for(const Gr of rr(this,Jt))Gr.updateDefaultParams($r,Mr)}}enableWaiting($r=!1){if(rr(this,Yt)!==$r){nn(this,Yt,$r);for(const Mr of rr(this,Ht).values())$r?Mr.disableClick():Mr.enableClick(),Mr.div.classList.toggle("waiting",$r)}}getEditors($r){const Mr=[];for(const Gr of rr(this,Bt).values())Gr.pageIndex===$r&&Mr.push(Gr);return Mr}getEditor($r){return rr(this,Bt).get($r)}addEditor($r){rr(this,Bt).set($r.id,$r)}removeEditor($r){var Mr;rr(this,Bt).delete($r.id),this.unselect($r),(!$r.annotationElementId||!rr(this,Gt).has($r.annotationElementId))&&((Mr=rr(this,zt))==null||Mr.remove($r.id))}addDeletedAnnotationElement($r){rr(this,Gt).add($r.annotationElementId),$r.deleted=!0}isDeletedAnnotationElement($r){return rr(this,Gt).has($r)}removeDeletedAnnotationElement($r){rr(this,Gt).delete($r.annotationElementId),$r.deleted=!1}setActiveEditor($r){rr(this,Dt)!==$r&&(nn(this,Dt,$r),$r&&Ur(this,Er,Fs).call(this,$r.propertiesToUpdate))}toggleSelected($r){if(rr(this,Zt).has($r)){rr(this,Zt).delete($r),$r.unselect(),Ur(this,Er,ds).call(this,{hasSelectedEditor:this.hasSelection});return}rr(this,Zt).add($r),$r.select(),Ur(this,Er,Fs).call(this,$r.propertiesToUpdate),Ur(this,Er,ds).call(this,{hasSelectedEditor:!0})}setSelected($r){for(const Mr of rr(this,Zt))Mr!==$r&&Mr.unselect();rr(this,Zt).clear(),rr(this,Zt).add($r),$r.select(),Ur(this,Er,Fs).call(this,$r.propertiesToUpdate),Ur(this,Er,ds).call(this,{hasSelectedEditor:!0})}isSelected($r){return rr(this,Zt).has($r)}unselect($r){$r.unselect(),rr(this,Zt).delete($r),Ur(this,Er,ds).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return rr(this,Zt).size!==0}undo(){rr(this,Ut).undo(),Ur(this,Er,ds).call(this,{hasSomethingToUndo:rr(this,Ut).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ur(this,Er,Bs).call(this)})}redo(){rr(this,Ut).redo(),Ur(this,Er,ds).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:rr(this,Ut).hasSomethingToRedo(),isEmpty:Ur(this,Er,Bs).call(this)})}addCommands($r){rr(this,Ut).add($r),Ur(this,Er,ds).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ur(this,Er,Bs).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const $r=[...rr(this,Zt)],Mr=()=>{for(const un of $r)un.remove()},Gr=()=>{for(const un of $r)Ur(this,Er,Ql).call(this,un)};this.addCommands({cmd:Mr,undo:Gr,mustExec:!0})}commitOrRemove(){var $r;($r=rr(this,Dt))==null||$r.commitOrRemove()}hasSomethingToControl(){return rr(this,Dt)||this.hasSelection}selectAll(){for(const $r of rr(this,Zt))$r.commit();Ur(this,Er,Zl).call(this,rr(this,Bt).values())}unselectAll(){if(rr(this,Dt)){rr(this,Dt).commitOrRemove();return}if(this.hasSelection){for(const $r of rr(this,Zt))$r.unselect();rr(this,Zt).clear(),Ur(this,Er,ds).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors($r,Mr,Gr=!1){if(Gr||this.commitOrRemove(),!this.hasSelection)return;rr(this,pr)[0]+=$r,rr(this,pr)[1]+=Mr;const[un,Qr]=rr(this,pr),tn=[...rr(this,Zt)],br=1e3;rr(this,wr)&&clearTimeout(rr(this,wr)),nn(this,wr,setTimeout(()=>{nn(this,wr,null),rr(this,pr)[0]=rr(this,pr)[1]=0,this.addCommands({cmd:()=>{for(const hr of tn)rr(this,Bt).has(hr.id)&&hr.translateInPage(un,Qr)},undo:()=>{for(const hr of tn)rr(this,Bt).has(hr.id)&&hr.translateInPage(-un,-Qr)},mustExec:!1})},br));for(const hr of tn)hr.translateInPage($r,Mr)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),nn(this,Kt,new Map);for(const $r of rr(this,Zt))rr(this,Kt).set($r,{savedX:$r.x,savedY:$r.y,savedPageIndex:$r.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!rr(this,Kt))return!1;this.disableUserSelect(!1);const $r=rr(this,Kt);nn(this,Kt,null);let Mr=!1;for(const[{x:un,y:Qr,pageIndex:tn},br]of $r)br.newX=un,br.newY=Qr,br.newPageIndex=tn,Mr||(Mr=un!==br.savedX||Qr!==br.savedY||tn!==br.savedPageIndex);if(!Mr)return!1;const Gr=(un,Qr,tn,br)=>{if(rr(this,Bt).has(un.id)){const hr=rr(this,Ht).get(br);hr?un._setParentAndPosition(hr,Qr,tn):(un.pageIndex=br,un.x=Qr,un.y=tn)}};return this.addCommands({cmd:()=>{for(const[un,{newX:Qr,newY:tn,newPageIndex:br}]of $r)Gr(un,Qr,tn,br)},undo:()=>{for(const[un,{savedX:Qr,savedY:tn,savedPageIndex:br}]of $r)Gr(un,Qr,tn,br)},mustExec:!0}),!0}dragSelectedEditors($r,Mr){if(rr(this,Kt))for(const Gr of rr(this,Kt).keys())Gr.drag($r,Mr)}rebuild($r){if($r.parent===null){const Mr=this.getLayer($r.pageIndex);Mr?(Mr.changeParent($r),Mr.addOrRebuild($r)):(this.addEditor($r),this.addToAnnotationStorage($r),$r.rebuild())}else $r.parent.addOrRebuild($r)}isActive($r){return rr(this,Dt)===$r}getActive(){return rr(this,Dt)}getMode(){return rr(this,tr)}get imageManager(){return(0,ht.shadow)(this,"imageManager",new bt)}};Dt=new WeakMap,Bt=new WeakMap,Ht=new WeakMap,Wt=new WeakMap,zt=new WeakMap,Ut=new WeakMap,qt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,Xt=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,Yt=new WeakMap,er=new WeakMap,tr=new WeakMap,Zt=new WeakMap,ar=new WeakMap,cr=new WeakMap,sr=new WeakMap,ir=new WeakMap,ur=new WeakMap,fr=new WeakMap,yr=new WeakMap,lr=new WeakMap,gr=new WeakMap,or=new WeakMap,dr=new WeakMap,xr=new WeakMap,pr=new WeakMap,wr=new WeakMap,Rr=new WeakMap,Pr=new WeakMap,Er=new WeakSet,Lu=function(){window.addEventListener("focus",rr(this,sr)),window.addEventListener("blur",rr(this,cr))},Gl=function(){window.removeEventListener("focus",rr(this,sr)),window.removeEventListener("blur",rr(this,cr))},Xl=function(){window.addEventListener("keydown",rr(this,yr),{capture:!0})},Qs=function(){window.removeEventListener("keydown",rr(this,yr),{capture:!0})},Yl=function(){document.addEventListener("copy",rr(this,ir)),document.addEventListener("cut",rr(this,ur)),document.addEventListener("paste",rr(this,fr))},Jl=function(){document.removeEventListener("copy",rr(this,ir)),document.removeEventListener("cut",rr(this,ur)),document.removeEventListener("paste",rr(this,fr))},ds=function($r){Object.entries($r).some(([Gr,un])=>rr(this,xr)[Gr]!==un)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(rr(this,xr),$r)})},Fs=function($r){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:$r})},Fu=function(){if(!rr(this,Vt)){nn(this,Vt,!0);for(const $r of rr(this,Ht).values())$r.enable()}},Bu=function(){if(this.unselectAll(),rr(this,Vt)){nn(this,Vt,!1);for(const $r of rr(this,Ht).values())$r.disable()}},Ql=function($r){const Mr=rr(this,Ht).get($r.pageIndex);Mr?Mr.addOrRebuild($r):this.addEditor($r)},Bs=function(){if(rr(this,Bt).size===0)return!0;if(rr(this,Bt).size===1)for(const $r of rr(this,Bt).values())return $r.isEmpty();return!1},Zl=function($r){rr(this,Zt).clear();for(const Mr of $r)Mr.isEmpty()||(rr(this,Zt).add(Mr),Mr.select());Ur(this,Er,ds).call(this,{hasSelectedEditor:!0})},Do(on,"TRANSLATE_SMALL",1),Do(on,"TRANSLATE_BIG",10);let Ct=on;ft.AnnotationEditorUIManager=Ct},(dt,ft,pt)=>{var qt,Gt,Kt,Jt,Qt,Xt,Ft,Vt,Yt,er,tr,Zt,Os,As,_c,Zs,yl,zs,Hs;Object.defineProperty(ft,"__esModule",{value:!0}),ft.StatTimer=ft.RenderingCancelledException=ft.PixelsPerInch=ft.PageViewport=ft.PDFDateString=ft.DOMStandardFontDataFactory=ft.DOMSVGFactory=ft.DOMFilterFactory=ft.DOMCanvasFactory=ft.DOMCMapReaderFactory=void 0,ft.deprecated=Mt,ft.getColorValues=Bt,ft.getCurrentTransform=Ht,ft.getCurrentTransformInverse=Wt,ft.getFilenameFromUrl=$t,ft.getPdfFilenameFromUrl=_t,ft.getRGB=Dt,ft.getXfaPageViewport=Lt,ft.isDataScheme=Tt,ft.isPdfFile=Pt,ft.isValidFetchUrl=At,ft.loadScript=kt,ft.noContextMenu=Ot,ft.setLayerDimensions=zt;var ht=pt(7),mt=pt(1);const gt="http://www.w3.org/2000/svg",Ut=class Ut{};Do(Ut,"CSS",96),Do(Ut,"PDF",72),Do(Ut,"PDF_TO_CSS_UNITS",Ut.CSS/Ut.PDF);let vt=Ut;ft.PixelsPerInch=vt;class yt extends ht.BaseFilterFactory{constructor({docId:or,ownerDocument:dr=globalThis.document}={}){super();en(this,Zt);en(this,qt);en(this,Gt);en(this,Kt);en(this,Jt);en(this,Qt);en(this,Xt);en(this,Ft);en(this,Vt);en(this,Yt);en(this,er);en(this,tr,0);nn(this,Kt,or),nn(this,Jt,dr)}addFilter(or){if(!or)return"none";let dr=rr(this,Zt,Os).get(or);if(dr)return dr;let xr,pr,wr,Rr;if(or.length===1){const Wr=or[0],an=new Array(256);for(let Kr=0;Kr<256;Kr++)an[Kr]=Wr[Kr]/255;Rr=xr=pr=wr=an.join(",")}else{const[Wr,an,Kr]=or,sn=new Array(256),Hr=new Array(256),Or=new Array(256);for(let Yr=0;Yr<256;Yr++)sn[Yr]=Wr[Yr]/255,Hr[Yr]=an[Yr]/255,Or[Yr]=Kr[Yr]/255;xr=sn.join(","),pr=Hr.join(","),wr=Or.join(","),Rr=`${xr}${pr}${wr}`}if(dr=rr(this,Zt,Os).get(Rr),dr)return rr(this,Zt,Os).set(or,dr),dr;const Pr=`g_${rr(this,Kt)}_transfer_map_${Ls(this,tr)._++}`,Er=`url(#${Pr})`;rr(this,Zt,Os).set(or,Er),rr(this,Zt,Os).set(Rr,Er);const Nr=Ur(this,Zt,Zs).call(this,Pr);return Ur(this,Zt,zs).call(this,xr,pr,wr,Nr),Er}addHCMFilter(or,dr){var an;const xr=`${or}-${dr}`;if(rr(this,Xt)===xr)return rr(this,Ft);if(nn(this,Xt,xr),nn(this,Ft,"none"),(an=rr(this,Qt))==null||an.remove(),!or||!dr)return rr(this,Ft);const pr=Ur(this,Zt,Hs).call(this,or);or=mt.Util.makeHexColor(...pr);const wr=Ur(this,Zt,Hs).call(this,dr);if(dr=mt.Util.makeHexColor(...wr),rr(this,Zt,As).style.color="",or==="#000000"&&dr==="#ffffff"||or===dr)return rr(this,Ft);const Rr=new Array(256);for(let Kr=0;Kr<=255;Kr++){const sn=Kr/255;Rr[Kr]=sn<=.03928?sn/12.92:((sn+.055)/1.055)**2.4}const Pr=Rr.join(","),Er=`g_${rr(this,Kt)}_hcm_filter`,Nr=nn(this,Vt,Ur(this,Zt,Zs).call(this,Er));Ur(this,Zt,zs).call(this,Pr,Pr,Pr,Nr),Ur(this,Zt,_c).call(this,Nr);const Wr=(Kr,sn)=>{const Hr=pr[Kr]/255,Or=wr[Kr]/255,Yr=new Array(sn+1);for(let Ar=0;Ar<=sn;Ar++)Yr[Ar]=Hr+Ar/sn*(Or-Hr);return Yr.join(",")};return Ur(this,Zt,zs).call(this,Wr(0,5),Wr(1,5),Wr(2,5),Nr),nn(this,Ft,`url(#${Er})`),rr(this,Ft)}addHighlightHCMFilter(or,dr,xr,pr){var Or;const wr=`${or}-${dr}-${xr}-${pr}`;if(rr(this,Yt)===wr)return rr(this,er);if(nn(this,Yt,wr),nn(this,er,"none"),(Or=rr(this,Vt))==null||Or.remove(),!or||!dr)return rr(this,er);const[Rr,Pr]=[or,dr].map(Ur(this,Zt,Hs).bind(this));let Er=Math.round(.2126*Rr[0]+.7152*Rr[1]+.0722*Rr[2]),Nr=Math.round(.2126*Pr[0]+.7152*Pr[1]+.0722*Pr[2]),[Wr,an]=[xr,pr].map(Ur(this,Zt,Hs).bind(this));Nr<Er&&([Er,Nr,Wr,an]=[Nr,Er,an,Wr]),rr(this,Zt,As).style.color="";const Kr=(Yr,Ar,Cr)=>{const Sr=new Array(256),vr=(Nr-Er)/Cr,Br=Yr/255,on=(Ar-Yr)/(255*Cr);let pn=0;for(let $r=0;$r<=Cr;$r++){const Mr=Math.round(Er+$r*vr),Gr=Br+$r*on;for(let un=pn;un<=Mr;un++)Sr[un]=Gr;pn=Mr+1}for(let $r=pn;$r<256;$r++)Sr[$r]=Sr[pn-1];return Sr.join(",")},sn=`g_${rr(this,Kt)}_hcm_highlight_filter`,Hr=nn(this,Vt,Ur(this,Zt,Zs).call(this,sn));return Ur(this,Zt,_c).call(this,Hr),Ur(this,Zt,zs).call(this,Kr(Wr[0],an[0],5),Kr(Wr[1],an[1],5),Kr(Wr[2],an[2],5),Hr),nn(this,er,`url(#${sn})`),rr(this,er)}destroy(or=!1){or&&(rr(this,Ft)||rr(this,er))||(rr(this,Gt)&&(rr(this,Gt).parentNode.parentNode.remove(),nn(this,Gt,null)),rr(this,qt)&&(rr(this,qt).clear(),nn(this,qt,null)),nn(this,tr,0))}}qt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,Xt=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,Yt=new WeakMap,er=new WeakMap,tr=new WeakMap,Zt=new WeakSet,Os=function(){return rr(this,qt)||nn(this,qt,new Map)},As=function(){if(!rr(this,Gt)){const or=rr(this,Jt).createElement("div"),{style:dr}=or;dr.visibility="hidden",dr.contain="strict",dr.width=dr.height=0,dr.position="absolute",dr.top=dr.left=0,dr.zIndex=-1;const xr=rr(this,Jt).createElementNS(gt,"svg");xr.setAttribute("width",0),xr.setAttribute("height",0),nn(this,Gt,rr(this,Jt).createElementNS(gt,"defs")),or.append(xr),xr.append(rr(this,Gt)),rr(this,Jt).body.append(or)}return rr(this,Gt)},_c=function(or){const dr=rr(this,Jt).createElementNS(gt,"feColorMatrix");dr.setAttribute("type","matrix"),dr.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),or.append(dr)},Zs=function(or){const dr=rr(this,Jt).createElementNS(gt,"filter");return dr.setAttribute("color-interpolation-filters","sRGB"),dr.setAttribute("id",or),rr(this,Zt,As).append(dr),dr},yl=function(or,dr,xr){const pr=rr(this,Jt).createElementNS(gt,dr);pr.setAttribute("type","discrete"),pr.setAttribute("tableValues",xr),or.append(pr)},zs=function(or,dr,xr,pr){const wr=rr(this,Jt).createElementNS(gt,"feComponentTransfer");pr.append(wr),Ur(this,Zt,yl).call(this,wr,"feFuncR",or),Ur(this,Zt,yl).call(this,wr,"feFuncG",dr),Ur(this,Zt,yl).call(this,wr,"feFuncB",xr)},Hs=function(or){return rr(this,Zt,As).style.color=or,Dt(getComputedStyle(rr(this,Zt,As)).getPropertyValue("color"))},ft.DOMFilterFactory=yt;class bt extends ht.BaseCanvasFactory{constructor({ownerDocument:gr=globalThis.document}={}){super(),this._document=gr}_createCanvas(gr,or){const dr=this._document.createElement("canvas");return dr.width=gr,dr.height=or,dr}}ft.DOMCanvasFactory=bt;async function xt(lr,gr=!1){if(At(lr,document.baseURI)){const or=await fetch(lr);if(!or.ok)throw new Error(or.statusText);return gr?new Uint8Array(await or.arrayBuffer()):(0,mt.stringToBytes)(await or.text())}return new Promise((or,dr)=>{const xr=new XMLHttpRequest;xr.open("GET",lr,!0),gr&&(xr.responseType="arraybuffer"),xr.onreadystatechange=()=>{if(xr.readyState===XMLHttpRequest.DONE){if(xr.status===200||xr.status===0){let pr;if(gr&&xr.response?pr=new Uint8Array(xr.response):!gr&&xr.responseText&&(pr=(0,mt.stringToBytes)(xr.responseText)),pr){or(pr);return}}dr(new Error(xr.statusText))}},xr.send(null)})}class St extends ht.BaseCMapReaderFactory{_fetchData(gr,or){return xt(gr,this.isCompressed).then(dr=>({cMapData:dr,compressionType:or}))}}ft.DOMCMapReaderFactory=St;class Et extends ht.BaseStandardFontDataFactory{_fetchData(gr){return xt(gr,!0)}}ft.DOMStandardFontDataFactory=Et;class Ct extends ht.BaseSVGFactory{_createSVG(gr){return document.createElementNS(gt,gr)}}ft.DOMSVGFactory=Ct;class wt{constructor({viewBox:gr,scale:or,rotation:dr,offsetX:xr=0,offsetY:pr=0,dontFlip:wr=!1}){this.viewBox=gr,this.scale=or,this.rotation=dr,this.offsetX=xr,this.offsetY=pr;const Rr=(gr[2]+gr[0])/2,Pr=(gr[3]+gr[1])/2;let Er,Nr,Wr,an;switch(dr%=360,dr<0&&(dr+=360),dr){case 180:Er=-1,Nr=0,Wr=0,an=1;break;case 90:Er=0,Nr=1,Wr=1,an=0;break;case 270:Er=0,Nr=-1,Wr=-1,an=0;break;case 0:Er=1,Nr=0,Wr=0,an=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}wr&&(Wr=-Wr,an=-an);let Kr,sn,Hr,Or;Er===0?(Kr=Math.abs(Pr-gr[1])*or+xr,sn=Math.abs(Rr-gr[0])*or+pr,Hr=(gr[3]-gr[1])*or,Or=(gr[2]-gr[0])*or):(Kr=Math.abs(Rr-gr[0])*or+xr,sn=Math.abs(Pr-gr[1])*or+pr,Hr=(gr[2]-gr[0])*or,Or=(gr[3]-gr[1])*or),this.transform=[Er*or,Nr*or,Wr*or,an*or,Kr-Er*or*Rr-Wr*or*Pr,sn-Nr*or*Rr-an*or*Pr],this.width=Hr,this.height=Or}get rawDims(){const{viewBox:gr}=this;return(0,mt.shadow)(this,"rawDims",{pageWidth:gr[2]-gr[0],pageHeight:gr[3]-gr[1],pageX:gr[0],pageY:gr[1]})}clone({scale:gr=this.scale,rotation:or=this.rotation,offsetX:dr=this.offsetX,offsetY:xr=this.offsetY,dontFlip:pr=!1}={}){return new wt({viewBox:this.viewBox.slice(),scale:gr,rotation:or,offsetX:dr,offsetY:xr,dontFlip:pr})}convertToViewportPoint(gr,or){return mt.Util.applyTransform([gr,or],this.transform)}convertToViewportRectangle(gr){const or=mt.Util.applyTransform([gr[0],gr[1]],this.transform),dr=mt.Util.applyTransform([gr[2],gr[3]],this.transform);return[or[0],or[1],dr[0],dr[1]]}convertToPdfPoint(gr,or){return mt.Util.applyInverseTransform([gr,or],this.transform)}}ft.PageViewport=wt;class Rt extends mt.BaseException{constructor(gr,or=0){super(gr,"RenderingCancelledException"),this.extraDelay=or}}ft.RenderingCancelledException=Rt;function Tt(lr){const gr=lr.length;let or=0;for(;or<gr&&lr[or].trim()==="";)or++;return lr.substring(or,or+5).toLowerCase()==="data:"}function Pt(lr){return typeof lr=="string"&&/\.pdf$/i.test(lr)}function $t(lr,gr=!1){return gr||([lr]=lr.split(/[#?]/,1)),lr.substring(lr.lastIndexOf("/")+1)}function _t(lr,gr="document.pdf"){if(typeof lr!="string")return gr;if(Tt(lr))return(0,mt.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),gr;const or=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,dr=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,xr=or.exec(lr);let pr=dr.exec(xr[1])||dr.exec(xr[2])||dr.exec(xr[3]);if(pr&&(pr=pr[0],pr.includes("%")))try{pr=dr.exec(decodeURIComponent(pr))[0]}catch{}return pr||gr}class It{constructor(){Do(this,"started",Object.create(null));Do(this,"times",[])}time(gr){gr in this.started&&(0,mt.warn)(`Timer is already running for ${gr}`),this.started[gr]=Date.now()}timeEnd(gr){gr in this.started||(0,mt.warn)(`Timer has not been started for ${gr}`),this.times.push({name:gr,start:this.started[gr],end:Date.now()}),delete this.started[gr]}toString(){const gr=[];let or=0;for(const{name:dr}of this.times)or=Math.max(dr.length,or);for(const{name:dr,start:xr,end:pr}of this.times)gr.push(`${dr.padEnd(or)} ${pr-xr}ms
